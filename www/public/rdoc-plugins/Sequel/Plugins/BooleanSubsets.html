<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Sequel::Plugins::BooleanSubsets - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-configure">::configure</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-Sequel::Plugins::BooleanSubsets">
  <h1 id="module-Sequel::Plugins::BooleanSubsets" class="module">
    module Sequel::Plugins::BooleanSubsets
  </h1>

  <section class="description">
    
<p>The boolean_subsets plugin allows for the automatic creation of subsets for for boolean columns, which can DRY up model classes that define such subsets manually.  By default, subsets are created for all columns of type :boolean, with the subset name being the same as column name, and the conditions being <code>column IS TRUE</code> (assuming the database supports that syntax).</p>

<p>You can provide a block to the plugin, which will be called with column name symbol, and should return an array of arguments to pass to <code>dataset_module.where</code>. Using this, you can change the method name and arguments for each column. This block is executed in the context of the model class.</p>

<p>Usage:</p>

<pre class="ruby"><span class="ruby-comment"># Add boolean subset methods for all columns of type :boolean</span>
<span class="ruby-comment"># in all model subclasses (called before loading subclasses)</span>
<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>.<span class="ruby-identifier">plugin</span> <span class="ruby-value">:boolean_subsets</span>

<span class="ruby-comment"># Add subsets for all boolean columns in the Album class</span>
<span class="ruby-constant">Album</span>.<span class="ruby-identifier">plugin</span>(<span class="ruby-value">:boolean_subsets</span>)

<span class="ruby-comment"># Remove is_ from the front of the column name when creating the subset</span>
<span class="ruby-comment"># method name, and use (column = &#39;Y&#39;) as the filter conditions</span>
<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>.<span class="ruby-identifier">plugin</span> <span class="ruby-value">:boolean_subsets</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
  [<span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/\Ais_/</span>, <span class="ruby-string">&#39;&#39;</span>), {<span class="ruby-identifier">column</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&#39;Y&#39;</span>}]
<span class="ruby-keyword">end</span>
</pre>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-configure" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">configure</span><span
            class="method-args">(model, &amp;block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create boolean subset methods for each boolean column.</p>
          
          

          
          <div class="method-source-code" id="configure-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/plugins/boolean_subsets.rb</span>
<span class="line-num">32</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">configure</span>(<span class="ruby-identifier">model</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">33</span>   <span class="ruby-identifier">model</span>.<span class="ruby-identifier">instance_exec</span> <span class="ruby-keyword">do</span>
<span class="line-num">34</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
<span class="line-num">35</span>       <span class="ruby-identifier">define_singleton_method</span>(<span class="ruby-value">:boolean_subset_args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">36</span>       <span class="ruby-identifier">singleton_class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:private</span>, <span class="ruby-value">:boolean_subset_args</span>)
<span class="line-num">37</span>     <span class="ruby-keyword">end</span>
<span class="line-num">38</span>     <span class="ruby-identifier">create_boolean_subsets</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dataset</span>
<span class="line-num">39</span>   <span class="ruby-keyword">end</span>
<span class="line-num">40</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

