<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Sequel::Plugins::EagerEach - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    
  </div>
</nav>

<main role="main" aria-labelledby="module-Sequel::Plugins::EagerEach">
  <h1 id="module-Sequel::Plugins::EagerEach" class="module">
    module Sequel::Plugins::EagerEach
  </h1>

  <section class="description">
    
<p>The eager_each plugin makes calling each on an eager loaded dataset do eager loading. By default, each does not work on an eager loaded dataset, because each iterates over rows of the dataset as they come in, and to eagerly load you need to have all values up front.  With the default associations code, you must call all on an eagerly loaded dataset, as calling each on an eager dataset skips the eager loading, and calling each on an eager_graph dataset makes it yield plain hashes with columns from all tables, instead of yielding the instances of the main model.</p>

<p>This plugin makes each call all for eagerly loaded datasets.  As all usually calls each, this is a bit of issue, but this plugin resolves the issue by cloning the dataset and setting a new flag in the cloned dataset, so that each can check with the flag to determine whether it should call all.</p>

<p>This plugin also makes first and related methods that load single records work with eager loading.  Note that when using eager_graph, calling first or a similar method will result in two queries, one to load the main object, and one to eagerly load all associated objects to that main object.</p>

<p>Usage:</p>

<pre class="ruby"><span class="ruby-comment"># Make all model subclass instances eagerly load for each (called before loading subclasses)</span>
<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>.<span class="ruby-identifier">plugin</span> <span class="ruby-value">:eager_each</span>

<span class="ruby-comment"># Make the Album class eagerly load for each</span>
<span class="ruby-constant">Album</span>.<span class="ruby-identifier">plugin</span> <span class="ruby-value">:eager_each</span>
</pre>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

