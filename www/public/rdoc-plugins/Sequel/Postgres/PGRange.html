<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Sequel::Postgres::PGRange - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../../Object.html">Object</a>
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><span class="include">Sequel::SQL::AliasMethods</span>
  
  
  
    <li><span class="include">Enumerable</span>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-empty">::empty</a>
    
    <li ><a href="#method-c-from_range">::from_range</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-3D-3D">#==</a>
    
    <li ><a href="#method-i-3D-3D-3D">#===</a>
    
    <li ><a href="#method-i-cover-3F">#cover?</a>
    
    <li ><a href="#method-i-empty-3F">#empty?</a>
    
    <li ><a href="#method-i-eql-3F">#eql?</a>
    
    <li ><a href="#method-i-exclude_begin-3F">#exclude_begin?</a>
    
    <li ><a href="#method-i-exclude_end-3F">#exclude_end?</a>
    
    <li ><a href="#method-i-hash">#hash</a>
    
    <li ><a href="#method-i-op">#op</a>
    
    <li ><a href="#method-i-sql_literal_append">#sql_literal_append</a>
    
    <li ><a href="#method-i-to_range">#to_range</a>
    
    <li ><a href="#method-i-unbounded_begin-3F">#unbounded_begin?</a>
    
    <li ><a href="#method-i-unbounded_end-3F">#unbounded_end?</a>
    
    <li ><a href="#method-i-unquoted_literal">#unquoted_literal</a>
    
    <li ><a href="#method-i-valid_ruby_range-3F">#valid_ruby_range?</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Sequel::Postgres::PGRange">
  <h1 id="class-Sequel::Postgres::PGRange" class="class">
    class Sequel::Postgres::PGRange
  </h1>

  <section class="description">
    
<p>:nocov:</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="ENDLESS_RANGE_NOT_SUPPORTED">ENDLESS_RANGE_NOT_SUPPORTED
        
        <dd>
        
      
        <dt id="STARTLESS_RANGE_NOT_SUPPORTED">STARTLESS_RANGE_NOT_SUPPORTED
        
        <dd>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-begin" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">begin</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The beginning of the range.  If nil, the range has an unbounded beginning.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-db_type" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">db_type</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The PostgreSQL database type for the range (e.g. &#39;int4range&#39;).</p>
        
        </div>
      </div>
      
      <div id="attribute-i-end" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">end</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The end of the range.  If nil, the range has an unbounded ending.</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-empty" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">empty</span><span
            class="method-args">(db_type=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create an empty <a href="PGRange.html"><code>PGRange</code></a> with the given database type.</p>
          
          

          
          <div class="method-source-code" id="empty-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">325</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">empty</span>(<span class="ruby-identifier">db_type</span>=<span class="ruby-keyword">nil</span>)
<span class="line-num">326</span>   <span class="ruby-identifier">new</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-value">:empty</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>, <span class="ruby-value">:db_type</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">db_type</span>)
<span class="line-num">327</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-from_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_range</span><span
            class="method-args">(range, db_type=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new <a href="PGRange.html"><code>PGRange</code></a> instance using the beginning and ending of the ruby <a href="../../Range.html"><code>Range</code></a>, with the given db_type.</p>
          
          

          
          <div class="method-source-code" id="from_range-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">320</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">from_range</span>(<span class="ruby-identifier">range</span>, <span class="ruby-identifier">db_type</span>=<span class="ruby-keyword">nil</span>)
<span class="line-num">321</span>   <span class="ruby-identifier">new</span>(<span class="ruby-identifier">range</span>.<span class="ruby-identifier">begin</span>, <span class="ruby-identifier">range</span>.<span class="ruby-identifier">end</span>, <span class="ruby-value">:exclude_end</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">range</span>.<span class="ruby-identifier">exclude_end?</span>, <span class="ruby-value">:db_type</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">db_type</span>)
<span class="line-num">322</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(beg, en, opts=OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Initialize a new <a href="PGRange.html"><code>PGRange</code></a> instance.  Accepts the following options:</p>
<dl class="rdoc-list note-list"><dt>:db_type 
<dd>
<p>The PostgreSQL database type for the range.</p>
</dd><dt>:empty 
<dd>
<p>Whether the range is empty (has no points)</p>
</dd><dt>:exclude_begin 
<dd>
<p>Whether the beginning element is excluded from the range.</p>
</dd><dt>:exclude_end 
<dd>
<p>Whether the ending element is excluded from the range.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">335</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">beg</span>, <span class="ruby-identifier">en</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)
<span class="line-num">336</span>   <span class="ruby-ivar">@begin</span> = <span class="ruby-identifier">beg</span>
<span class="line-num">337</span>   <span class="ruby-ivar">@end</span> = <span class="ruby-identifier">en</span>
<span class="line-num">338</span>   <span class="ruby-ivar">@empty</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">opts</span>[<span class="ruby-value">:empty</span>]
<span class="line-num">339</span>   <span class="ruby-ivar">@exclude_begin</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">opts</span>[<span class="ruby-value">:exclude_begin</span>]
<span class="line-num">340</span>   <span class="ruby-ivar">@exclude_end</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">opts</span>[<span class="ruby-value">:exclude_end</span>]
<span class="line-num">341</span>   <span class="ruby-ivar">@db_type</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:db_type</span>]
<span class="line-num">342</span>   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@empty</span>
<span class="line-num">343</span>     <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;cannot have an empty range with either a beginning or ending&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@begin</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@end</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:exclude_begin</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:exclude_end</span>].<span class="ruby-identifier">nil?</span>
<span class="line-num">344</span>   <span class="ruby-keyword">end</span>
<span class="line-num">345</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3D-3D" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(other)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="PGRange.html#method-i-eql-3F">eql?</a>
        </div>
        
      </div>

    
      <div id="method-i-3D-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">===</span><span
            class="method-args">(other)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allow <a href="PGRange.html"><code>PGRange</code></a> values in case statements, where they return true if they are equal to each other using eql?, or if this <a href="PGRange.html"><code>PGRange</code></a> can be converted to a <a href="../../Range.html"><code>Range</code></a>, delegating to that range.</p>
          
          

          
          <div class="method-source-code" id="3D-3D-3D-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">405</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">===</span>(<span class="ruby-identifier">other</span>)
<span class="line-num">406</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>)
<span class="line-num">407</span>     <span class="ruby-keyword">true</span>
<span class="line-num">408</span>   <span class="ruby-keyword">else</span>
<span class="line-num">409</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">valid_ruby_range?</span>
<span class="line-num">410</span>       <span class="ruby-identifier">to_range</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">other</span> 
<span class="line-num">411</span>     <span class="ruby-keyword">else</span>
<span class="line-num">412</span>       <span class="ruby-keyword">false</span>
<span class="line-num">413</span>     <span class="ruby-keyword">end</span>
<span class="line-num">414</span>   <span class="ruby-keyword">end</span>
<span class="line-num">415</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cover-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cover?</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return whether the value is inside the range.</p>
          
          

          
          <div class="method-source-code" id="cover-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">354</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cover?</span>(<span class="ruby-identifier">value</span>)
<span class="line-num">355</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">empty?</span>
<span class="line-num">356</span>   <span class="ruby-identifier">b</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">begin</span>
<span class="line-num">357</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">public_send</span>(<span class="ruby-identifier">exclude_begin?</span> <span class="ruby-operator">?</span> <span class="ruby-value">:&gt;=</span> <span class="ruby-operator">:</span> <span class="ruby-value">:&gt;</span>, <span class="ruby-identifier">value</span>)
<span class="line-num">358</span>   <span class="ruby-identifier">e</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">end</span>
<span class="line-num">359</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">public_send</span>(<span class="ruby-identifier">exclude_end?</span> <span class="ruby-operator">?</span> <span class="ruby-value">:&lt;=</span> <span class="ruby-operator">:</span> <span class="ruby-value">:&lt;</span>, <span class="ruby-identifier">value</span>)
<span class="line-num">360</span>   <span class="ruby-keyword">true</span>
<span class="line-num">361</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-empty-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">empty?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether this range is empty (has no points).  Note that for manually created ranges (ones not retrieved from the database), this will only be true if the range was created using the :empty option.</p>
          
          

          
          <div class="method-source-code" id="empty-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">420</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">empty?</span>
<span class="line-num">421</span>   <span class="ruby-ivar">@empty</span>
<span class="line-num">422</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eql-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eql?</span><span
            class="method-args">(other)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Consider the receiver equal to other <a href="PGRange.html"><code>PGRange</code></a> instances with the same beginning, ending, exclusions, and database type.  Also consider it equal to <a href="../../Range.html"><code>Range</code></a> instances if this <a href="PGRange.html"><code>PGRange</code></a> can be converted to a a <a href="../../Range.html"><code>Range</code></a> and those ranges are equal.</p>
          
          

          
          <div class="method-source-code" id="eql-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">367</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">eql?</span>(<span class="ruby-identifier">other</span>)
<span class="line-num">368</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">other</span>
<span class="line-num">369</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">PGRange</span>
<span class="line-num">370</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">db_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">db_type</span>
<span class="line-num">371</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">empty?</span>
<span class="line-num">372</span>         <span class="ruby-identifier">other</span>.<span class="ruby-identifier">empty?</span>
<span class="line-num">373</span>       <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">empty?</span>
<span class="line-num">374</span>         <span class="ruby-keyword">false</span>
<span class="line-num">375</span>       <span class="ruby-keyword">else</span>
<span class="line-num">376</span>         [<span class="ruby-value">:@begin</span>, <span class="ruby-value">:@end</span>, <span class="ruby-value">:@exclude_begin</span>, <span class="ruby-value">:@exclude_end</span>].<span class="ruby-identifier">all?</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-identifier">v</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-identifier">v</span>)}
<span class="line-num">377</span>       <span class="ruby-keyword">end</span>
<span class="line-num">378</span>     <span class="ruby-keyword">else</span>
<span class="line-num">379</span>       <span class="ruby-keyword">false</span>
<span class="line-num">380</span>     <span class="ruby-keyword">end</span>
<span class="line-num">381</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Range</span>
<span class="line-num">382</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">valid_ruby_range?</span>
<span class="line-num">383</span>       <span class="ruby-identifier">to_range</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>)
<span class="line-num">384</span>     <span class="ruby-keyword">else</span>
<span class="line-num">385</span>       <span class="ruby-keyword">false</span>
<span class="line-num">386</span>     <span class="ruby-keyword">end</span>
<span class="line-num">387</span>   <span class="ruby-keyword">else</span>
<span class="line-num">388</span>     <span class="ruby-keyword">false</span>
<span class="line-num">389</span>   <span class="ruby-keyword">end</span>
<span class="line-num">390</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="PGRange.html#method-i-3D-3D">==</a>
        </div>
        

        
      </div>

    
      <div id="method-i-exclude_begin-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">exclude_begin?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether the beginning element is excluded from the range.</p>
          
          

          
          <div class="method-source-code" id="exclude_begin-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">425</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">exclude_begin?</span>
<span class="line-num">426</span>   <span class="ruby-ivar">@exclude_begin</span>
<span class="line-num">427</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-exclude_end-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">exclude_end?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether the ending element is excluded from the range.</p>
          
          

          
          <div class="method-source-code" id="exclude_end-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">430</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">exclude_end?</span>
<span class="line-num">431</span>   <span class="ruby-ivar">@exclude_end</span>
<span class="line-num">432</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">hash</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Make sure equal ranges have the same hash.</p>
          
          

          
          <div class="method-source-code" id="hash-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">394</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">hash</span>
<span class="line-num">395</span>   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@empty</span>
<span class="line-num">396</span>     <span class="ruby-ivar">@db_type</span>.<span class="ruby-identifier">hash</span>
<span class="line-num">397</span>   <span class="ruby-keyword">else</span>
<span class="line-num">398</span>     [<span class="ruby-ivar">@begin</span>, <span class="ruby-ivar">@end</span>, <span class="ruby-ivar">@exclude_begin</span>, <span class="ruby-ivar">@exclude_end</span>, <span class="ruby-ivar">@db_type</span>].<span class="ruby-identifier">hash</span>
<span class="line-num">399</span>   <span class="ruby-keyword">end</span>
<span class="line-num">400</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-op" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">op</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Wrap the <a href="PGRange.html"><code>PGRange</code></a> instance in an <a href="RangeOp.html"><code>RangeOp</code></a>, allowing you to easily use the PostgreSQL range functions and operators with literal ranges.</p>
          
          

          
          <div class="method-source-code" id="op-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range_ops.rb</span>
<span class="line-num">141</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">op</span>
<span class="line-num">142</span>   <span class="ruby-constant">RangeOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)
<span class="line-num">143</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sql_literal_append" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sql_literal_append</span><span
            class="method-args">(ds, sql)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Append a literalize version of the receiver to the sql.</p>
          
          

          
          <div class="method-source-code" id="sql_literal_append-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">435</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sql_literal_append</span>(<span class="ruby-identifier">ds</span>, <span class="ruby-identifier">sql</span>)
<span class="line-num">436</span>   <span class="ruby-keyword">if</span> (<span class="ruby-identifier">s</span> = <span class="ruby-ivar">@db_type</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">empty?</span>
<span class="line-num">437</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;(&quot;</span>
<span class="line-num">438</span>     <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">begin</span>)
<span class="line-num">439</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;,&#39;</span>
<span class="line-num">440</span>     <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">end</span>)
<span class="line-num">441</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;,&#39;</span>
<span class="line-num">442</span>     <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{exclude_begin? ? &quot;(&quot; : &quot;[&quot;}#{exclude_end? ? &quot;)&quot; : &quot;]&quot;}&quot;</span>)
<span class="line-num">443</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;)&quot;</span>
<span class="line-num">444</span>   <span class="ruby-keyword">else</span>
<span class="line-num">445</span>     <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">unquoted_literal</span>(<span class="ruby-identifier">ds</span>))
<span class="line-num">446</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span>
<span class="line-num">447</span>       <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;::&#39;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_s</span>
<span class="line-num">448</span>     <span class="ruby-keyword">end</span>
<span class="line-num">449</span>   <span class="ruby-keyword">end</span>
<span class="line-num">450</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_range</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a ruby <a href="../../Range.html"><code>Range</code></a> object for this instance, if one can be created.</p>
          
          

          
          <div class="method-source-code" id="to_range-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">456</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_range</span>
<span class="line-num">457</span>   <span class="ruby-keyword">return</span> <span class="ruby-ivar">@range</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@range</span>
<span class="line-num">458</span>   <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;cannot create ruby range for an empty PostgreSQL range&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">empty?</span>
<span class="line-num">459</span>   <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;cannot create ruby range when PostgreSQL range excludes beginning element&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">exclude_begin?</span>
<span class="line-num">460</span>   <span class="ruby-comment"># :nocov:</span>
<span class="line-num">461</span>   <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;cannot create ruby range when PostgreSQL range has unbounded beginning&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">STARTLESS_RANGE_NOT_SUPPORTED</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">begin</span>
<span class="line-num">462</span>   <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;cannot create ruby range when PostgreSQL range has unbounded ending&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">ENDLESS_RANGE_NOT_SUPPORTED</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">end</span>
<span class="line-num">463</span>   <span class="ruby-comment"># :nocov:</span>
<span class="line-num">464</span>   <span class="ruby-ivar">@range</span> = <span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">begin</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">end</span>, <span class="ruby-identifier">exclude_end?</span>)
<span class="line-num">465</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unbounded_begin-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unbounded_begin?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether the beginning of the range is unbounded.</p>
          
          

          
          <div class="method-source-code" id="unbounded_begin-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">475</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unbounded_begin?</span>
<span class="line-num">476</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">begin</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">empty?</span>
<span class="line-num">477</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unbounded_end-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unbounded_end?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether the end of the range is unbounded.</p>
          
          

          
          <div class="method-source-code" id="unbounded_end-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">480</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unbounded_end?</span>
<span class="line-num">481</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">end</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">empty?</span>
<span class="line-num">482</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unquoted_literal" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unquoted_literal</span><span
            class="method-args">(ds)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a string containing the unescaped version of the range. Separated out for use by the bound argument code.</p>
          
          

          
          <div class="method-source-code" id="unquoted_literal-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">486</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unquoted_literal</span>(<span class="ruby-identifier">ds</span>)
<span class="line-num">487</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">empty?</span>
<span class="line-num">488</span>     <span class="ruby-string">&#39;empty&#39;</span>
<span class="line-num">489</span>   <span class="ruby-keyword">else</span>
<span class="line-num">490</span>     <span class="ruby-node">&quot;#{exclude_begin? ? &quot;(&quot; : &quot;[&quot;}#{escape_value(self.begin, ds)},#{escape_value(self.end, ds)}#{exclude_end? ? &quot;)&quot; : &quot;]&quot;}&quot;</span>
<span class="line-num">491</span>   <span class="ruby-keyword">end</span>
<span class="line-num">492</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-valid_ruby_range-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">valid_ruby_range?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether or not this <a href="PGRange.html"><code>PGRange</code></a> is a valid ruby range.  In order to be a valid ruby range, it must have a beginning and an ending (no unbounded ranges), and it cannot exclude the beginning element.</p>
          
          

          
          <div class="method-source-code" id="valid_ruby_range-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_range.rb</span>
<span class="line-num">470</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">valid_ruby_range?</span>
<span class="line-num">471</span>   <span class="ruby-operator">!</span>(<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">exclude_begin?</span> <span class="ruby-operator">||</span> (<span class="ruby-constant">STARTLESS_RANGE_NOT_SUPPORTED</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">begin</span>) <span class="ruby-operator">||</span> (<span class="ruby-constant">ENDLESS_RANGE_NOT_SUPPORTED</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">end</span>))
<span class="line-num">472</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

