<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Sequel::Postgres::PGRow::Parser - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
  var index_rel_prefix = "../../../";
</script>

<script src="../../../js/navigation.js" defer></script>
<script src="../../../js/search.js" defer></script>
<script src="../../../js/search_index.js" defer></script>
<script src="../../../js/searcher.js" defer></script>
<script src="../../../js/darkfish.js" defer></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../../../Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-call">#call</a>
    
    <li ><a href="#method-i-typecast">#typecast</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Sequel::Postgres::PGRow::Parser">
  <h1 id="class-Sequel::Postgres::PGRow::Parser" class="class">
    class Sequel::Postgres::PGRow::Parser
  </h1>

  <section class="description">
    
<p>The <a href="Parser.html"><code>Parser</code></a> is responsible for taking the input string from PostgreSQL, and returning an appropriate ruby object that the type represents, such as an <a href="ArrayRow.html"><code>ArrayRow</code></a> or <a href="HashRow.html"><code>HashRow</code></a>.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-column_converters" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">column_converters</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Converters for each member in the composite type.  If not present, no conversion will be done, so values will remain strings.  If present, should be an array of callable objects.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-column_oids" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">column_oids</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The OIDs for each member in the composite type.  Not currently used, but made available for user code.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-columns" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">columns</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The columns for the parser, if any.  If the parser has no columns, it will treat the input as an array.  If it has columns, it will treat the input as a hash. If present, should be an array of strings.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-converter" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">converter</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>A converter for the object as a whole.  Used to wrap the returned array/hash in another object, such as an <a href="ArrayRow.html"><code>ArrayRow</code></a> or <a href="HashRow.html"><code>HashRow</code></a>.  If present, should be callable.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-oid" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">oid</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The oid for the composite type itself.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-typecaster" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">typecaster</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>A callable object used for typecasting the object. This is similar to the converter, but it is called by the typecasting code, which has different assumptions than the converter.  For instance, the converter should be called with all of the member values already typecast, but the typecaster may not be.</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(h=OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets each of the parser&#39;s attributes, using options with the same name (e.g. :columns sets the columns attribute).</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_row.rb</span>
<span class="line-num">286</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">h</span>=<span class="ruby-constant">OPTS</span>)
<span class="line-num">287</span>   <span class="ruby-ivar">@columns</span> = <span class="ruby-identifier">h</span>[<span class="ruby-value">:columns</span>]
<span class="line-num">288</span>   <span class="ruby-ivar">@column_converters</span> = <span class="ruby-identifier">h</span>[<span class="ruby-value">:column_converters</span>]
<span class="line-num">289</span>   <span class="ruby-ivar">@column_oids</span> = <span class="ruby-identifier">h</span>[<span class="ruby-value">:column_oids</span>]
<span class="line-num">290</span>   <span class="ruby-ivar">@converter</span> = <span class="ruby-identifier">h</span>[<span class="ruby-value">:converter</span>]
<span class="line-num">291</span>   <span class="ruby-ivar">@typecaster</span> = <span class="ruby-identifier">h</span>[<span class="ruby-value">:typecaster</span>]
<span class="line-num">292</span>   <span class="ruby-ivar">@oid</span> = <span class="ruby-identifier">h</span>[<span class="ruby-value">:oid</span>]
<span class="line-num">293</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-call" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">call</span><span
            class="method-args">(s)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convert the PostgreSQL composite type input format into an appropriate ruby object.</p>
          
          

          
          <div class="method-source-code" id="call-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_row.rb</span>
<span class="line-num">297</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">call</span>(<span class="ruby-identifier">s</span>)
<span class="line-num">298</span>   <span class="ruby-identifier">convert</span>(<span class="ruby-identifier">convert_format</span>(<span class="ruby-identifier">convert_columns</span>(<span class="ruby-constant">Splitter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">s</span>).<span class="ruby-identifier">parse</span>)))
<span class="line-num">299</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-typecast" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">typecast</span><span
            class="method-args">(obj)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Typecast the given object to the appropriate type using the typecaster.  Note that this does not conversion for the members of the composite type, since those conversion expect strings and strings may not be provided.</p>
          
          

          
          <div class="method-source-code" id="typecast-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/extensions/pg_row.rb</span>
<span class="line-num">305</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">typecast</span>(<span class="ruby-identifier">obj</span>)
<span class="line-num">306</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">obj</span> 
<span class="line-num">307</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
<span class="line-num">308</span>     <span class="ruby-identifier">_typecast</span>(<span class="ruby-identifier">convert_format</span>(<span class="ruby-identifier">obj</span>))
<span class="line-num">309</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>
<span class="line-num">310</span>     <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@columns</span>
<span class="line-num">311</span>       <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;PGRow::Parser without columns cannot typecast from a hash&#39;</span>
<span class="line-num">312</span>     <span class="ruby-keyword">end</span>
<span class="line-num">313</span>     <span class="ruby-identifier">_typecast</span>(<span class="ruby-identifier">obj</span>)
<span class="line-num">314</span>   <span class="ruby-keyword">else</span>
<span class="line-num">315</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;PGRow::Parser can only typecast arrays and hashes&#39;</span>
<span class="line-num">316</span>   <span class="ruby-keyword">end</span>
<span class="line-num">317</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

