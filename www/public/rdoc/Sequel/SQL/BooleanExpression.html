<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Sequel::SQL::BooleanExpression - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="ComplexExpression.html">Sequel::SQL::ComplexExpression</a>
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="BooleanMethods.html">Sequel::SQL::BooleanMethods</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-from_value_pairs">::from_value_pairs</a>
    
    <li ><a href="#method-c-invert">::invert</a>
    
    <li ><a href="#method-i-26">#&amp;</a>
    
    <li ><a href="#method-i-sql_boolean">#sql_boolean</a>
    
    <li ><a href="#method-i-7C">#|</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Sequel::SQL::BooleanExpression">
  <h1 id="class-Sequel::SQL::BooleanExpression" class="class">
    class Sequel::SQL::BooleanExpression
  </h1>

  <section class="description">
    
<p>Subclass of <code>ComplexExpression</code> where the expression results in a boolean value in <a href="../SQL.html"><code>SQL</code></a>.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-from_value_pairs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_value_pairs</span><span
            class="method-args">(pairs, op=:AND, negate=false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Take pairs of values (e.g. a hash or array of two element arrays) and converts it to a <code>BooleanExpression</code>.  The operator and args used depends on the case of the right (2nd) argument:</p>
<dl class="rdoc-list note-list"><dt>0..10 
<dd>
<p>left &gt;= 0 AND left &lt;= 10</p>
</dd></dl>
<dl class="rdoc-list label-list"><dt>1,2
<dd><dl class="rdoc-list note-list"><dt>
<dd>
<p>left IN (1,2)</p>
</dd></dl>
</dd></dl>
<dl class="rdoc-list note-list"><dt>nil 
<dd>
<p>left IS NULL</p>
</dd><dt>true 
<dd>
<p>left IS TRUE </p>
</dd><dt>false 
<dd>
<p>left IS FALSE </p>
</dd><dt>/as/ 
<dd>
<p>left ~ &#39;as&#39;</p>
</dd><dt>:blah 
<dd>
<p>left = blah</p>
</dd><dt>&#39;blah&#39; 
<dd>
<p>left = &#39;blah&#39;</p>
</dd></dl>

<p>If multiple arguments are given, they are joined with the op given (AND by default, OR possible).  If negate is set to true, all subexpressions are inverted before used.  Therefore, the following expressions are equivalent:</p>

<pre class="ruby"><span class="ruby-operator">~</span><span class="ruby-identifier">from_value_pairs</span>(<span class="ruby-identifier">hash</span>)
<span class="ruby-identifier">from_value_pairs</span>(<span class="ruby-identifier">hash</span>, <span class="ruby-value">:OR</span>, <span class="ruby-keyword">true</span>)
</pre>
          
          

          
          <div class="method-source-code" id="from_value_pairs-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">1081</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">from_value_pairs</span>(<span class="ruby-identifier">pairs</span>, <span class="ruby-identifier">op</span>=<span class="ruby-value">:AND</span>, <span class="ruby-identifier">negate</span>=<span class="ruby-keyword">false</span>)
<span class="line-num">1082</span>   <span class="ruby-identifier">pairs</span> = <span class="ruby-identifier">pairs</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">l</span>,<span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">from_value_pair</span>(<span class="ruby-identifier">l</span>, <span class="ruby-identifier">r</span>)}
<span class="line-num">1083</span>   <span class="ruby-identifier">pairs</span>.<span class="ruby-identifier">map!</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ce</span><span class="ruby-operator">|</span> <span class="ruby-identifier">invert</span>(<span class="ruby-identifier">ce</span>)} <span class="ruby-keyword">if</span> <span class="ruby-identifier">negate</span>
<span class="line-num">1084</span>   <span class="ruby-identifier">pairs</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">pairs</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">new</span>(<span class="ruby-identifier">op</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">pairs</span>)
<span class="line-num">1085</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-invert" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">invert</span><span
            class="method-args">(ce)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Invert the expression, if possible.  If the expression cannot be inverted, raise an error.  An inverted expression should match everything that the uninverted expression did not match, and vice-versa, except for possible issues with <a href="../SQL.html"><code>SQL</code></a> NULL (i.e. 1 == NULL is NULL and 1 != NULL is also NULL).</p>

<pre class="ruby"><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">invert</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># NOT &quot;a&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="invert-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">1140</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">invert</span>(<span class="ruby-identifier">ce</span>)
<span class="line-num">1141</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">ce</span>
<span class="line-num">1142</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">BooleanExpression</span>
<span class="line-num">1143</span>     <span class="ruby-keyword">case</span> <span class="ruby-identifier">op</span> = <span class="ruby-identifier">ce</span>.<span class="ruby-identifier">op</span>
<span class="line-num">1144</span>     <span class="ruby-keyword">when</span> <span class="ruby-value">:AND</span>, <span class="ruby-value">:OR</span>
<span class="line-num">1145</span>       <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">OPERTATOR_INVERSIONS</span>[<span class="ruby-identifier">op</span>], <span class="ruby-operator">*</span><span class="ruby-identifier">ce</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">invert</span>(<span class="ruby-identifier">a</span>)})
<span class="line-num">1146</span>     <span class="ruby-keyword">when</span> <span class="ruby-value">:IN</span>, <span class="ruby-value">:&quot;NOT IN&quot;</span>
<span class="line-num">1147</span>       <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">OPERTATOR_INVERSIONS</span>[<span class="ruby-identifier">op</span>], <span class="ruby-operator">*</span><span class="ruby-identifier">ce</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">dup</span>)
<span class="line-num">1148</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1149</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">ce</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
<span class="line-num">1150</span>         <span class="ruby-keyword">case</span> <span class="ruby-identifier">ce</span>.<span class="ruby-identifier">args</span>[<span class="ruby-value">1</span>]
<span class="line-num">1151</span>         <span class="ruby-keyword">when</span> <span class="ruby-constant">Function</span>, <span class="ruby-constant">LiteralString</span>, <span class="ruby-constant">PlaceholderLiteralString</span>
<span class="line-num">1152</span>           <span class="ruby-comment"># Special behavior to not push down inversion in this case because doing so</span>
<span class="line-num">1153</span>           <span class="ruby-comment"># can result in incorrect behavior for ANY/SOME/ALL operators.</span>
<span class="line-num">1154</span>           <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:NOT</span>, <span class="ruby-identifier">ce</span>)
<span class="line-num">1155</span>         <span class="ruby-keyword">else</span>
<span class="line-num">1156</span>           <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">OPERTATOR_INVERSIONS</span>[<span class="ruby-identifier">op</span>], <span class="ruby-operator">*</span><span class="ruby-identifier">ce</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">dup</span>)
<span class="line-num">1157</span>         <span class="ruby-keyword">end</span>
<span class="line-num">1158</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1159</span>         <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">OPERTATOR_INVERSIONS</span>[<span class="ruby-identifier">op</span>], <span class="ruby-operator">*</span><span class="ruby-identifier">ce</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">dup</span>)
<span class="line-num">1160</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1161</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1162</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">StringExpression</span>, <span class="ruby-constant">NumericExpression</span>
<span class="line-num">1163</span>     <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;cannot invert #{ce.inspect}&quot;</span>)
<span class="line-num">1164</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Constant</span>
<span class="line-num">1165</span>     <span class="ruby-constant">CONSTANT_INVERSIONS</span>[<span class="ruby-identifier">ce</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;cannot invert #{ce.inspect}&quot;</span>)
<span class="line-num">1166</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1167</span>     <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:NOT</span>, <span class="ruby-identifier">ce</span>)
<span class="line-num">1168</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1169</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-26" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&amp;</span><span
            class="method-args">(ce)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Always use an AND operator for &amp; on BooleanExpressions</p>
          
          

          
          <div class="method-source-code" id="26-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">1172</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">&amp;</span>(<span class="ruby-identifier">ce</span>)
<span class="line-num">1173</span>   <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:AND</span>, <span class="ruby-keyword">self</span>, <span class="ruby-identifier">ce</span>)
<span class="line-num">1174</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sql_boolean" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sql_boolean</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return self instead of creating a new object to save on memory.</p>
          
          

          
          <div class="method-source-code" id="sql_boolean-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">1182</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sql_boolean</span>
<span class="line-num">1183</span>   <span class="ruby-keyword">self</span>
<span class="line-num">1184</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-7C" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">|</span><span
            class="method-args">(ce)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Always use an OR operator for | on BooleanExpressions</p>
          
          

          
          <div class="method-source-code" id="7C-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">1177</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">|</span>(<span class="ruby-identifier">ce</span>)
<span class="line-num">1178</span>   <span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:OR</span>, <span class="ruby-keyword">self</span>, <span class="ruby-identifier">ce</span>)
<span class="line-num">1179</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

