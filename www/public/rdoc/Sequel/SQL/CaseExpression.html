<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Sequel::SQL::CaseExpression - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="GenericExpression.html">Sequel::SQL::GenericExpression</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-expression-3F">#expression?</a>
    
    <li ><a href="#method-i-with_merged_expression">#with_merged_expression</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Sequel::SQL::CaseExpression">
  <h1 id="class-Sequel::SQL::CaseExpression" class="class">
    class Sequel::SQL::CaseExpression
  </h1>

  <section class="description">
    
<p>Represents an <a href="../SQL.html"><code>SQL</code></a> CASE expression, used for conditional branching in <a href="../SQL.html"><code>SQL</code></a>.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-conditions" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">conditions</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>An array of all two pairs with the first element specifying the condition and the second element specifying the result if the condition matches.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-default" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">default</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The default value if no conditions match.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-expression" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">expression</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>An optional expression to test the conditions against</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(conditions, default, expression=(no_expression=true; nil))</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create an object with the given conditions and default value, and optional expression.  An expression can be provided to test each condition against, instead of having all conditions represent their own boolean expression.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">1204</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">default</span>, <span class="ruby-identifier">expression</span>=(<span class="ruby-identifier">no_expression</span>=<span class="ruby-keyword">true</span>; <span class="ruby-keyword">nil</span>))
<span class="line-num">1205</span>   <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;CaseExpression conditions must be a hash or array of all two pairs&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">condition_specifier?</span>(<span class="ruby-identifier">conditions</span>)
<span class="line-num">1206</span>   <span class="ruby-ivar">@conditions</span> = <span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>
<span class="line-num">1207</span>   <span class="ruby-ivar">@default</span> = <span class="ruby-identifier">default</span>
<span class="line-num">1208</span>   <span class="ruby-ivar">@expression</span> = <span class="ruby-identifier">expression</span>
<span class="line-num">1209</span>   <span class="ruby-ivar">@no_expression</span> = <span class="ruby-identifier">no_expression</span>
<span class="line-num">1210</span>   <span class="ruby-identifier">freeze</span>
<span class="line-num">1211</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-expression-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">expression?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether to use an expression for this CASE expression.</p>
          
          

          
          <div class="method-source-code" id="expression-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">1214</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">expression?</span>
<span class="line-num">1215</span>   <span class="ruby-operator">!</span><span class="ruby-ivar">@no_expression</span>
<span class="line-num">1216</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-with_merged_expression" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">with_merged_expression</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Merge the CASE expression into the conditions, useful for databases that don&#39;t support CASE expressions.</p>
          
          

          
          <div class="method-source-code" id="with_merged_expression-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">1220</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">with_merged_expression</span>
<span class="line-num">1221</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">expression?</span>
<span class="line-num">1222</span>     <span class="ruby-identifier">e</span> = <span class="ruby-identifier">expression</span>
<span class="line-num">1223</span>     <span class="ruby-constant">CaseExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span>, <span class="ruby-identifier">r</span><span class="ruby-operator">|</span> [<span class="ruby-operator">::</span><span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:&#39;=&#39;</span>, <span class="ruby-identifier">e</span>, <span class="ruby-identifier">c</span>), <span class="ruby-identifier">r</span>]}, <span class="ruby-identifier">default</span>)
<span class="line-num">1224</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1225</span>     <span class="ruby-keyword">self</span>
<span class="line-num">1226</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1227</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

