<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Sequel::SQL::Builders - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-as">#as</a>
    
    <li ><a href="#method-i-asc">#asc</a>
    
    <li ><a href="#method-i-blob">#blob</a>
    
    <li ><a href="#method-i-case">#case</a>
    
    <li ><a href="#method-i-cast">#cast</a>
    
    <li ><a href="#method-i-cast_numeric">#cast_numeric</a>
    
    <li ><a href="#method-i-cast_string">#cast_string</a>
    
    <li ><a href="#method-i-char_length">#char_length</a>
    
    <li ><a href="#method-i-deep_qualify">#deep_qualify</a>
    
    <li ><a href="#method-i-delay">#delay</a>
    
    <li ><a href="#method-i-desc">#desc</a>
    
    <li ><a href="#method-i-expr">#expr</a>
    
    <li ><a href="#method-i-extract">#extract</a>
    
    <li ><a href="#method-i-function">#function</a>
    
    <li ><a href="#method-i-identifier">#identifier</a>
    
    <li ><a href="#method-i-ilike">#ilike</a>
    
    <li ><a href="#method-i-join">#join</a>
    
    <li ><a href="#method-i-like">#like</a>
    
    <li ><a href="#method-i-lit">#lit</a>
    
    <li ><a href="#method-i-negate">#negate</a>
    
    <li ><a href="#method-i-or">#or</a>
    
    <li ><a href="#method-i-qualify">#qualify</a>
    
    <li ><a href="#method-i-subscript">#subscript</a>
    
    <li ><a href="#method-i-trim">#trim</a>
    
    <li ><a href="#method-i-value_list">#value_list</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-Sequel::SQL::Builders">
  <h1 id="module-Sequel::SQL::Builders" class="module">
    module Sequel::SQL::Builders
  </h1>

  <section class="description">
    
<p>These methods make it easier to create <a href="../../Sequel.html"><code>Sequel</code></a> expressions without using the core extensions.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-as" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">as</span><span
            class="method-args">(exp, aliaz, columns=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create an <a href="AliasedExpression.html"><code>SQL::AliasedExpression</code></a> for the given expression and alias.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">as</span>(<span class="ruby-value">:column</span>, <span class="ruby-value">:alias</span>) <span class="ruby-comment"># &quot;column&quot; AS &quot;alias&quot;</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">as</span>(<span class="ruby-value">:column</span>, <span class="ruby-value">:alias</span>, [<span class="ruby-value">:col_alias1</span>, <span class="ruby-value">:col_alias2</span>]) <span class="ruby-comment"># &quot;column&quot; AS &quot;alias&quot;(&quot;col_alias1&quot;, &quot;col_alias2&quot;)</span>
</pre>
          
          

          
          <div class="method-source-code" id="as-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">329</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">as</span>(<span class="ruby-identifier">exp</span>, <span class="ruby-identifier">aliaz</span>, <span class="ruby-identifier">columns</span>=<span class="ruby-keyword">nil</span>)
<span class="line-num">330</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">exp</span>, <span class="ruby-identifier">aliaz</span>, <span class="ruby-identifier">columns</span>)
<span class="line-num">331</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-asc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">asc</span><span
            class="method-args">(arg, opts=OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Order the given argument ascending. Options:</p>
<dl class="rdoc-list note-list"><dt>:nulls 
<dd>
<p>Set to :first to use NULLS FIRST (so NULL values are ordered before other values), or :last to use NULLS LAST (so NULL values are ordered after other values).</p>
</dd></dl>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">asc</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># a ASC</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">asc</span>(<span class="ruby-value">:b</span>, <span class="ruby-value">nulls:</span> <span class="ruby-value">:last</span>) <span class="ruby-comment"># b ASC NULLS LAST</span>
</pre>
          
          

          
          <div class="method-source-code" id="asc-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">342</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">asc</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)
<span class="line-num">343</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderedExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-keyword">false</span>, <span class="ruby-identifier">opts</span>)
<span class="line-num">344</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-blob" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">blob</span><span
            class="method-args">(s)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return an <code>SQL::Blob</code> that holds the same data as this string. Blobs provide proper escaping of binary data.  If given a blob, returns it directly.</p>
          
          

          
          <div class="method-source-code" id="blob-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">349</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">blob</span>(<span class="ruby-identifier">s</span>)
<span class="line-num">350</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Blob</span>)
<span class="line-num">351</span>     <span class="ruby-identifier">s</span>
<span class="line-num">352</span>   <span class="ruby-keyword">else</span>
<span class="line-num">353</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Blob</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">s</span>)
<span class="line-num">354</span>   <span class="ruby-keyword">end</span>
<span class="line-num">355</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-case" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">case</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return an <code>SQL::CaseExpression</code> created with the given arguments. The first argument are the <code>WHEN</code>/<code>THEN</code> conditions, specified as an array or a hash.  The second argument is the <code>ELSE</code> default value.  The third optional argument is the <code>CASE</code> expression.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">case</span>({<span class="ruby-value">a:</span> <span class="ruby-value">1</span>}, <span class="ruby-value">0</span>) <span class="ruby-comment"># SQL: CASE WHEN a THEN 1 ELSE 0 END</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">case</span>({<span class="ruby-value">a:</span> <span class="ruby-value">1</span>}, <span class="ruby-value">0</span>, <span class="ruby-value">:b</span>) <span class="ruby-comment"># SQL: CASE b WHEN a THEN 1 ELSE 0 END</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">case</span>({{<span class="ruby-value">a:</span> [<span class="ruby-value">2</span>,<span class="ruby-value">3</span>]} <span class="ruby-operator">=&gt;</span> <span class="ruby-value">1</span>}, <span class="ruby-value">0</span>) <span class="ruby-comment"># SQL: CASE WHEN a IN (2, 3) THEN 1 ELSE 0 END</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">case</span>([[{<span class="ruby-value">a:</span> [<span class="ruby-value">2</span>,<span class="ruby-value">3</span>]}, <span class="ruby-value">1</span>]], <span class="ruby-value">0</span>) <span class="ruby-comment"># SQL: CASE WHEN a IN (2, 3) THEN 1 ELSE 0 END</span>
</pre>
          
          

          
          <div class="method-source-code" id="case-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">367</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">case</span>(<span class="ruby-operator">*</span><span class="ruby-identifier ruby-title">args</span>)
<span class="line-num">368</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">CaseExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">369</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cast" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cast</span><span
            class="method-args">(arg, sql_type)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Cast.html"><code>Cast</code></a> the reciever to the given <a href="../SQL.html"><code>SQL</code></a> type.  You can specify a ruby class as a type, and it is handled similarly to using a database independent type in the schema methods.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">cast</span>(<span class="ruby-value">:a</span>, <span class="ruby-value">:integer</span>) <span class="ruby-comment"># CAST(a AS integer)</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">cast</span>(<span class="ruby-value">:a</span>, <span class="ruby-constant">String</span>) <span class="ruby-comment"># CAST(a AS varchar(255))</span>
</pre>
          
          

          
          <div class="method-source-code" id="cast-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">376</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cast</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">sql_type</span>)
<span class="line-num">377</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Cast</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">sql_type</span>)
<span class="line-num">378</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cast_numeric" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cast_numeric</span><span
            class="method-args">(arg, sql_type = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Cast.html"><code>Cast</code></a> the reciever to the given <a href="../SQL.html"><code>SQL</code></a> type (or the database&#39;s default Integer type if none given), and return the result as a <code>NumericExpression</code>, so you can use the bitwise operators on the result. </p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">cast_numeric</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># CAST(a AS integer)</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">cast_numeric</span>(<span class="ruby-value">:a</span>, <span class="ruby-constant">Float</span>) <span class="ruby-comment"># CAST(a AS double precision)</span>
</pre>
          
          

          
          <div class="method-source-code" id="cast_numeric-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">386</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cast_numeric</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">sql_type</span> = <span class="ruby-keyword">nil</span>)
<span class="line-num">387</span>   <span class="ruby-identifier">cast</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">sql_type</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Integer</span>).<span class="ruby-identifier">sql_number</span>
<span class="line-num">388</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cast_string" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cast_string</span><span
            class="method-args">(arg, sql_type = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Cast.html"><code>Cast</code></a> the reciever to the given <a href="../SQL.html"><code>SQL</code></a> type (or the database&#39;s default String type if none given), and return the result as a <code>StringExpression</code>, so you can use + directly on the result for <a href="../SQL.html"><code>SQL</code></a> string concatenation.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">cast_string</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># CAST(a AS varchar(255))</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">cast_string</span>(<span class="ruby-value">:a</span>, <span class="ruby-value">:text</span>) <span class="ruby-comment"># CAST(a AS text)</span>
</pre>
          
          

          
          <div class="method-source-code" id="cast_string-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">396</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cast_string</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">sql_type</span> = <span class="ruby-keyword">nil</span>)
<span class="line-num">397</span>   <span class="ruby-identifier">cast</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">sql_type</span> <span class="ruby-operator">||</span> <span class="ruby-constant">String</span>).<span class="ruby-identifier">sql_string</span>
<span class="line-num">398</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-char_length" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">char_length</span><span
            class="method-args">(arg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return an emulated function call for getting the number of characters in the argument:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">char_length</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># char_length(a) -- Most databases</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">char_length</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># length(a) -- SQLite</span>
</pre>
          
          

          
          <div class="method-source-code" id="char_length-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">405</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">char_length</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">406</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Function</span>.<span class="ruby-identifier">new!</span>(<span class="ruby-value">:char_length</span>, [<span class="ruby-identifier">arg</span>], <span class="ruby-value">:emulate</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)
<span class="line-num">407</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-deep_qualify" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">deep_qualify</span><span
            class="method-args">(qualifier, expr)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Do a deep qualification of the argument using the qualifier.  This recurses into nested structures.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">deep_qualify</span>(<span class="ruby-value">:table</span>, <span class="ruby-value">:column</span>) <span class="ruby-comment"># &quot;table&quot;.&quot;column&quot;</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">deep_qualify</span>(<span class="ruby-value">:table</span>, <span class="ruby-constant">Sequel</span>[<span class="ruby-value">:column</span>] <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-comment"># &quot;table&quot;.&quot;column&quot; + 1</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">deep_qualify</span>(<span class="ruby-value">:table</span>, <span class="ruby-constant">Sequel</span>[<span class="ruby-value">:a</span>].<span class="ruby-identifier">like</span>(<span class="ruby-string">&#39;b&#39;</span>)) <span class="ruby-comment"># &quot;table&quot;.&quot;a&quot; LIKE &#39;b&#39; ESCAPE &#39;\&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="deep_qualify-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">415</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">deep_qualify</span>(<span class="ruby-identifier">qualifier</span>, <span class="ruby-identifier">expr</span>)
<span class="line-num">416</span>   <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Qualifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">qualifier</span>).<span class="ruby-identifier">transform</span>(<span class="ruby-identifier">expr</span>)
<span class="line-num">417</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delay" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delay</span><span
            class="method-args">(&amp;block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a delayed evaluation that uses the passed block. This is used to delay evaluations of the code to runtime.  For example, with the following code:</p>

<pre class="ruby"><span class="ruby-identifier">ds</span> = <span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">where</span>{<span class="ruby-identifier">column</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>}
</pre>

<p>The filter is fixed to the time that where was called. Unless you are only using the dataset once immediately after creating it, that&#39;s probably not desired.  If you just want to set it to the time when the query is sent to the database, you can wrap it in Sequel.delay:</p>

<pre class="ruby"><span class="ruby-identifier">ds</span> = <span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">where</span>{<span class="ruby-identifier">column</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">delay</span>{<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>}}
</pre>

<p>Note that for dates and timestamps, you are probably better off using Sequel::CURRENT_DATE and Sequel::CURRENT_TIMESTAMP instead of this generic delayed evaluation facility.</p>
          
          

          
          <div class="method-source-code" id="delay-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">435</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delay</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">436</span>   <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;Sequel.delay requires a block&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block</span>
<span class="line-num">437</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">DelayedEvaluation</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">block</span>)
<span class="line-num">438</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-desc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">desc</span><span
            class="method-args">(arg, opts=OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Order the given argument descending. Options:</p>
<dl class="rdoc-list note-list"><dt>:nulls 
<dd>
<p>Set to :first to use NULLS FIRST (so NULL values are ordered before other values), or :last to use NULLS LAST (so NULL values are ordered after other values).</p>
</dd></dl>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">desc</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># b DESC</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">desc</span>(<span class="ruby-value">:b</span>, <span class="ruby-value">nulls:</span> <span class="ruby-value">:first</span>) <span class="ruby-comment"># b DESC NULLS FIRST</span>
</pre>
          
          

          
          <div class="method-source-code" id="desc-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">449</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">desc</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)
<span class="line-num">450</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderedExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-keyword">true</span>, <span class="ruby-identifier">opts</span>)
<span class="line-num">451</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-expr" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">expr</span><span
            class="method-args">(arg=(no_arg=true)) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Wraps the given object in an appropriate <a href="../../Sequel.html"><code>Sequel</code></a> wrapper. If the given object is already a <a href="../../Sequel.html"><code>Sequel</code></a> object, return it directly. For condition specifiers (hashes and arrays of two pairs), true, and false, return a boolean expressions.  For numeric objects, return a numeric expression.  For strings, return a string expression.  For procs or when the method is passed a block, evaluate it as a virtual row and wrap it appropriately.  In all other cases, use a generic wrapper.</p>

<p>This method allows you to construct <a href="../SQL.html"><code>SQL</code></a> expressions that are difficult to construct via other methods.  For example:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">expr</span>(<span class="ruby-value">1</span>) <span class="ruby-operator">-</span> <span class="ruby-value">:a</span> <span class="ruby-comment"># SQL: (1 - a)</span>
</pre>

<p>On the <a href="../../Sequel.html"><code>Sequel</code></a> module, this is aliased as [], for easier use:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">-</span> <span class="ruby-value">:a</span> <span class="ruby-comment"># SQL: (1 - a)</span>
</pre>
          
          

          
          <div class="method-source-code" id="expr-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">469</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">expr</span>(<span class="ruby-identifier">arg</span>=(<span class="ruby-identifier">no_arg</span>=<span class="ruby-keyword">true</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">470</span>   <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-keyword">yield</span>)
<span class="line-num">471</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">no_arg</span>
<span class="line-num">472</span>       <span class="ruby-keyword">return</span> <span class="ruby-identifier">expr</span>(<span class="ruby-identifier">block</span>)
<span class="line-num">473</span>     <span class="ruby-keyword">else</span>
<span class="line-num">474</span>       <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;cannot provide both an argument and a block to Sequel.expr&#39;</span>
<span class="line-num">475</span>     <span class="ruby-keyword">end</span>
<span class="line-num">476</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">no_arg</span>
<span class="line-num">477</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;must provide either an argument or a block to Sequel.expr&#39;</span>
<span class="line-num">478</span>   <span class="ruby-keyword">end</span>
<span class="line-num">479</span> 
<span class="line-num">480</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">arg</span>
<span class="line-num">481</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>
<span class="line-num">482</span>     <span class="ruby-identifier">t</span>, <span class="ruby-identifier">c</span>, <span class="ruby-identifier">a</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">split_symbol</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">483</span> 
<span class="line-num">484</span>     <span class="ruby-identifier">arg</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">t</span>
<span class="line-num">485</span>       <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">c</span>)
<span class="line-num">486</span>     <span class="ruby-keyword">else</span>
<span class="line-num">487</span>       <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">c</span>)
<span class="line-num">488</span>     <span class="ruby-keyword">end</span>
<span class="line-num">489</span> 
<span class="line-num">490</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">a</span>
<span class="line-num">491</span>       <span class="ruby-identifier">arg</span> = <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">a</span>)
<span class="line-num">492</span>     <span class="ruby-keyword">end</span>
<span class="line-num">493</span> 
<span class="line-num">494</span>     <span class="ruby-identifier">arg</span>
<span class="line-num">495</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Expression</span>, <span class="ruby-constant">LiteralString</span>, <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Blob</span>
<span class="line-num">496</span>     <span class="ruby-identifier">arg</span>
<span class="line-num">497</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>
<span class="line-num">498</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">from_value_pairs</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-value">:AND</span>)
<span class="line-num">499</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
<span class="line-num">500</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">condition_specifier?</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">501</span>       <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">from_value_pairs</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-value">:AND</span>)
<span class="line-num">502</span>     <span class="ruby-keyword">else</span>
<span class="line-num">503</span>       <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Wrapper</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">504</span>     <span class="ruby-keyword">end</span>
<span class="line-num">505</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Numeric</span>
<span class="line-num">506</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">NumericExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:NOOP</span>, <span class="ruby-identifier">arg</span>)
<span class="line-num">507</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>
<span class="line-num">508</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">StringExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:NOOP</span>, <span class="ruby-identifier">arg</span>)
<span class="line-num">509</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">TrueClass</span>, <span class="ruby-constant">FalseClass</span>
<span class="line-num">510</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:NOOP</span>, <span class="ruby-identifier">arg</span>)
<span class="line-num">511</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Proc</span>
<span class="line-num">512</span>     <span class="ruby-identifier">expr</span>(<span class="ruby-identifier">virtual_row</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">arg</span>))
<span class="line-num">513</span>   <span class="ruby-keyword">else</span>
<span class="line-num">514</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Wrapper</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">515</span>   <span class="ruby-keyword">end</span>
<span class="line-num">516</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-extract" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extract</span><span
            class="method-args">(datetime_part, exp)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Extract a datetime_part (e.g. year, month) from the given expression:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">extract</span>(<span class="ruby-value">:year</span>, <span class="ruby-value">:date</span>) <span class="ruby-comment"># extract(year FROM &quot;date&quot;)</span>
</pre>
          
          

          
          <div class="method-source-code" id="extract-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">522</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">extract</span>(<span class="ruby-identifier">datetime_part</span>, <span class="ruby-identifier">exp</span>)
<span class="line-num">523</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">NumericExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:extract</span>, <span class="ruby-identifier">datetime_part</span>, <span class="ruby-identifier">exp</span>)
<span class="line-num">524</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-function" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">function</span><span
            class="method-args">(name, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a <code>Sequel::SQL::Function</code> with the function name and the given arguments.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">function</span>(<span class="ruby-value">:now</span>) <span class="ruby-comment"># SQL: now()</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">function</span>(<span class="ruby-value">:substr</span>, <span class="ruby-value">:a</span>, <span class="ruby-value">1</span>) <span class="ruby-comment"># SQL: substr(a, 1)</span>
</pre>
          
          

          
          <div class="method-source-code" id="function-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">531</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">function</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">532</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Function</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">533</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-identifier" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">identifier</span><span
            class="method-args">(name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the argument wrapped as an <code>SQL::Identifier</code>.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">identifier</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># &quot;a&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="identifier-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">538</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">identifier</span>(<span class="ruby-identifier">name</span>)
<span class="line-num">539</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>)
<span class="line-num">540</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ilike" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ilike</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a <code>BooleanExpression</code> case insensitive (if the database supports it) pattern match of the receiver with the given patterns.  See <code>SQL::StringExpression.like</code>.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">ilike</span>(<span class="ruby-value">:a</span>, <span class="ruby-string">&#39;A%&#39;</span>) <span class="ruby-comment"># &quot;a&quot; ILIKE &#39;A%&#39; ESCAPE &#39;\&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="ilike-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">575</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ilike</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">576</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">StringExpression</span>.<span class="ruby-identifier">like</span>(<span class="ruby-operator">*</span>(<span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:case_insensitive</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>}))
<span class="line-num">577</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-join" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">join</span><span
            class="method-args">(args, joiner=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a <code>Sequel::SQL::StringExpression</code> representing an <a href="../SQL.html"><code>SQL</code></a> string made up of the concatenation of the given array&#39;s elements.  If an argument is passed, it is used in between each element of the array in the <a href="../SQL.html"><code>SQL</code></a> concatenation.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">join</span>([<span class="ruby-value">:a</span>]) <span class="ruby-comment"># SQL: a</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">join</span>([<span class="ruby-value">:a</span>, <span class="ruby-value">:b</span>]) <span class="ruby-comment"># SQL: a || b</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">join</span>([<span class="ruby-value">:a</span>, <span class="ruby-string">&#39;b&#39;</span>]) <span class="ruby-comment"># SQL: a || &#39;b&#39;</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">join</span>([<span class="ruby-string">&#39;a&#39;</span>, <span class="ruby-value">:b</span>], <span class="ruby-string">&#39; &#39;</span>) <span class="ruby-comment"># SQL: &#39;a&#39; || &#39; &#39; || b</span>
</pre>
          
          

          
          <div class="method-source-code" id="join-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">551</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">join</span>(<span class="ruby-identifier">args</span>, <span class="ruby-identifier">joiner</span>=<span class="ruby-keyword">nil</span>)
<span class="line-num">552</span>   <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;argument to Sequel.join must be an array&#39;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
<span class="line-num">553</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">joiner</span>
<span class="line-num">554</span>     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">zip</span>([<span class="ruby-identifier">joiner</span>]<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span>).<span class="ruby-identifier">flatten</span>
<span class="line-num">555</span>     <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span>
<span class="line-num">556</span>   <span class="ruby-keyword">end</span>
<span class="line-num">557</span> 
<span class="line-num">558</span>   <span class="ruby-keyword">return</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">StringExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:NOOP</span>, <span class="ruby-string">&#39;&#39;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>
<span class="line-num">559</span> 
<span class="line-num">560</span>   <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span>
<span class="line-num">561</span>     <span class="ruby-keyword">case</span> <span class="ruby-identifier">a</span>
<span class="line-num">562</span>     <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Expression</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">LiteralString</span>, <span class="ruby-constant">TrueClass</span>, <span class="ruby-constant">FalseClass</span>, <span class="ruby-constant">NilClass</span>
<span class="line-num">563</span>       <span class="ruby-identifier">a</span>
<span class="line-num">564</span>     <span class="ruby-keyword">else</span>
<span class="line-num">565</span>       <span class="ruby-identifier">a</span>.<span class="ruby-identifier">to_s</span>
<span class="line-num">566</span>     <span class="ruby-keyword">end</span>
<span class="line-num">567</span>   <span class="ruby-keyword">end</span>
<span class="line-num">568</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">StringExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:&#39;||&#39;</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">569</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-like" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">like</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a <code>SQL::BooleanExpression</code> case sensitive (if the database supports it) pattern match of the receiver with the given patterns.  See <code>SQL::StringExpression.like</code>.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">like</span>(<span class="ruby-value">:a</span>, <span class="ruby-string">&#39;A%&#39;</span>) <span class="ruby-comment"># &quot;a&quot; LIKE &#39;A%&#39; ESCAPE &#39;\&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="like-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">583</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">like</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">584</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">StringExpression</span>.<span class="ruby-identifier">like</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">585</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-lit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">lit</span><span
            class="method-args">(s, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Converts a string into a <code>Sequel::LiteralString</code>, in order to override string literalization, e.g.:</p>

<pre class="ruby"><span class="ruby-constant">DB</span>[<span class="ruby-value">:items</span>].<span class="ruby-identifier">where</span>(<span class="ruby-value">abc:</span> <span class="ruby-string">&#39;def&#39;</span>).<span class="ruby-identifier">sql</span> <span class="ruby-comment">#=&gt;</span>
  <span class="ruby-string">&quot;SELECT * FROM items WHERE (abc = &#39;def&#39;)&quot;</span>

<span class="ruby-constant">DB</span>[<span class="ruby-value">:items</span>].<span class="ruby-identifier">where</span>(<span class="ruby-value">abc:</span> <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">lit</span>(<span class="ruby-string">&#39;def&#39;</span>)).<span class="ruby-identifier">sql</span> <span class="ruby-comment">#=&gt;</span>
  <span class="ruby-string">&quot;SELECT * FROM items WHERE (abc = def)&quot;</span>
</pre>

<p>You can also provide arguments, to create a <code>Sequel::SQL::PlaceholderLiteralString</code>:</p>

<pre class="ruby"><span class="ruby-constant">DB</span>[<span class="ruby-value">:items</span>].<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">count</span>(<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">lit</span>(<span class="ruby-string">&#39;DISTINCT ?&#39;</span>, <span class="ruby-value">:a</span>))}.<span class="ruby-identifier">sql</span> <span class="ruby-comment">#=&gt;</span>
  <span class="ruby-string">&quot;SELECT count(DISTINCT a) FROM items&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="lit-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">600</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">lit</span>(<span class="ruby-identifier">s</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">601</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>
<span class="line-num">602</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">LiteralString</span>)
<span class="line-num">603</span>       <span class="ruby-identifier">s</span>
<span class="line-num">604</span>     <span class="ruby-keyword">else</span>
<span class="line-num">605</span>       <span class="ruby-constant">LiteralString</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">s</span>)
<span class="line-num">606</span>     <span class="ruby-keyword">end</span>
<span class="line-num">607</span>   <span class="ruby-keyword">else</span>
<span class="line-num">608</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">PlaceholderLiteralString</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">args</span>) 
<span class="line-num">609</span>   <span class="ruby-keyword">end</span>
<span class="line-num">610</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-negate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">negate</span><span
            class="method-args">(arg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a <code>Sequel::SQL::BooleanExpression</code> created from the condition specifier, matching none of the conditions.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">negate</span>(<span class="ruby-value">a:</span> <span class="ruby-keyword">true</span>) <span class="ruby-comment"># SQL: a IS NOT TRUE</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">negate</span>([[<span class="ruby-value">:a</span>, <span class="ruby-keyword">true</span>]]) <span class="ruby-comment"># SQL: a IS NOT TRUE</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">negate</span>([[<span class="ruby-value">:a</span>, <span class="ruby-value">1</span>], [<span class="ruby-value">:b</span>, <span class="ruby-value">2</span>]]) <span class="ruby-comment"># SQL: ((a != 1) AND (b != 2))</span>
</pre>
          
          

          
          <div class="method-source-code" id="negate-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">618</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">negate</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">619</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">condition_specifier?</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">620</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">from_value_pairs</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-value">:AND</span>, <span class="ruby-keyword">true</span>)
<span class="line-num">621</span>   <span class="ruby-keyword">else</span>
<span class="line-num">622</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;must pass a conditions specifier to Sequel.negate&#39;</span>
<span class="line-num">623</span>   <span class="ruby-keyword">end</span>
<span class="line-num">624</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-or" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">or</span><span
            class="method-args">(arg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a <code>Sequel::SQL::BooleanExpression</code> created from the condition specifier, matching any of the conditions.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">or</span>(<span class="ruby-value">a:</span> <span class="ruby-keyword">true</span>) <span class="ruby-comment"># SQL: a IS TRUE</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">or</span>([[<span class="ruby-value">:a</span>, <span class="ruby-keyword">true</span>]]) <span class="ruby-comment"># SQL: a IS TRUE</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">or</span>([[<span class="ruby-value">:a</span>, <span class="ruby-value">1</span>], [<span class="ruby-value">:b</span>, <span class="ruby-value">2</span>]]) <span class="ruby-comment"># SQL: ((a = 1) OR (b = 2))</span>
</pre>
          
          

          
          <div class="method-source-code" id="or-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">632</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">or</span>(<span class="ruby-identifier ruby-title">arg</span>)
<span class="line-num">633</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">condition_specifier?</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">634</span>     <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">from_value_pairs</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-value">:OR</span>, <span class="ruby-keyword">false</span>)
<span class="line-num">635</span>   <span class="ruby-keyword">else</span>
<span class="line-num">636</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;must pass a conditions specifier to Sequel.or&#39;</span>
<span class="line-num">637</span>   <span class="ruby-keyword">end</span>
<span class="line-num">638</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-qualify" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">qualify</span><span
            class="method-args">(qualifier, identifier)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a qualified identifier with the given qualifier and identifier</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">qualify</span>(<span class="ruby-value">:table</span>, <span class="ruby-value">:column</span>) <span class="ruby-comment"># &quot;table&quot;.&quot;column&quot;</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">qualify</span>(<span class="ruby-value">:schema</span>, <span class="ruby-value">:table</span>) <span class="ruby-comment"># &quot;schema&quot;.&quot;table&quot;</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">qualify</span>(<span class="ruby-value">:table</span>, <span class="ruby-value">:column</span>).<span class="ruby-identifier">qualify</span>(<span class="ruby-value">:schema</span>) <span class="ruby-comment"># &quot;schema&quot;.&quot;table&quot;.&quot;column&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="qualify-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">645</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">qualify</span>(<span class="ruby-identifier">qualifier</span>, <span class="ruby-identifier">identifier</span>)
<span class="line-num">646</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">qualifier</span>, <span class="ruby-identifier">identifier</span>)
<span class="line-num">647</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-subscript" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">subscript</span><span
            class="method-args">(exp, *subs)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return an <code>SQL::Subscript</code> with the given arguments, representing an <a href="../SQL.html"><code>SQL</code></a> array access.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">subscript</span>(<span class="ruby-value">:array</span>, <span class="ruby-value">1</span>) <span class="ruby-comment"># array[1]</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">subscript</span>(<span class="ruby-value">:array</span>, <span class="ruby-value">1</span>, <span class="ruby-value">2</span>) <span class="ruby-comment"># array[1, 2]</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">subscript</span>(<span class="ruby-value">:array</span>, [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>]) <span class="ruby-comment"># array[1, 2]</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">subscript</span>(<span class="ruby-value">:array</span>, <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">2</span>) <span class="ruby-comment"># array[1:2]</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">subscript</span>(<span class="ruby-value">:array</span>, <span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-value">3</span>) <span class="ruby-comment"># array[1:2]</span>
</pre>
          
          

          
          <div class="method-source-code" id="subscript-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">657</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">subscript</span>(<span class="ruby-identifier">exp</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">subs</span>)
<span class="line-num">658</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Subscript</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">exp</span>, <span class="ruby-identifier">subs</span>.<span class="ruby-identifier">flatten</span>)
<span class="line-num">659</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-trim" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">trim</span><span
            class="method-args">(arg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return an emulated function call for trimming a string of spaces from both sides (similar to ruby&#39;s String#strip).</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">trim</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># trim(a) -- Most databases</span>
<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">trim</span>(<span class="ruby-value">:a</span>) <span class="ruby-comment"># ltrim(rtrim(a)) -- Microsoft SQL Server</span>
</pre>
          
          

          
          <div class="method-source-code" id="trim-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">666</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">trim</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">667</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Function</span>.<span class="ruby-identifier">new!</span>(<span class="ruby-value">:trim</span>, [<span class="ruby-identifier">arg</span>], <span class="ruby-value">:emulate</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)
<span class="line-num">668</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-value_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">value_list</span><span
            class="method-args">(arg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a <code>SQL::ValueList</code> created from the given array.  Used if the array contains all two element arrays and you want it treated as an <a href="../SQL.html"><code>SQL</code></a> value list (IN predicate)  instead of as a conditions specifier (similar to a hash).  This is not necessary if you are using this array as a value in a filter, but may be necessary if you are using it as a value with placeholder SQL:</p>

<pre class="ruby"><span class="ruby-constant">DB</span>[<span class="ruby-value">:a</span>].<span class="ruby-identifier">where</span>([<span class="ruby-value">:a</span>, <span class="ruby-value">:b</span>]<span class="ruby-operator">=&gt;</span>[[<span class="ruby-value">1</span>, <span class="ruby-value">2</span>], [<span class="ruby-value">3</span>, <span class="ruby-value">4</span>]]) <span class="ruby-comment"># SQL: (a, b) IN ((1, 2), (3, 4))</span>
<span class="ruby-constant">DB</span>[<span class="ruby-value">:a</span>].<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;(a, b) IN ?&#39;</span>, [[<span class="ruby-value">1</span>, <span class="ruby-value">2</span>], [<span class="ruby-value">3</span>, <span class="ruby-value">4</span>]]) <span class="ruby-comment"># SQL: (a, b) IN ((1 = 2) AND (3 = 4))</span>
<span class="ruby-constant">DB</span>[<span class="ruby-value">:a</span>].<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;(a, b) IN ?&#39;</span>, <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">value_list</span>([[<span class="ruby-value">1</span>, <span class="ruby-value">2</span>], [<span class="ruby-value">3</span>, <span class="ruby-value">4</span>]])) <span class="ruby-comment"># SQL: (a, b) IN ((1, 2), (3, 4))</span>
</pre>
          
          

          
          <div class="method-source-code" id="value_list-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/sql.rb</span>
<span class="line-num">679</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">value_list</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">680</span>   <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;argument to Sequel.value_list must be an array&#39;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
<span class="line-num">681</span>   <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">ValueList</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">682</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

