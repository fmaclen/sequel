<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Sequel::Model::Associations::AssociationReflection - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
  var index_rel_prefix = "../../../";
</script>

<script src="../../../js/navigation.js" defer></script>
<script src="../../../js/search.js" defer></script>
<script src="../../../js/search_index.js" defer></script>
<script src="../../../js/searcher.js" defer></script>
<script src="../../../js/darkfish.js" defer></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Hash
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="../../Inflections.html">Sequel::Inflections</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-_add_method">#_add_method</a>
    
    <li ><a href="#method-i-_remove_all_method">#_remove_all_method</a>
    
    <li ><a href="#method-i-_remove_method">#_remove_method</a>
    
    <li ><a href="#method-i-_setter_method">#_setter_method</a>
    
    <li ><a href="#method-i-add_method">#add_method</a>
    
    <li ><a href="#method-i-apply_dataset_changes">#apply_dataset_changes</a>
    
    <li ><a href="#method-i-apply_distinct_on_eager_limit_strategy">#apply_distinct_on_eager_limit_strategy</a>
    
    <li ><a href="#method-i-apply_eager_dataset_changes">#apply_eager_dataset_changes</a>
    
    <li ><a href="#method-i-apply_eager_graph_limit_strategy">#apply_eager_graph_limit_strategy</a>
    
    <li ><a href="#method-i-apply_eager_limit_strategy">#apply_eager_limit_strategy</a>
    
    <li ><a href="#method-i-apply_ruby_eager_limit_strategy">#apply_ruby_eager_limit_strategy</a>
    
    <li ><a href="#method-i-apply_window_function_eager_limit_strategy">#apply_window_function_eager_limit_strategy</a>
    
    <li ><a href="#method-i-assign_singular-3F">#assign_singular?</a>
    
    <li ><a href="#method-i-associated_class">#associated_class</a>
    
    <li ><a href="#method-i-associated_dataset">#associated_dataset</a>
    
    <li ><a href="#method-i-association_dataset_for">#association_dataset_for</a>
    
    <li ><a href="#method-i-association_dataset_proc">#association_dataset_proc</a>
    
    <li ><a href="#method-i-association_method">#association_method</a>
    
    <li ><a href="#method-i-can_have_associated_objects-3F">#can_have_associated_objects?</a>
    
    <li ><a href="#method-i-cloneable-3F">#cloneable?</a>
    
    <li ><a href="#method-i-dataset_method">#dataset_method</a>
    
    <li ><a href="#method-i-dataset_need_primary_key-3F">#dataset_need_primary_key?</a>
    
    <li ><a href="#method-i-delete_row_number_column">#delete_row_number_column</a>
    
    <li ><a href="#method-i-eager_graph_lazy_dataset-3F">#eager_graph_lazy_dataset?</a>
    
    <li ><a href="#method-i-eager_graph_limit_strategy">#eager_graph_limit_strategy</a>
    
    <li ><a href="#method-i-eager_limit_strategy">#eager_limit_strategy</a>
    
    <li ><a href="#method-i-eager_load_results">#eager_load_results</a>
    
    <li ><a href="#method-i-eager_loader_key">#eager_loader_key</a>
    
    <li ><a href="#method-i-eager_loading_use_associated_key-3F">#eager_loading_use_associated_key?</a>
    
    <li ><a href="#method-i-filter_by_associations_add_conditions-3F">#filter_by_associations_add_conditions?</a>
    
    <li ><a href="#method-i-filter_by_associations_conditions_expression">#filter_by_associations_conditions_expression</a>
    
    <li ><a href="#method-i-finalize">#finalize</a>
    
    <li ><a href="#method-i-finalize_settings">#finalize_settings</a>
    
    <li ><a href="#method-i-handle_silent_modification_failure-3F">#handle_silent_modification_failure?</a>
    
    <li ><a href="#method-i-initialize_association_cache">#initialize_association_cache</a>
    
    <li ><a href="#method-i-inspect">#inspect</a>
    
    <li ><a href="#method-i-limit_and_offset">#limit_and_offset</a>
    
    <li ><a href="#method-i-need_associated_primary_key-3F">#need_associated_primary_key?</a>
    
    <li ><a href="#method-i-placeholder_loader">#placeholder_loader</a>
    
    <li ><a href="#method-i-predicate_key_values">#predicate_key_values</a>
    
    <li ><a href="#method-i-predicate_keys">#predicate_keys</a>
    
    <li ><a href="#method-i-qualify">#qualify</a>
    
    <li ><a href="#method-i-qualify_assoc">#qualify_assoc</a>
    
    <li ><a href="#method-i-qualify_cur">#qualify_cur</a>
    
    <li ><a href="#method-i-reciprocal">#reciprocal</a>
    
    <li ><a href="#method-i-reciprocal_array-3F">#reciprocal_array?</a>
    
    <li ><a href="#method-i-remove_all_method">#remove_all_method</a>
    
    <li ><a href="#method-i-remove_before_destroy-3F">#remove_before_destroy?</a>
    
    <li ><a href="#method-i-remove_method">#remove_method</a>
    
    <li ><a href="#method-i-remove_should_check_existing-3F">#remove_should_check_existing?</a>
    
    <li ><a href="#method-i-returns_array-3F">#returns_array?</a>
    
    <li ><a href="#method-i-select">#select</a>
    
    <li ><a href="#method-i-set_reciprocal_to_self-3F">#set_reciprocal_to_self?</a>
    
    <li ><a href="#method-i-setter_method">#setter_method</a>
    
    <li ><a href="#method-i-slice_range">#slice_range</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Sequel::Model::Associations::AssociationReflection">
  <h1 id="class-Sequel::Model::Associations::AssociationReflection" class="class">
    class Sequel::Model::Associations::AssociationReflection
  </h1>

  <section class="description">
    
<p><a href="AssociationReflection.html"><code>AssociationReflection</code></a> is a Hash subclass that keeps information on <a href="../../Model.html"><code>Sequel::Model</code></a> associations. It provides methods to reduce internal code duplication.  It should not be instantiated by the user.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="ASSOCIATION_DATASET_PROC">ASSOCIATION_DATASET_PROC
        
        <dd>
        
      
        <dt id="FINALIZE_SETTINGS">FINALIZE_SETTINGS
        
        <dd><p>Map of methods to cache keys used for finalizing associations.</p>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-_add_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_add_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the _add internal association method</p>
          
          

          
          <div class="method-source-code" id="_add_method-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">36</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">_add_method</span>
<span class="line-num">37</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:_add_method</span>]
<span class="line-num">38</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_remove_all_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_remove_all_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the _remove_all internal association method</p>
          
          

          
          <div class="method-source-code" id="_remove_all_method-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">41</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">_remove_all_method</span>
<span class="line-num">42</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:_remove_all_method</span>]
<span class="line-num">43</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_remove_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_remove_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the _remove internal association method</p>
          
          

          
          <div class="method-source-code" id="_remove_method-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">46</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">_remove_method</span>
<span class="line-num">47</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:_remove_method</span>]
<span class="line-num">48</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_setter_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_setter_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the _setter association method</p>
          
          

          
          <div class="method-source-code" id="_setter_method-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">51</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">_setter_method</span>
<span class="line-num">52</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:_setter_method</span>]
<span class="line-num">53</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the add association method</p>
          
          

          
          <div class="method-source-code" id="add_method-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">56</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_method</span>
<span class="line-num">57</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:add_method</span>]
<span class="line-num">58</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apply_dataset_changes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apply_dataset_changes</span><span
            class="method-args">(ds)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Apply all non-instance specific changes to the given dataset and return it.</p>
          
          

          
          <div class="method-source-code" id="apply_dataset_changes-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">84</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">apply_dataset_changes</span>(<span class="ruby-identifier">ds</span>)
<span class="line-num">85</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">with_extend</span>(<span class="ruby-constant">AssociationDatasetMethods</span>).<span class="ruby-identifier">clone</span>(<span class="ruby-value">:association_reflection</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">self</span>)
<span class="line-num">86</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">exts</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:reverse_extend</span>]
<span class="line-num">87</span>     <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">with_extend</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">exts</span>)
<span class="line-num">88</span>   <span class="ruby-keyword">end</span>
<span class="line-num">89</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">select</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">select</span>
<span class="line-num">90</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:conditions</span>]
<span class="line-num">91</span>     <span class="ruby-identifier">ds</span> = (<span class="ruby-identifier">c</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">condition_specifier?</span>(<span class="ruby-identifier">c</span>)) <span class="ruby-operator">?</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">c</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">c</span>)
<span class="line-num">92</span>   <span class="ruby-keyword">end</span>
<span class="line-num">93</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">order</span>(<span class="ruby-operator">*</span><span class="ruby-keyword">self</span>[<span class="ruby-value">:order</span>]) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:order</span>]
<span class="line-num">94</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-operator">*</span><span class="ruby-keyword">self</span>[<span class="ruby-value">:limit</span>]) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:limit</span>]
<span class="line-num">95</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">skip_limit_check</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">limit_to_single_row?</span>
<span class="line-num">96</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">eager</span>(<span class="ruby-keyword">self</span>[<span class="ruby-value">:eager</span>]) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:eager</span>]
<span class="line-num">97</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">distinct</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:distinct</span>]
<span class="line-num">98</span>   <span class="ruby-identifier">ds</span>
<span class="line-num">99</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apply_distinct_on_eager_limit_strategy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apply_distinct_on_eager_limit_strategy</span><span
            class="method-args">(ds)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Use DISTINCT ON and ORDER BY clauses to limit the results to the first record with matching keys.</p>
          
          

          
          <div class="method-source-code" id="apply_distinct_on_eager_limit_strategy-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">138</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">apply_distinct_on_eager_limit_strategy</span>(<span class="ruby-identifier">ds</span>)
<span class="line-num">139</span>   <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">predicate_key</span>
<span class="line-num">140</span>   <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">distinct</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>).<span class="ruby-identifier">order_prepend</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
<span class="line-num">141</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apply_eager_dataset_changes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apply_eager_dataset_changes</span><span
            class="method-args">(ds)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Apply all non-instance specific changes and the eager_block option to the given dataset and return it.</p>
          
          

          
          <div class="method-source-code" id="apply_eager_dataset_changes-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">103</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">apply_eager_dataset_changes</span>(<span class="ruby-identifier">ds</span>)
<span class="line-num">104</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">apply_dataset_changes</span>(<span class="ruby-identifier">ds</span>)
<span class="line-num">105</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:eager_block</span>]
<span class="line-num">106</span>     <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ds</span>)
<span class="line-num">107</span>   <span class="ruby-keyword">end</span>
<span class="line-num">108</span>   <span class="ruby-identifier">ds</span>
<span class="line-num">109</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apply_eager_graph_limit_strategy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apply_eager_graph_limit_strategy</span><span
            class="method-args">(strategy, ds)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Apply the eager graph limit strategy to the dataset to graph into the current dataset, or return the dataset unmodified if no <a href="../../SQL.html"><code>SQL</code></a> limit strategy is needed.</p>
          
          

          
          <div class="method-source-code" id="apply_eager_graph_limit_strategy-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">113</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">apply_eager_graph_limit_strategy</span>(<span class="ruby-identifier">strategy</span>, <span class="ruby-identifier">ds</span>)
<span class="line-num">114</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">strategy</span>
<span class="line-num">115</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:distinct_on</span>
<span class="line-num">116</span>     <span class="ruby-identifier">apply_distinct_on_eager_limit_strategy</span>(<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">order_prepend</span>(<span class="ruby-operator">*</span><span class="ruby-keyword">self</span>[<span class="ruby-value">:order</span>]))
<span class="line-num">117</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:window_function</span>
<span class="line-num">118</span>     <span class="ruby-identifier">apply_window_function_eager_limit_strategy</span>(<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">order_prepend</span>(<span class="ruby-operator">*</span><span class="ruby-keyword">self</span>[<span class="ruby-value">:order</span>])).<span class="ruby-identifier">select</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ds</span>.<span class="ruby-identifier">columns</span>)
<span class="line-num">119</span>   <span class="ruby-keyword">else</span>
<span class="line-num">120</span>     <span class="ruby-identifier">ds</span>
<span class="line-num">121</span>   <span class="ruby-keyword">end</span>
<span class="line-num">122</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apply_eager_limit_strategy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apply_eager_limit_strategy</span><span
            class="method-args">(ds, strategy=eager_limit_strategy, limit_and_offset=limit_and_offset())</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Apply an eager limit strategy to the dataset, or return the dataset unmodified if it doesn&#39;t need an eager limit strategy.</p>
          
          

          
          <div class="method-source-code" id="apply_eager_limit_strategy-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">126</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">apply_eager_limit_strategy</span>(<span class="ruby-identifier">ds</span>, <span class="ruby-identifier">strategy</span>=<span class="ruby-identifier">eager_limit_strategy</span>, <span class="ruby-identifier">limit_and_offset</span>=<span class="ruby-identifier">limit_and_offset</span>())
<span class="line-num">127</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">strategy</span>
<span class="line-num">128</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:distinct_on</span>
<span class="line-num">129</span>     <span class="ruby-identifier">apply_distinct_on_eager_limit_strategy</span>(<span class="ruby-identifier">ds</span>)
<span class="line-num">130</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:window_function</span>
<span class="line-num">131</span>     <span class="ruby-identifier">apply_window_function_eager_limit_strategy</span>(<span class="ruby-identifier">ds</span>, <span class="ruby-identifier">limit_and_offset</span>)
<span class="line-num">132</span>   <span class="ruby-keyword">else</span>
<span class="line-num">133</span>     <span class="ruby-identifier">ds</span>
<span class="line-num">134</span>   <span class="ruby-keyword">end</span>
<span class="line-num">135</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apply_ruby_eager_limit_strategy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apply_ruby_eager_limit_strategy</span><span
            class="method-args">(rows, limit_and_offset = limit_and_offset())</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If the ruby eager limit strategy is being used, slice the array using the slice range to return the object(s) at the correct offset/limit.</p>
          
          

          
          <div class="method-source-code" id="apply_ruby_eager_limit_strategy-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">165</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">apply_ruby_eager_limit_strategy</span>(<span class="ruby-identifier">rows</span>, <span class="ruby-identifier">limit_and_offset</span> = <span class="ruby-identifier">limit_and_offset</span>())
<span class="line-num">166</span>   <span class="ruby-identifier">name</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:name</span>]
<span class="line-num">167</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">range</span> = <span class="ruby-identifier">slice_range</span>(<span class="ruby-identifier">limit_and_offset</span>)
<span class="line-num">168</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">returns_array?</span>
<span class="line-num">169</span>     <span class="ruby-identifier">rows</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">associations</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">o</span>.<span class="ruby-identifier">associations</span>[<span class="ruby-identifier">name</span>][<span class="ruby-identifier">range</span>] <span class="ruby-operator">||</span> []}
<span class="line-num">170</span>   <span class="ruby-keyword">else</span>
<span class="line-num">171</span>     <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">range</span>.<span class="ruby-identifier">begin</span>
<span class="line-num">172</span>     <span class="ruby-identifier">rows</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">associations</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">o</span>.<span class="ruby-identifier">associations</span>[<span class="ruby-identifier">name</span>][<span class="ruby-identifier">offset</span>]}
<span class="line-num">173</span>   <span class="ruby-keyword">end</span>
<span class="line-num">174</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apply_window_function_eager_limit_strategy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apply_window_function_eager_limit_strategy</span><span
            class="method-args">(ds, limit_and_offset=limit_and_offset())</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Use a window function to limit the results of the eager loading dataset.</p>
          
          

          
          <div class="method-source-code" id="apply_window_function_eager_limit_strategy-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">144</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">apply_window_function_eager_limit_strategy</span>(<span class="ruby-identifier">ds</span>, <span class="ruby-identifier">limit_and_offset</span>=<span class="ruby-identifier">limit_and_offset</span>())
<span class="line-num">145</span>   <span class="ruby-identifier">rn</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">row_number_column</span> 
<span class="line-num">146</span>   <span class="ruby-identifier">limit</span>, <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">limit_and_offset</span>
<span class="line-num">147</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">unordered</span>.<span class="ruby-identifier">select_append</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">row_number</span>.<span class="ruby-identifier">function</span>.<span class="ruby-identifier">over</span>(<span class="ruby-value">:partition</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">predicate_key</span>, <span class="ruby-value">:order</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">ds</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:order</span>]).<span class="ruby-identifier">as</span>(<span class="ruby-identifier">rn</span>)}.<span class="ruby-identifier">from_self</span>
<span class="line-num">148</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">rn</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">db</span>.<span class="ruby-identifier">database_type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:mysql</span>
<span class="line-num">149</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">returns_array?</span>
<span class="line-num">150</span>     <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">rn</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">offset</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">offset</span><span class="ruby-value">+1</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>)
<span class="line-num">151</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">offset</span>
<span class="line-num">152</span>     <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
<span class="line-num">153</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">limit</span>
<span class="line-num">154</span>       <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">rn</span> <span class="ruby-operator">=&gt;</span> (<span class="ruby-identifier">offset</span><span class="ruby-operator">...</span>(<span class="ruby-identifier">offset</span><span class="ruby-operator">+</span><span class="ruby-identifier">limit</span>))) 
<span class="line-num">155</span>     <span class="ruby-keyword">else</span>
<span class="line-num">156</span>       <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>{<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">rn</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">offset</span>} 
<span class="line-num">157</span>     <span class="ruby-keyword">end</span>
<span class="line-num">158</span>   <span class="ruby-keyword">else</span>
<span class="line-num">159</span>     <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>{<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">rn</span>) <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">limit</span>} 
<span class="line-num">160</span>   <span class="ruby-keyword">end</span>
<span class="line-num">161</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-assign_singular-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">assign_singular?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether the associations cache should use an array when storing the associated records during eager loading.</p>
          
          

          
          <div class="method-source-code" id="assign_singular-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">178</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">assign_singular?</span>
<span class="line-num">179</span>   <span class="ruby-operator">!</span><span class="ruby-identifier">returns_array?</span>
<span class="line-num">180</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-associated_class" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">associated_class</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The class associated to the current model class via this association</p>
          
          

          
          <div class="method-source-code" id="associated_class-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">66</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">associated_class</span>
<span class="line-num">67</span>   <span class="ruby-identifier">cached_fetch</span>(<span class="ruby-value">:class</span>) <span class="ruby-keyword">do</span>
<span class="line-num">68</span>     <span class="ruby-keyword">begin</span>
<span class="line-num">69</span>       <span class="ruby-identifier">constantize</span>(<span class="ruby-keyword">self</span>[<span class="ruby-value">:class_name</span>])
<span class="line-num">70</span>     <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
<span class="line-num">71</span>       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NameError</span>, <span class="ruby-node">&quot;#{e.message} (this happened when attempting to find the associated class for #{inspect})&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>
<span class="line-num">72</span>     <span class="ruby-keyword">end</span>
<span class="line-num">73</span>   <span class="ruby-keyword">end</span>
<span class="line-num">74</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-associated_dataset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">associated_dataset</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The dataset associated via this association, with the non-instance specific changes already applied.  This will be a joined dataset if the association requires joining tables.</p>
          
          

          
          <div class="method-source-code" id="associated_dataset-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">79</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">associated_dataset</span>
<span class="line-num">80</span>   <span class="ruby-identifier">cached_fetch</span>(<span class="ruby-value">:_dataset</span>){<span class="ruby-identifier">apply_dataset_changes</span>(<span class="ruby-identifier">_associated_dataset</span>)}
<span class="line-num">81</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-association_dataset_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">association_dataset_for</span><span
            class="method-args">(object)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return an dataset that will load the appropriate associated objects for the given object using this association.</p>
          
          

          
          <div class="method-source-code" id="association_dataset_for-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">215</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">association_dataset_for</span>(<span class="ruby-identifier">object</span>)
<span class="line-num">216</span>   <span class="ruby-identifier">condition</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">can_have_associated_objects?</span>(<span class="ruby-identifier">object</span>)
<span class="line-num">217</span>     <span class="ruby-identifier">predicate_keys</span>.<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">predicate_key_values</span>(<span class="ruby-identifier">object</span>))
<span class="line-num">218</span>   <span class="ruby-keyword">else</span>
<span class="line-num">219</span>     <span class="ruby-keyword">false</span>
<span class="line-num">220</span>   <span class="ruby-keyword">end</span>
<span class="line-num">221</span> 
<span class="line-num">222</span>   <span class="ruby-identifier">associated_dataset</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">condition</span>)
<span class="line-num">223</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-association_dataset_proc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">association_dataset_proc</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Proc used to create the association dataset method.</p>
          
          

          
          <div class="method-source-code" id="association_dataset_proc-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">227</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">association_dataset_proc</span>
<span class="line-num">228</span>   <span class="ruby-constant">ASSOCIATION_DATASET_PROC</span>
<span class="line-num">229</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-association_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">association_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for association method, the same as the name of the association.</p>
          
          

          
          <div class="method-source-code" id="association_method-source">
            <pre>   <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">61</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">association_method</span>
<span class="line-num">62</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:name</span>]
<span class="line-num">63</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-can_have_associated_objects-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">can_have_associated_objects?</span><span
            class="method-args">(obj)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether this association can have associated objects, given the current object.  Should be false if obj cannot have associated objects because the necessary key columns are NULL.</p>
          
          

          
          <div class="method-source-code" id="can_have_associated_objects-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">185</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">can_have_associated_objects?</span>(<span class="ruby-identifier">obj</span>)
<span class="line-num">186</span>   <span class="ruby-keyword">true</span>
<span class="line-num">187</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cloneable-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cloneable?</span><span
            class="method-args">(ref)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether you are able to clone from the given association type to the current association type, true by default only if the types match.</p>
          
          

          
          <div class="method-source-code" id="cloneable-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">191</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cloneable?</span>(<span class="ruby-identifier">ref</span>)
<span class="line-num">192</span>   <span class="ruby-identifier">ref</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:type</span>]
<span class="line-num">193</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-dataset_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dataset_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the dataset association method</p>
          
          

          
          <div class="method-source-code" id="dataset_method-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">196</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dataset_method</span>
<span class="line-num">197</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:dataset_method</span>]
<span class="line-num">198</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-dataset_need_primary_key-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dataset_need_primary_key?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether the dataset needs a primary key to function, true by default.</p>
          
          

          
          <div class="method-source-code" id="dataset_need_primary_key-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">201</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dataset_need_primary_key?</span>
<span class="line-num">202</span>   <span class="ruby-keyword">true</span>
<span class="line-num">203</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_row_number_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_row_number_column</span><span
            class="method-args">(ds=associated_dataset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the symbol used for the row number column if the window function eager limit strategy is being used, or nil otherwise.</p>
          
          

          
          <div class="method-source-code" id="delete_row_number_column-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">207</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delete_row_number_column</span>(<span class="ruby-identifier">ds</span>=<span class="ruby-identifier">associated_dataset</span>)
<span class="line-num">208</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">eager_limit_strategy</span> <span class="ruby-operator">==</span> <span class="ruby-value">:window_function</span>
<span class="line-num">209</span>     <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">row_number_column</span> 
<span class="line-num">210</span>   <span class="ruby-keyword">end</span>
<span class="line-num">211</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eager_graph_lazy_dataset-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eager_graph_lazy_dataset?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether to eagerly graph a lazy dataset, true by default.  If this is false, the association won&#39;t respect the :eager_graph option when loading the association for a single record.</p>
          
          

          
          <div class="method-source-code" id="eager_graph_lazy_dataset-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">339</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">eager_graph_lazy_dataset?</span>
<span class="line-num">340</span>   <span class="ruby-keyword">true</span>
<span class="line-num">341</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eager_graph_limit_strategy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eager_graph_limit_strategy</span><span
            class="method-args">(strategy)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The eager_graph limit strategy to use for this dataset</p>
          
          

          
          <div class="method-source-code" id="eager_graph_limit_strategy-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">232</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">eager_graph_limit_strategy</span>(<span class="ruby-identifier">strategy</span>)
<span class="line-num">233</span>   <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:limit</span>] <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">returns_array?</span>
<span class="line-num">234</span>     <span class="ruby-identifier">strategy</span> = <span class="ruby-identifier">strategy</span>[<span class="ruby-keyword">self</span>[<span class="ruby-value">:name</span>]] <span class="ruby-keyword">if</span> <span class="ruby-identifier">strategy</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
<span class="line-num">235</span>     <span class="ruby-keyword">case</span> <span class="ruby-identifier">strategy</span>
<span class="line-num">236</span>     <span class="ruby-keyword">when</span> <span class="ruby-keyword">true</span>
<span class="line-num">237</span>       <span class="ruby-identifier">true_eager_graph_limit_strategy</span>
<span class="line-num">238</span>     <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>
<span class="line-num">239</span>       <span class="ruby-identifier">strategy</span>
<span class="line-num">240</span>     <span class="ruby-keyword">else</span>
<span class="line-num">241</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">returns_array?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">offset</span>
<span class="line-num">242</span>         <span class="ruby-value">:ruby</span>
<span class="line-num">243</span>       <span class="ruby-keyword">end</span>
<span class="line-num">244</span>     <span class="ruby-keyword">end</span>
<span class="line-num">245</span>   <span class="ruby-keyword">end</span>
<span class="line-num">246</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eager_limit_strategy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eager_limit_strategy</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The eager limit strategy to use for this dataset.</p>
          
          

          
          <div class="method-source-code" id="eager_limit_strategy-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">249</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">eager_limit_strategy</span>
<span class="line-num">250</span>   <span class="ruby-identifier">cached_fetch</span>(<span class="ruby-value">:_eager_limit_strategy</span>) <span class="ruby-keyword">do</span>
<span class="line-num">251</span>     <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:limit</span>] <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">returns_array?</span>
<span class="line-num">252</span>       <span class="ruby-keyword">case</span> <span class="ruby-identifier">s</span> = <span class="ruby-identifier">cached_fetch</span>(<span class="ruby-value">:eager_limit_strategy</span>){<span class="ruby-identifier">default_eager_limit_strategy</span>}
<span class="line-num">253</span>       <span class="ruby-keyword">when</span> <span class="ruby-keyword">true</span>
<span class="line-num">254</span>         <span class="ruby-identifier">true_eager_limit_strategy</span>
<span class="line-num">255</span>       <span class="ruby-keyword">else</span>
<span class="line-num">256</span>         <span class="ruby-identifier">s</span>
<span class="line-num">257</span>       <span class="ruby-keyword">end</span>
<span class="line-num">258</span>     <span class="ruby-keyword">end</span>
<span class="line-num">259</span>   <span class="ruby-keyword">end</span>
<span class="line-num">260</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eager_load_results" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eager_load_results</span><span
            class="method-args">(eo, &amp;block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Eager load the associated objects using the hash of eager options, yielding each row to the block.</p>
          
          

          
          <div class="method-source-code" id="eager_load_results-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">264</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">eager_load_results</span>(<span class="ruby-identifier">eo</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">265</span>   <span class="ruby-identifier">rows</span> = <span class="ruby-identifier">eo</span>[<span class="ruby-value">:rows</span>]
<span class="line-num">266</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">eo</span>[<span class="ruby-value">:initialize_rows</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
<span class="line-num">267</span>     <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">synchronize_with</span>(<span class="ruby-identifier">eo</span>[<span class="ruby-value">:mutex</span>]){<span class="ruby-identifier">initialize_association_cache</span>(<span class="ruby-identifier">rows</span>)}
<span class="line-num">268</span>   <span class="ruby-keyword">end</span>
<span class="line-num">269</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">eo</span>[<span class="ruby-value">:id_map</span>]
<span class="line-num">270</span>     <span class="ruby-identifier">ids</span> = <span class="ruby-identifier">eo</span>[<span class="ruby-value">:id_map</span>].<span class="ruby-identifier">keys</span>
<span class="line-num">271</span>     <span class="ruby-keyword">return</span> <span class="ruby-identifier">ids</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ids</span>.<span class="ruby-identifier">empty?</span>
<span class="line-num">272</span>   <span class="ruby-keyword">end</span>
<span class="line-num">273</span>   <span class="ruby-identifier">strategy</span> = <span class="ruby-identifier">eager_limit_strategy</span>
<span class="line-num">274</span>   <span class="ruby-identifier">cascade</span> = <span class="ruby-identifier">eo</span>[<span class="ruby-value">:associations</span>]
<span class="line-num">275</span>   <span class="ruby-identifier">eager_limit</span> = <span class="ruby-keyword">nil</span>
<span class="line-num">276</span> 
<span class="line-num">277</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">eo</span>[<span class="ruby-value">:no_results</span>]
<span class="line-num">278</span>     <span class="ruby-identifier">no_results</span> = <span class="ruby-keyword">true</span>
<span class="line-num">279</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">eo</span>[<span class="ruby-value">:eager_block</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">eo</span>[<span class="ruby-value">:loader</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
<span class="line-num">280</span>     <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">eager_loading_dataset</span>(<span class="ruby-identifier">eo</span>)
<span class="line-num">281</span> 
<span class="line-num">282</span>     <span class="ruby-identifier">strategy</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:eager_limit_strategy</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">strategy</span>
<span class="line-num">283</span> 
<span class="line-num">284</span>     <span class="ruby-identifier">eager_limit</span> =
<span class="line-num">285</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">el</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:eager_limit</span>]
<span class="line-num">286</span>         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;The :eager_limit dataset option is not supported for associations returning a single record&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">returns_array?</span>
<span class="line-num">287</span>         <span class="ruby-identifier">strategy</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">true_eager_graph_limit_strategy</span>
<span class="line-num">288</span>         <span class="ruby-keyword">if</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
<span class="line-num">289</span>           <span class="ruby-identifier">el</span>
<span class="line-num">290</span>         <span class="ruby-keyword">else</span>
<span class="line-num">291</span>           [<span class="ruby-identifier">el</span>, <span class="ruby-keyword">nil</span>]
<span class="line-num">292</span>         <span class="ruby-keyword">end</span>
<span class="line-num">293</span>       <span class="ruby-keyword">else</span>
<span class="line-num">294</span>         <span class="ruby-identifier">limit_and_offset</span>
<span class="line-num">295</span>       <span class="ruby-keyword">end</span>
<span class="line-num">296</span> 
<span class="line-num">297</span>     <span class="ruby-identifier">strategy</span> = <span class="ruby-identifier">true_eager_graph_limit_strategy</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">strategy</span> <span class="ruby-operator">==</span> <span class="ruby-value">:union</span>
<span class="line-num">298</span>     <span class="ruby-comment"># Correlated subqueries are not supported for regular eager loading</span>
<span class="line-num">299</span>     <span class="ruby-identifier">strategy</span> = <span class="ruby-value">:ruby</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">strategy</span> <span class="ruby-operator">==</span> <span class="ruby-value">:correlated_subquery</span>
<span class="line-num">300</span>     <span class="ruby-identifier">strategy</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">strategy</span> <span class="ruby-operator">==</span> <span class="ruby-value">:ruby</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">assign_singular?</span>
<span class="line-num">301</span>     <span class="ruby-identifier">objects</span> = <span class="ruby-identifier">apply_eager_limit_strategy</span>(<span class="ruby-identifier">ds</span>, <span class="ruby-identifier">strategy</span>, <span class="ruby-identifier">eager_limit</span>).<span class="ruby-identifier">all</span>
<span class="line-num">302</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">strategy</span> <span class="ruby-operator">==</span> <span class="ruby-value">:union</span>
<span class="line-num">303</span>     <span class="ruby-identifier">objects</span> = []
<span class="line-num">304</span>     <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">associated_dataset</span>
<span class="line-num">305</span>     <span class="ruby-identifier">loader</span> = <span class="ruby-identifier">union_eager_loader</span>
<span class="line-num">306</span>     <span class="ruby-identifier">joiner</span> = <span class="ruby-string">&quot; UNION ALL &quot;</span>
<span class="line-num">307</span>     <span class="ruby-identifier">ids</span>.<span class="ruby-identifier">each_slice</span>(<span class="ruby-identifier">subqueries_per_union</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">slice</span><span class="ruby-operator">|</span>
<span class="line-num">308</span>       <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">with_sql</span>(<span class="ruby-identifier">slice</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">loader</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">k</span>)}.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">joiner</span>)).<span class="ruby-identifier">to_a</span>)
<span class="line-num">309</span>     <span class="ruby-keyword">end</span>
<span class="line-num">310</span>     <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">eager</span>(<span class="ruby-identifier">cascade</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cascade</span>
<span class="line-num">311</span>     <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:post_load</span>, <span class="ruby-identifier">objects</span>)
<span class="line-num">312</span>   <span class="ruby-keyword">else</span>
<span class="line-num">313</span>     <span class="ruby-identifier">loader</span> = <span class="ruby-identifier">placeholder_eager_loader</span>
<span class="line-num">314</span>     <span class="ruby-identifier">loader</span> = <span class="ruby-identifier">loader</span>.<span class="ruby-identifier">with_dataset</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">dataset</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">eager</span>(<span class="ruby-identifier">cascade</span>)} <span class="ruby-keyword">if</span> <span class="ruby-identifier">cascade</span>
<span class="line-num">315</span>     <span class="ruby-identifier">objects</span> = <span class="ruby-identifier">loader</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">ids</span>)
<span class="line-num">316</span>   <span class="ruby-keyword">end</span>
<span class="line-num">317</span> 
<span class="line-num">318</span>   <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">synchronize_with</span>(<span class="ruby-identifier">eo</span>[<span class="ruby-value">:mutex</span>]){<span class="ruby-identifier">objects</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)} <span class="ruby-keyword">unless</span> <span class="ruby-identifier">no_results</span>
<span class="line-num">319</span> 
<span class="line-num">320</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">strategy</span> <span class="ruby-operator">==</span> <span class="ruby-value">:ruby</span>
<span class="line-num">321</span>     <span class="ruby-identifier">apply_ruby_eager_limit_strategy</span>(<span class="ruby-identifier">rows</span>, <span class="ruby-identifier">eager_limit</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">limit_and_offset</span>)
<span class="line-num">322</span>   <span class="ruby-keyword">end</span>
<span class="line-num">323</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eager_loader_key" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eager_loader_key</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The key to use for the key hash when eager loading</p>
          
          

          
          <div class="method-source-code" id="eager_loader_key-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">326</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">eager_loader_key</span>
<span class="line-num">327</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:eager_loader_key</span>]
<span class="line-num">328</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eager_loading_use_associated_key-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eager_loading_use_associated_key?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>By default associations do not need to select a key in an associated table to eagerly load.</p>
          
          

          
          <div class="method-source-code" id="eager_loading_use_associated_key-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">332</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">eager_loading_use_associated_key?</span>
<span class="line-num">333</span>   <span class="ruby-keyword">false</span>
<span class="line-num">334</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-filter_by_associations_add_conditions-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filter_by_associations_add_conditions?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether additional conditions should be added when using the filter by associations support.</p>
          
          

          
          <div class="method-source-code" id="filter_by_associations_add_conditions-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">345</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">filter_by_associations_add_conditions?</span>
<span class="line-num">346</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:conditions</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:eager_block</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:limit</span>]
<span class="line-num">347</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-filter_by_associations_conditions_expression" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filter_by_associations_conditions_expression</span><span
            class="method-args">(obj)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The expression to use for the additional conditions to be added for the filter by association support, when the association itself is filtered.  Works by using a subquery to test that the objects passed also meet the association filter criteria.</p>
          
          

          
          <div class="method-source-code" id="filter_by_associations_conditions_expression-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">353</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">filter_by_associations_conditions_expression</span>(<span class="ruby-identifier">obj</span>)
<span class="line-num">354</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">filter_by_associations_conditions_dataset</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">filter_by_associations_conditions_subquery_conditions</span>(<span class="ruby-identifier">obj</span>))
<span class="line-num">355</span>   {<span class="ruby-identifier">filter_by_associations_conditions_key</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">ds</span>}
<span class="line-num">356</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-finalize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">finalize</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Finalize the association by first attempting to populate the thread-safe cache, and then transfering the thread-safe cache value to the association itself, so that a mutex is not needed to get the value.</p>
          
          

          
          <div class="method-source-code" id="finalize-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">361</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">finalize</span>
<span class="line-num">362</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">cache</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:cache</span>]
<span class="line-num">363</span> 
<span class="line-num">364</span>   <span class="ruby-identifier">finalizer</span> = <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">meth</span>, <span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
<span class="line-num">365</span>     <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)
<span class="line-num">366</span> 
<span class="line-num">367</span>     <span class="ruby-comment"># Allow calling private methods to make sure caching is done appropriately</span>
<span class="line-num">368</span>     <span class="ruby-identifier">send</span>(<span class="ruby-identifier">meth</span>)
<span class="line-num">369</span>     <span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">cache</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cache</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)
<span class="line-num">370</span>   <span class="ruby-keyword">end</span>
<span class="line-num">371</span> 
<span class="line-num">372</span>   <span class="ruby-identifier">finalize_settings</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">finalizer</span>)
<span class="line-num">373</span> 
<span class="line-num">374</span>   <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:instance_specific</span>]
<span class="line-num">375</span>     <span class="ruby-identifier">finalizer</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value">:associated_eager_dataset</span>, <span class="ruby-value">:associated_eager_dataset</span>)
<span class="line-num">376</span>     <span class="ruby-identifier">finalizer</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value">:filter_by_associations_conditions_dataset</span>, <span class="ruby-value">:filter_by_associations_conditions_dataset</span>)
<span class="line-num">377</span>   <span class="ruby-keyword">end</span>
<span class="line-num">378</span> 
<span class="line-num">379</span>   <span class="ruby-keyword">nil</span>
<span class="line-num">380</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-finalize_settings" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">finalize_settings</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="finalize_settings-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">392</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">finalize_settings</span>
<span class="line-num">393</span>   <span class="ruby-constant">FINALIZE_SETTINGS</span>
<span class="line-num">394</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-handle_silent_modification_failure-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">handle_silent_modification_failure?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether to handle silent modification failure when adding/removing associated records, false by default.</p>
          
          

          
          <div class="method-source-code" id="handle_silent_modification_failure-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">398</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">handle_silent_modification_failure?</span>
<span class="line-num">399</span>   <span class="ruby-keyword">false</span>
<span class="line-num">400</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-initialize_association_cache" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialize_association_cache</span><span
            class="method-args">(objects)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Initialize the associations cache for the current association for the given objects.</p>
          
          

          
          <div class="method-source-code" id="initialize_association_cache-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">403</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize_association_cache</span>(<span class="ruby-identifier">objects</span>)
<span class="line-num">404</span>   <span class="ruby-identifier">name</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:name</span>]
<span class="line-num">405</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">assign_singular?</span>
<span class="line-num">406</span>     <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">associations</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword">nil</span>}
<span class="line-num">407</span>   <span class="ruby-keyword">else</span>
<span class="line-num">408</span>     <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">associations</span>[<span class="ruby-identifier">name</span>] = []}
<span class="line-num">409</span>   <span class="ruby-keyword">end</span>
<span class="line-num">410</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Show which type of reflection this is, and a guess at what code was used to create the association.</p>
          
          

          
          <div class="method-source-code" id="inspect-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">414</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">inspect</span>
<span class="line-num">415</span>   <span class="ruby-identifier">o</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:orig_opts</span>].<span class="ruby-identifier">dup</span>
<span class="line-num">416</span>   <span class="ruby-identifier">o</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:class</span>)
<span class="line-num">417</span>   <span class="ruby-identifier">o</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:class_name</span>)
<span class="line-num">418</span>   <span class="ruby-identifier">o</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:block</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">o</span>[<span class="ruby-value">:block</span>]
<span class="line-num">419</span>   <span class="ruby-identifier">o</span>[<span class="ruby-value">:class</span>] = <span class="ruby-keyword">self</span>[<span class="ruby-value">:orig_class</span>] <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:orig_class</span>]
<span class="line-num">420</span> 
<span class="line-num">421</span>   <span class="ruby-node">&quot;#&lt;#{self.class} #{self[:model]}.#{self[:type]} #{self[:name].inspect}#{&quot;, #{o.inspect[1...-1]}&quot; unless o.empty?}&gt;&quot;</span>
<span class="line-num">422</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-limit_and_offset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">limit_and_offset</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The limit and offset for this association (returned as a two element array).</p>
          
          

          
          <div class="method-source-code" id="limit_and_offset-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">425</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">limit_and_offset</span>
<span class="line-num">426</span>   <span class="ruby-keyword">if</span> (<span class="ruby-identifier">v</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:limit</span>]).<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
<span class="line-num">427</span>     <span class="ruby-identifier">v</span>
<span class="line-num">428</span>   <span class="ruby-keyword">else</span>
<span class="line-num">429</span>     [<span class="ruby-identifier">v</span>, <span class="ruby-keyword">nil</span>]
<span class="line-num">430</span>   <span class="ruby-keyword">end</span>
<span class="line-num">431</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-need_associated_primary_key-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">need_associated_primary_key?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether the associated object needs a primary key to be added/removed, false by default.</p>
          
          

          
          <div class="method-source-code" id="need_associated_primary_key-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">435</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">need_associated_primary_key?</span>
<span class="line-num">436</span>   <span class="ruby-keyword">false</span>
<span class="line-num">437</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-placeholder_loader" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">placeholder_loader</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>A placeholder literalizer that can be used to lazily load the association. If one can&#39;t be used, returns nil.</p>
          
          

          
          <div class="method-source-code" id="placeholder_loader-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">441</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">placeholder_loader</span>
<span class="line-num">442</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">use_placeholder_loader?</span>
<span class="line-num">443</span>     <span class="ruby-identifier">cached_fetch</span>(<span class="ruby-value">:placeholder_loader</span>) <span class="ruby-keyword">do</span>
<span class="line-num">444</span>       <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Dataset</span><span class="ruby-operator">::</span><span class="ruby-constant">PlaceholderLiteralizer</span>.<span class="ruby-identifier">loader</span>(<span class="ruby-identifier">associated_dataset</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pl</span>, <span class="ruby-identifier">ds</span><span class="ruby-operator">|</span>
<span class="line-num">445</span>         <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">&amp;</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">predicate_keys</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:&#39;=&#39;</span>, <span class="ruby-identifier">k</span>, <span class="ruby-identifier">pl</span>.<span class="ruby-identifier">arg</span>)}))
<span class="line-num">446</span>         <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-value">:block</span>]
<span class="line-num">447</span>           <span class="ruby-identifier">ds</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:block</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ds</span>)
<span class="line-num">448</span>         <span class="ruby-keyword">end</span>
<span class="line-num">449</span>         <span class="ruby-identifier">ds</span>
<span class="line-num">450</span>       <span class="ruby-keyword">end</span>
<span class="line-num">451</span>     <span class="ruby-keyword">end</span>
<span class="line-num">452</span>   <span class="ruby-keyword">end</span>
<span class="line-num">453</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-predicate_key_values" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">predicate_key_values</span><span
            class="method-args">(object)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The values that <a href="AssociationReflection.html#method-i-predicate_keys"><code>predicate_keys</code></a> should match for objects to be associated.</p>
          
          

          
          <div class="method-source-code" id="predicate_key_values-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">461</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">predicate_key_values</span>(<span class="ruby-identifier">object</span>)
<span class="line-num">462</span>   <span class="ruby-identifier">predicate_key_methods</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">get_column_value</span>(<span class="ruby-identifier">k</span>)}
<span class="line-num">463</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-predicate_keys" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">predicate_keys</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The keys to use for loading of the regular dataset, as an array.</p>
          
          

          
          <div class="method-source-code" id="predicate_keys-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">456</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">predicate_keys</span>
<span class="line-num">457</span>   <span class="ruby-identifier">cached_fetch</span>(<span class="ruby-value">:predicate_keys</span>){<span class="ruby-constant">Array</span>(<span class="ruby-identifier">predicate_key</span>)}
<span class="line-num">458</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-qualify" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">qualify</span><span
            class="method-args">(table, col)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Qualify <code>col</code> with the given table name.</p>
          
          

          
          <div class="method-source-code" id="qualify-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">466</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">qualify</span>(<span class="ruby-identifier">table</span>, <span class="ruby-identifier">col</span>)
<span class="line-num">467</span>   <span class="ruby-identifier">transform</span>(<span class="ruby-identifier">col</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>
<span class="line-num">468</span>     <span class="ruby-keyword">case</span> <span class="ruby-identifier">k</span>
<span class="line-num">469</span>     <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>, <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>
<span class="line-num">470</span>       <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table</span>, <span class="ruby-identifier">k</span>)
<span class="line-num">471</span>     <span class="ruby-keyword">else</span>
<span class="line-num">472</span>       <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Qualifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table</span>).<span class="ruby-identifier">transform</span>(<span class="ruby-identifier">k</span>)
<span class="line-num">473</span>     <span class="ruby-keyword">end</span>
<span class="line-num">474</span>   <span class="ruby-keyword">end</span>
<span class="line-num">475</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-qualify_assoc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">qualify_assoc</span><span
            class="method-args">(col)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Qualify col with the associated model&#39;s table name.</p>
          
          

          
          <div class="method-source-code" id="qualify_assoc-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">478</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">qualify_assoc</span>(<span class="ruby-identifier">col</span>)
<span class="line-num">479</span>   <span class="ruby-identifier">qualify</span>(<span class="ruby-identifier">associated_class</span>.<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">col</span>)
<span class="line-num">480</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-qualify_cur" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">qualify_cur</span><span
            class="method-args">(col)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Qualify col with the current model&#39;s table name.</p>
          
          

          
          <div class="method-source-code" id="qualify_cur-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">483</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">qualify_cur</span>(<span class="ruby-identifier">col</span>)
<span class="line-num">484</span>   <span class="ruby-identifier">qualify</span>(<span class="ruby-keyword">self</span>[<span class="ruby-value">:model</span>].<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">col</span>)
<span class="line-num">485</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reciprocal" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reciprocal</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the reciprocal association variable, if one exists. The reciprocal association is the association in the associated class that is the opposite of the current association.  For example, Album.many_to_one :artist and Artist.one_to_many :albums are reciprocal associations.  This information is to populate reciprocal associations.  For example, when you do this_artist.add_album(album) it sets album.artist to this_artist.</p>
          
          

          
          <div class="method-source-code" id="reciprocal-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">493</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reciprocal</span>
<span class="line-num">494</span>   <span class="ruby-identifier">cached_fetch</span>(<span class="ruby-value">:reciprocal</span>) <span class="ruby-keyword">do</span>
<span class="line-num">495</span>     <span class="ruby-identifier">possible_recips</span> = []
<span class="line-num">496</span> 
<span class="line-num">497</span>     <span class="ruby-identifier">associated_class</span>.<span class="ruby-identifier">all_association_reflections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">assoc_reflect</span><span class="ruby-operator">|</span>
<span class="line-num">498</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">reciprocal_association?</span>(<span class="ruby-identifier">assoc_reflect</span>)
<span class="line-num">499</span>         <span class="ruby-identifier">possible_recips</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">assoc_reflect</span>
<span class="line-num">500</span>       <span class="ruby-keyword">end</span>
<span class="line-num">501</span>     <span class="ruby-keyword">end</span>
<span class="line-num">502</span> 
<span class="line-num">503</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">possible_recips</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
<span class="line-num">504</span>       <span class="ruby-identifier">cached_set</span>(<span class="ruby-value">:reciprocal_type</span>, <span class="ruby-identifier">possible_recips</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">:type</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">ambiguous_reciprocal_type?</span>
<span class="line-num">505</span>       <span class="ruby-identifier">possible_recips</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">:name</span>]
<span class="line-num">506</span>     <span class="ruby-keyword">end</span>
<span class="line-num">507</span>   <span class="ruby-keyword">end</span>
<span class="line-num">508</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reciprocal_array-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reciprocal_array?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether the reciprocal of this association returns an array of objects instead of a single object, true by default.</p>
          
          

          
          <div class="method-source-code" id="reciprocal_array-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">512</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reciprocal_array?</span>
<span class="line-num">513</span>   <span class="ruby-keyword">true</span>
<span class="line-num">514</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_all_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_all_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the remove_all_ association method</p>
          
          

          
          <div class="method-source-code" id="remove_all_method-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">517</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_all_method</span>
<span class="line-num">518</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:remove_all_method</span>]
<span class="line-num">519</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_before_destroy-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_before_destroy?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether associated objects need to be removed from the association before being destroyed in order to preserve referential integrity.</p>
          
          

          
          <div class="method-source-code" id="remove_before_destroy-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">523</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_before_destroy?</span>
<span class="line-num">524</span>   <span class="ruby-keyword">true</span>
<span class="line-num">525</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the remove_ association method</p>
          
          

          
          <div class="method-source-code" id="remove_method-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">528</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_method</span>
<span class="line-num">529</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:remove_method</span>]
<span class="line-num">530</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_should_check_existing-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_should_check_existing?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether to check that an object to be disassociated is already associated to this object, false by default.</p>
          
          

          
          <div class="method-source-code" id="remove_should_check_existing-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">533</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_should_check_existing?</span>
<span class="line-num">534</span>   <span class="ruby-keyword">false</span>
<span class="line-num">535</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-returns_array-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">returns_array?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether this association returns an array of objects instead of a single object, true by default.</p>
          
          

          
          <div class="method-source-code" id="returns_array-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">539</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">returns_array?</span>
<span class="line-num">540</span>   <span class="ruby-keyword">true</span>
<span class="line-num">541</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-select" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">select</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The columns to select when loading the association.</p>
          
          

          
          <div class="method-source-code" id="select-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">544</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">select</span>
<span class="line-num">545</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:select</span>]
<span class="line-num">546</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-set_reciprocal_to_self-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_reciprocal_to_self?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Whether to set the reciprocal association to self when loading associated records, false by default.</p>
          
          

          
          <div class="method-source-code" id="set_reciprocal_to_self-3F-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">550</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set_reciprocal_to_self?</span>
<span class="line-num">551</span>   <span class="ruby-keyword">false</span>
<span class="line-num">552</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-setter_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">setter_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Name symbol for the setter association method</p>
          
          

          
          <div class="method-source-code" id="setter_method-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">555</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setter_method</span>
<span class="line-num">556</span>   <span class="ruby-keyword">self</span>[<span class="ruby-value">:setter_method</span>]
<span class="line-num">557</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-slice_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">slice_range</span><span
            class="method-args">(limit_and_offset = limit_and_offset())</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The range used for slicing when using the :ruby eager limit strategy.</p>
          
          

          
          <div class="method-source-code" id="slice_range-source">
            <pre>    <span class="ruby-comment"># File lib/sequel/model/associations.rb</span>
<span class="line-num">560</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">slice_range</span>(<span class="ruby-identifier">limit_and_offset</span> = <span class="ruby-identifier">limit_and_offset</span>())
<span class="line-num">561</span>   <span class="ruby-identifier">limit</span>, <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">limit_and_offset</span>
<span class="line-num">562</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">limit</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">offset</span>
<span class="line-num">563</span>     (<span class="ruby-identifier">offset</span><span class="ruby-operator">||</span><span class="ruby-value">0</span>)<span class="ruby-operator">..</span>(<span class="ruby-identifier">limit</span> <span class="ruby-operator">?</span> (<span class="ruby-identifier">offset</span><span class="ruby-operator">||</span><span class="ruby-value">0</span>)<span class="ruby-operator">+</span><span class="ruby-identifier">limit</span><span class="ruby-value">-1</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>)
<span class="line-num">564</span>   <span class="ruby-keyword">end</span>
<span class="line-num">565</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

