<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>schema_modification - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Schema+modification+methods">Schema modification methods</a>
    <li><a href="#label-create_table"><code>create_table</code></a>
    <li><a href="#label-Column+types">Column types</a>
    <li><a href="#label-Column+options">Column options</a>
    <li><a href="#label-Other+methods">Other methods</a>
    <li><a href="#label-primary_key"><code>primary_key</code></a>
    <li><a href="#label-foreign_key"><code>foreign_key</code></a>
    <li><a href="#label-index"><code>index</code></a>
    <li><a href="#label-unique"><code>unique</code></a>
    <li><a href="#label-full_text_index+and+spatial_index"><code>full_text_index</code> and <code>spatial_index</code></a>
    <li><a href="#label-constraint"><code>constraint</code></a>
    <li><a href="#label-check"><code>check</code></a>
    <li><a href="#label-create_join_table"><code>create_join_table</code></a>
    <li><a href="#label-create_table+-3Aas"><code>create_table :as</code></a>
    <li><a href="#label-alter_table"><code>alter_table</code></a>
    <li><a href="#label-add_column"><code>add_column</code></a>
    <li><a href="#label-drop_column"><code>drop_column</code></a>
    <li><a href="#label-rename_column"><code>rename_column</code></a>
    <li><a href="#label-add_primary_key"><code>add_primary_key</code></a>
    <li><a href="#label-add_foreign_key"><code>add_foreign_key</code></a>
    <li><a href="#label-drop_foreign_key"><code>drop_foreign_key</code></a>
    <li><a href="#label-add_index"><code>add_index</code></a>
    <li><a href="#label-drop_index"><code>drop_index</code></a>
    <li><a href="#label-add_full_text_index-2C+add_spatial_index"><code>add_full_text_index</code>, <code>add_spatial_index</code></a>
    <li><a href="#label-add_constraint"><code>add_constraint</code></a>
    <li><a href="#label-add_unique_constraint"><code>add_unique_constraint</code></a>
    <li><a href="#label-drop_constraint"><code>drop_constraint</code></a>
    <li><a href="#label-set_column_default"><code>set_column_default</code></a>
    <li><a href="#label-set_column_type"><code>set_column_type</code></a>
    <li><a href="#label-set_column_allow_null"><code>set_column_allow_null</code></a>
    <li><a href="#label-set_column_not_null"><code>set_column_not_null</code></a>
    <li><a href="#label-Other+Database+schema+modification+methods">Other <code>Database</code> schema modification methods</a>
    <li><a href="#label-drop_table"><code>drop_table</code></a>
    <li><a href="#label-drop_table-3F"><code>drop_table?</code></a>
    <li><a href="#label-rename_table"><code>rename_table</code></a>
    <li><a href="#label-create_table-21"><code>create_table!</code></a>
    <li><a href="#label-create_table-3F"><code>create_table?</code></a>
    <li><a href="#label-create_view+and+create_or_replace_view"><code>create_view</code> and <code>create_or_replace_view</code></a>
    <li><a href="#label-drop_view"><code>drop_view</code></a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../CHANGELOG.html">CHANGELOG</a>
  
    <li><a href="../MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../README_rdoc.html">README</a>
  
    <li><a href="../doc/CHANGELOG_old.html">CHANGELOG.old</a>
  
    <li><a href="../doc/advanced_associations_rdoc.html">advanced_associations</a>
  
    <li><a href="../doc/association_basics_rdoc.html">association_basics</a>
  
    <li><a href="../doc/bin_sequel_rdoc.html">bin_sequel</a>
  
    <li><a href="../doc/cheat_sheet_rdoc.html">cheat_sheet</a>
  
    <li><a href="../doc/code_order_rdoc.html">code_order</a>
  
    <li><a href="../doc/core_extensions_rdoc.html">core_extensions</a>
  
    <li><a href="../doc/dataset_basics_rdoc.html">dataset_basics</a>
  
    <li><a href="../doc/dataset_filtering_rdoc.html">dataset_filtering</a>
  
    <li><a href="../doc/extensions_rdoc.html">extensions</a>
  
    <li><a href="../doc/fork_safety_rdoc.html">fork_safety</a>
  
    <li><a href="../doc/mass_assignment_rdoc.html">mass_assignment</a>
  
    <li><a href="../doc/migration_rdoc.html">migration</a>
  
    <li><a href="../doc/model_dataset_method_design_rdoc.html">model_dataset_method_design</a>
  
    <li><a href="../doc/model_hooks_rdoc.html">model_hooks</a>
  
    <li><a href="../doc/model_plugins_rdoc.html">model_plugins</a>
  
    <li><a href="../doc/mssql_stored_procedures_rdoc.html">mssql_stored_procedures</a>
  
    <li><a href="../doc/object_model_rdoc.html">object_model</a>
  
    <li><a href="../doc/opening_databases_rdoc.html">opening_databases</a>
  
    <li><a href="../doc/postgresql_rdoc.html">postgresql</a>
  
    <li><a href="../doc/prepared_statements_rdoc.html">prepared_statements</a>
  
    <li><a href="../doc/querying_rdoc.html">querying</a>
  
    <li><a href="../doc/reflection_rdoc.html">reflection</a>
  
    <li><a href="../doc/release_notes/1_0_txt.html">1.0</a>
  
    <li><a href="../doc/release_notes/1_1_txt.html">1.1</a>
  
    <li><a href="../doc/release_notes/1_3_txt.html">1.3</a>
  
    <li><a href="../doc/release_notes/1_4_0_txt.html">1.4.0</a>
  
    <li><a href="../doc/release_notes/1_5_0_txt.html">1.5.0</a>
  
    <li><a href="../doc/release_notes/2_0_0_txt.html">2.0.0</a>
  
    <li><a href="../doc/release_notes/2_1_0_txt.html">2.1.0</a>
  
    <li><a href="../doc/release_notes/2_10_0_txt.html">2.10.0</a>
  
    <li><a href="../doc/release_notes/2_11_0_txt.html">2.11.0</a>
  
    <li><a href="../doc/release_notes/2_12_0_txt.html">2.12.0</a>
  
    <li><a href="../doc/release_notes/2_2_0_txt.html">2.2.0</a>
  
    <li><a href="../doc/release_notes/2_3_0_txt.html">2.3.0</a>
  
    <li><a href="../doc/release_notes/2_4_0_txt.html">2.4.0</a>
  
    <li><a href="../doc/release_notes/2_5_0_txt.html">2.5.0</a>
  
    <li><a href="../doc/release_notes/2_6_0_txt.html">2.6.0</a>
  
    <li><a href="../doc/release_notes/2_7_0_txt.html">2.7.0</a>
  
    <li><a href="../doc/release_notes/2_8_0_txt.html">2.8.0</a>
  
    <li><a href="../doc/release_notes/2_9_0_txt.html">2.9.0</a>
  
    <li><a href="../doc/release_notes/3_0_0_txt.html">3.0.0</a>
  
    <li><a href="../doc/release_notes/3_1_0_txt.html">3.1.0</a>
  
    <li><a href="../doc/release_notes/3_10_0_txt.html">3.10.0</a>
  
    <li><a href="../doc/release_notes/3_11_0_txt.html">3.11.0</a>
  
    <li><a href="../doc/release_notes/3_12_0_txt.html">3.12.0</a>
  
    <li><a href="../doc/release_notes/3_13_0_txt.html">3.13.0</a>
  
    <li><a href="../doc/release_notes/3_14_0_txt.html">3.14.0</a>
  
    <li><a href="../doc/release_notes/3_15_0_txt.html">3.15.0</a>
  
    <li><a href="../doc/release_notes/3_16_0_txt.html">3.16.0</a>
  
    <li><a href="../doc/release_notes/3_17_0_txt.html">3.17.0</a>
  
    <li><a href="../doc/release_notes/3_18_0_txt.html">3.18.0</a>
  
    <li><a href="../doc/release_notes/3_19_0_txt.html">3.19.0</a>
  
    <li><a href="../doc/release_notes/3_2_0_txt.html">3.2.0</a>
  
    <li><a href="../doc/release_notes/3_20_0_txt.html">3.20.0</a>
  
    <li><a href="../doc/release_notes/3_21_0_txt.html">3.21.0</a>
  
    <li><a href="../doc/release_notes/3_22_0_txt.html">3.22.0</a>
  
    <li><a href="../doc/release_notes/3_23_0_txt.html">3.23.0</a>
  
    <li><a href="../doc/release_notes/3_24_0_txt.html">3.24.0</a>
  
    <li><a href="../doc/release_notes/3_25_0_txt.html">3.25.0</a>
  
    <li><a href="../doc/release_notes/3_26_0_txt.html">3.26.0</a>
  
    <li><a href="../doc/release_notes/3_27_0_txt.html">3.27.0</a>
  
    <li><a href="../doc/release_notes/3_28_0_txt.html">3.28.0</a>
  
    <li><a href="../doc/release_notes/3_29_0_txt.html">3.29.0</a>
  
    <li><a href="../doc/release_notes/3_3_0_txt.html">3.3.0</a>
  
    <li><a href="../doc/release_notes/3_30_0_txt.html">3.30.0</a>
  
    <li><a href="../doc/release_notes/3_31_0_txt.html">3.31.0</a>
  
    <li><a href="../doc/release_notes/3_32_0_txt.html">3.32.0</a>
  
    <li><a href="../doc/release_notes/3_33_0_txt.html">3.33.0</a>
  
    <li><a href="../doc/release_notes/3_34_0_txt.html">3.34.0</a>
  
    <li><a href="../doc/release_notes/3_35_0_txt.html">3.35.0</a>
  
    <li><a href="../doc/release_notes/3_36_0_txt.html">3.36.0</a>
  
    <li><a href="../doc/release_notes/3_37_0_txt.html">3.37.0</a>
  
    <li><a href="../doc/release_notes/3_38_0_txt.html">3.38.0</a>
  
    <li><a href="../doc/release_notes/3_39_0_txt.html">3.39.0</a>
  
    <li><a href="../doc/release_notes/3_4_0_txt.html">3.4.0</a>
  
    <li><a href="../doc/release_notes/3_40_0_txt.html">3.40.0</a>
  
    <li><a href="../doc/release_notes/3_41_0_txt.html">3.41.0</a>
  
    <li><a href="../doc/release_notes/3_42_0_txt.html">3.42.0</a>
  
    <li><a href="../doc/release_notes/3_43_0_txt.html">3.43.0</a>
  
    <li><a href="../doc/release_notes/3_44_0_txt.html">3.44.0</a>
  
    <li><a href="../doc/release_notes/3_45_0_txt.html">3.45.0</a>
  
    <li><a href="../doc/release_notes/3_46_0_txt.html">3.46.0</a>
  
    <li><a href="../doc/release_notes/3_47_0_txt.html">3.47.0</a>
  
    <li><a href="../doc/release_notes/3_48_0_txt.html">3.48.0</a>
  
    <li><a href="../doc/release_notes/3_5_0_txt.html">3.5.0</a>
  
    <li><a href="../doc/release_notes/3_6_0_txt.html">3.6.0</a>
  
    <li><a href="../doc/release_notes/3_7_0_txt.html">3.7.0</a>
  
    <li><a href="../doc/release_notes/3_8_0_txt.html">3.8.0</a>
  
    <li><a href="../doc/release_notes/3_9_0_txt.html">3.9.0</a>
  
    <li><a href="../doc/release_notes/4_0_0_txt.html">4.0.0</a>
  
    <li><a href="../doc/release_notes/4_1_0_txt.html">4.1.0</a>
  
    <li><a href="../doc/release_notes/4_10_0_txt.html">4.10.0</a>
  
    <li><a href="../doc/release_notes/4_11_0_txt.html">4.11.0</a>
  
    <li><a href="../doc/release_notes/4_12_0_txt.html">4.12.0</a>
  
    <li><a href="../doc/release_notes/4_13_0_txt.html">4.13.0</a>
  
    <li><a href="../doc/release_notes/4_14_0_txt.html">4.14.0</a>
  
    <li><a href="../doc/release_notes/4_15_0_txt.html">4.15.0</a>
  
    <li><a href="../doc/release_notes/4_16_0_txt.html">4.16.0</a>
  
    <li><a href="../doc/release_notes/4_17_0_txt.html">4.17.0</a>
  
    <li><a href="../doc/release_notes/4_18_0_txt.html">4.18.0</a>
  
    <li><a href="../doc/release_notes/4_19_0_txt.html">4.19.0</a>
  
    <li><a href="../doc/release_notes/4_2_0_txt.html">4.2.0</a>
  
    <li><a href="../doc/release_notes/4_20_0_txt.html">4.20.0</a>
  
    <li><a href="../doc/release_notes/4_21_0_txt.html">4.21.0</a>
  
    <li><a href="../doc/release_notes/4_22_0_txt.html">4.22.0</a>
  
    <li><a href="../doc/release_notes/4_23_0_txt.html">4.23.0</a>
  
    <li><a href="../doc/release_notes/4_24_0_txt.html">4.24.0</a>
  
    <li><a href="../doc/release_notes/4_25_0_txt.html">4.25.0</a>
  
    <li><a href="../doc/release_notes/4_26_0_txt.html">4.26.0</a>
  
    <li><a href="../doc/release_notes/4_27_0_txt.html">4.27.0</a>
  
    <li><a href="../doc/release_notes/4_28_0_txt.html">4.28.0</a>
  
    <li><a href="../doc/release_notes/4_29_0_txt.html">4.29.0</a>
  
    <li><a href="../doc/release_notes/4_3_0_txt.html">4.3.0</a>
  
    <li><a href="../doc/release_notes/4_30_0_txt.html">4.30.0</a>
  
    <li><a href="../doc/release_notes/4_31_0_txt.html">4.31.0</a>
  
    <li><a href="../doc/release_notes/4_32_0_txt.html">4.32.0</a>
  
    <li><a href="../doc/release_notes/4_33_0_txt.html">4.33.0</a>
  
    <li><a href="../doc/release_notes/4_34_0_txt.html">4.34.0</a>
  
    <li><a href="../doc/release_notes/4_35_0_txt.html">4.35.0</a>
  
    <li><a href="../doc/release_notes/4_36_0_txt.html">4.36.0</a>
  
    <li><a href="../doc/release_notes/4_37_0_txt.html">4.37.0</a>
  
    <li><a href="../doc/release_notes/4_38_0_txt.html">4.38.0</a>
  
    <li><a href="../doc/release_notes/4_39_0_txt.html">4.39.0</a>
  
    <li><a href="../doc/release_notes/4_4_0_txt.html">4.4.0</a>
  
    <li><a href="../doc/release_notes/4_40_0_txt.html">4.40.0</a>
  
    <li><a href="../doc/release_notes/4_41_0_txt.html">4.41.0</a>
  
    <li><a href="../doc/release_notes/4_42_0_txt.html">4.42.0</a>
  
    <li><a href="../doc/release_notes/4_43_0_txt.html">4.43.0</a>
  
    <li><a href="../doc/release_notes/4_44_0_txt.html">4.44.0</a>
  
    <li><a href="../doc/release_notes/4_45_0_txt.html">4.45.0</a>
  
    <li><a href="../doc/release_notes/4_46_0_txt.html">4.46.0</a>
  
    <li><a href="../doc/release_notes/4_47_0_txt.html">4.47.0</a>
  
    <li><a href="../doc/release_notes/4_48_0_txt.html">4.48.0</a>
  
    <li><a href="../doc/release_notes/4_49_0_txt.html">4.49.0</a>
  
    <li><a href="../doc/release_notes/4_5_0_txt.html">4.5.0</a>
  
    <li><a href="../doc/release_notes/4_6_0_txt.html">4.6.0</a>
  
    <li><a href="../doc/release_notes/4_7_0_txt.html">4.7.0</a>
  
    <li><a href="../doc/release_notes/4_8_0_txt.html">4.8.0</a>
  
    <li><a href="../doc/release_notes/4_9_0_txt.html">4.9.0</a>
  
    <li><a href="../doc/release_notes/5_0_0_txt.html">5.0.0</a>
  
    <li><a href="../doc/release_notes/5_1_0_txt.html">5.1.0</a>
  
    <li><a href="../doc/release_notes/5_10_0_txt.html">5.10.0</a>
  
    <li><a href="../doc/release_notes/5_11_0_txt.html">5.11.0</a>
  
    <li><a href="../doc/release_notes/5_12_0_txt.html">5.12.0</a>
  
    <li><a href="../doc/release_notes/5_13_0_txt.html">5.13.0</a>
  
    <li><a href="../doc/release_notes/5_14_0_txt.html">5.14.0</a>
  
    <li><a href="../doc/release_notes/5_15_0_txt.html">5.15.0</a>
  
    <li><a href="../doc/release_notes/5_16_0_txt.html">5.16.0</a>
  
    <li><a href="../doc/release_notes/5_17_0_txt.html">5.17.0</a>
  
    <li><a href="../doc/release_notes/5_18_0_txt.html">5.18.0</a>
  
    <li><a href="../doc/release_notes/5_19_0_txt.html">5.19.0</a>
  
    <li><a href="../doc/release_notes/5_2_0_txt.html">5.2.0</a>
  
    <li><a href="../doc/release_notes/5_20_0_txt.html">5.20.0</a>
  
    <li><a href="../doc/release_notes/5_21_0_txt.html">5.21.0</a>
  
    <li><a href="../doc/release_notes/5_22_0_txt.html">5.22.0</a>
  
    <li><a href="../doc/release_notes/5_23_0_txt.html">5.23.0</a>
  
    <li><a href="../doc/release_notes/5_24_0_txt.html">5.24.0</a>
  
    <li><a href="../doc/release_notes/5_25_0_txt.html">5.25.0</a>
  
    <li><a href="../doc/release_notes/5_26_0_txt.html">5.26.0</a>
  
    <li><a href="../doc/release_notes/5_27_0_txt.html">5.27.0</a>
  
    <li><a href="../doc/release_notes/5_28_0_txt.html">5.28.0</a>
  
    <li><a href="../doc/release_notes/5_29_0_txt.html">5.29.0</a>
  
    <li><a href="../doc/release_notes/5_3_0_txt.html">5.3.0</a>
  
    <li><a href="../doc/release_notes/5_30_0_txt.html">5.30.0</a>
  
    <li><a href="../doc/release_notes/5_31_0_txt.html">5.31.0</a>
  
    <li><a href="../doc/release_notes/5_32_0_txt.html">5.32.0</a>
  
    <li><a href="../doc/release_notes/5_33_0_txt.html">5.33.0</a>
  
    <li><a href="../doc/release_notes/5_34_0_txt.html">5.34.0</a>
  
    <li><a href="../doc/release_notes/5_35_0_txt.html">5.35.0</a>
  
    <li><a href="../doc/release_notes/5_36_0_txt.html">5.36.0</a>
  
    <li><a href="../doc/release_notes/5_37_0_txt.html">5.37.0</a>
  
    <li><a href="../doc/release_notes/5_38_0_txt.html">5.38.0</a>
  
    <li><a href="../doc/release_notes/5_39_0_txt.html">5.39.0</a>
  
    <li><a href="../doc/release_notes/5_4_0_txt.html">5.4.0</a>
  
    <li><a href="../doc/release_notes/5_40_0_txt.html">5.40.0</a>
  
    <li><a href="../doc/release_notes/5_41_0_txt.html">5.41.0</a>
  
    <li><a href="../doc/release_notes/5_42_0_txt.html">5.42.0</a>
  
    <li><a href="../doc/release_notes/5_43_0_txt.html">5.43.0</a>
  
    <li><a href="../doc/release_notes/5_44_0_txt.html">5.44.0</a>
  
    <li><a href="../doc/release_notes/5_45_0_txt.html">5.45.0</a>
  
    <li><a href="../doc/release_notes/5_46_0_txt.html">5.46.0</a>
  
    <li><a href="../doc/release_notes/5_47_0_txt.html">5.47.0</a>
  
    <li><a href="../doc/release_notes/5_48_0_txt.html">5.48.0</a>
  
    <li><a href="../doc/release_notes/5_49_0_txt.html">5.49.0</a>
  
    <li><a href="../doc/release_notes/5_5_0_txt.html">5.5.0</a>
  
    <li><a href="../doc/release_notes/5_50_0_txt.html">5.50.0</a>
  
    <li><a href="../doc/release_notes/5_51_0_txt.html">5.51.0</a>
  
    <li><a href="../doc/release_notes/5_52_0_txt.html">5.52.0</a>
  
    <li><a href="../doc/release_notes/5_53_0_txt.html">5.53.0</a>
  
    <li><a href="../doc/release_notes/5_54_0_txt.html">5.54.0</a>
  
    <li><a href="../doc/release_notes/5_55_0_txt.html">5.55.0</a>
  
    <li><a href="../doc/release_notes/5_6_0_txt.html">5.6.0</a>
  
    <li><a href="../doc/release_notes/5_7_0_txt.html">5.7.0</a>
  
    <li><a href="../doc/release_notes/5_8_0_txt.html">5.8.0</a>
  
    <li><a href="../doc/release_notes/5_9_0_txt.html">5.9.0</a>
  
    <li><a href="../doc/schema_modification_rdoc.html">schema_modification</a>
  
    <li><a href="../doc/security_rdoc.html">security</a>
  
    <li><a href="../doc/sharding_rdoc.html">sharding</a>
  
    <li><a href="../doc/sql_rdoc.html">sql</a>
  
    <li><a href="../doc/testing_rdoc.html">testing</a>
  
    <li><a href="../doc/thread_safety_rdoc.html">thread_safety</a>
  
    <li><a href="../doc/transactions_rdoc.html">transactions</a>
  
    <li><a href="../doc/validations_rdoc.html">validations</a>
  
    <li><a href="../doc/virtual_rows_rdoc.html">virtual_rows</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page doc/schema_modification.rdoc">

<h1 id="label-Schema+modification+methods">Schema modification methods<span><a href="#label-Schema+modification+methods">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>Here&#39;s a brief description of the most common schema modification methods:</p>

<h2 id="label-create_table"><code>create_table</code><span><a href="#label-create_table">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><code>create_table</code> is the most common schema modification method, and it&#39;s used for adding new tables to the database.  You provide it with the name of the table as a symbol, as well a block:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Note that if you want a primary key for the table, you need to specify it, <a href="../Sequel.html"><code>Sequel</code></a> does not create one by default.</p>

<h3 id="label-Column+types">Column types<span><a href="#label-Column+types">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Most method calls inside the create_table block will create columns, since <code>method_missing</code> calls <code>column</code>. Columns are generally created by specifying the column type as the method name, followed by the column name symbol to use, and after that any options that should be used. If the method is a ruby class name that <a href="../Sequel.html"><code>Sequel</code></a> recognizes, <a href="../Sequel.html"><code>Sequel</code></a> will transform it into the appropriate type for the given database.  So while you specified <code>String</code>, <a href="../Sequel.html"><code>Sequel</code></a> will actually use <code>varchar</code> or <code>text</code> depending on the underlying database.  Here&#39;s a list of all ruby classes that <a href="../Sequel.html"><code>Sequel</code></a> will convert to database types:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:columns_types</span>) <span class="ruby-keyword">do</span>     <span class="ruby-comment"># common database type used</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:a0</span>                       <span class="ruby-comment"># integer</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:a1</span>                        <span class="ruby-comment"># varchar(255)</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:a2</span>, <span class="ruby-value">size:</span> <span class="ruby-value">50</span>              <span class="ruby-comment"># varchar(50)</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:a3</span>, <span class="ruby-value">fixed:</span> <span class="ruby-keyword">true</span>           <span class="ruby-comment"># char(255)</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:a4</span>, <span class="ruby-value">fixed:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">size:</span> <span class="ruby-value">50</span> <span class="ruby-comment"># char(50)</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:a5</span>, <span class="ruby-value">text:</span> <span class="ruby-keyword">true</span>            <span class="ruby-comment"># text</span>
  <span class="ruby-constant">File</span> <span class="ruby-value">:b</span>                           <span class="ruby-comment"># blob</span>
  <span class="ruby-constant">Fixnum</span> <span class="ruby-value">:c</span>                         <span class="ruby-comment"># integer</span>
  <span class="ruby-constant">Bignum</span> <span class="ruby-value">:d</span>                         <span class="ruby-comment"># bigint</span>
  <span class="ruby-constant">Float</span> <span class="ruby-value">:e</span>                          <span class="ruby-comment"># double precision</span>
  <span class="ruby-constant">BigDecimal</span> <span class="ruby-value">:f</span>                     <span class="ruby-comment"># numeric</span>
  <span class="ruby-constant">BigDecimal</span> <span class="ruby-value">:f2</span>, <span class="ruby-value">size:</span> <span class="ruby-value">10</span>          <span class="ruby-comment"># numeric(10)</span>
  <span class="ruby-constant">BigDecimal</span> <span class="ruby-value">:f3</span>, <span class="ruby-value">size:</span> [<span class="ruby-value">10</span>, <span class="ruby-value">2</span>]     <span class="ruby-comment"># numeric(10, 2)</span>
  <span class="ruby-constant">Date</span> <span class="ruby-value">:g</span>                           <span class="ruby-comment"># date</span>
  <span class="ruby-constant">DateTime</span> <span class="ruby-value">:h</span>                       <span class="ruby-comment"># timestamp</span>
  <span class="ruby-constant">Time</span> <span class="ruby-value">:i</span>                           <span class="ruby-comment"># timestamp</span>
  <span class="ruby-constant">Time</span> <span class="ruby-value">:i2</span>, <span class="ruby-value">only_time:</span> <span class="ruby-keyword">true</span>         <span class="ruby-comment"># time</span>
  <span class="ruby-constant">Numeric</span> <span class="ruby-value">:j</span>                        <span class="ruby-comment"># numeric</span>
  <span class="ruby-constant">TrueClass</span> <span class="ruby-value">:k</span>                      <span class="ruby-comment"># boolean</span>
  <span class="ruby-constant">FalseClass</span> <span class="ruby-value">:l</span>                     <span class="ruby-comment"># boolean</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Note that in addition to the ruby class name, <a href="../Sequel.html"><code>Sequel</code></a> also pays attention to the column options when determining which database type to use.  Also note that for boolean columns, you can use either TrueClass or FalseClass, they are treated the same way (ruby doesn&#39;t have a Boolean class).</p>

<p>Also note that this conversion is only done if you use a supported ruby class name.  In all other cases, <a href="../Sequel.html"><code>Sequel</code></a> uses the type specified verbatim:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:columns_types</span>) <span class="ruby-keyword">do</span>  <span class="ruby-comment"># database type used</span>
  <span class="ruby-identifier">string</span> <span class="ruby-value">:a1</span>                     <span class="ruby-comment"># string</span>
  <span class="ruby-identifier">datetime</span> <span class="ruby-value">:a2</span>                   <span class="ruby-comment"># datetime</span>
  <span class="ruby-identifier">blob</span> <span class="ruby-value">:a3</span>                       <span class="ruby-comment"># blob</span>
  <span class="ruby-identifier">inet</span> <span class="ruby-value">:a4</span>                       <span class="ruby-comment"># inet</span>
<span class="ruby-keyword">end</span>
</pre>

<p>In addition to specifying the types as methods, you can use the <code>column</code> method and specify the types as the second argument, either as ruby classes, symbols, or strings:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:columns_types</span>) <span class="ruby-keyword">do</span>  <span class="ruby-comment"># database type used</span>
  <span class="ruby-identifier">column</span> <span class="ruby-value">:a1</span>, <span class="ruby-value">:string</span>            <span class="ruby-comment"># string</span>
  <span class="ruby-identifier">column</span> <span class="ruby-value">:a2</span>, <span class="ruby-constant">String</span>             <span class="ruby-comment"># varchar(255)</span>
  <span class="ruby-identifier">column</span> <span class="ruby-value">:a3</span>, <span class="ruby-string">&#39;string&#39;</span>           <span class="ruby-comment"># string</span>
  <span class="ruby-identifier">column</span> <span class="ruby-value">:a4</span>, <span class="ruby-value">:datetime</span>          <span class="ruby-comment"># datetime</span>
  <span class="ruby-identifier">column</span> <span class="ruby-value">:a5</span>, <span class="ruby-constant">DateTime</span>           <span class="ruby-comment"># timestamp</span>
  <span class="ruby-identifier">column</span> <span class="ruby-value">:a6</span>, <span class="ruby-string">&#39;timestamp(6)&#39;</span>     <span class="ruby-comment"># timestamp(6)</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you use a ruby class as the type, <a href="../Sequel.html"><code>Sequel</code></a> will try to guess the appropriate type name for the database you are using.  If a symbol or string is used as the type, it is used verbatim as the type name in SQL, with the exception of :Bignum.  Using the symbol :Bignum as a type will use the appropriate 64-bit integer type for the database you are using.</p>

<h3 id="label-Column+options">Column options<span><a href="#label-Column+options">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>When using the type name as method, the third argument is an options hash, and when using the <code>column</code> method, the fourth argument is the options hash.  The following options are supported:</p>
<dl class="rdoc-list note-list"><dt>:default 
<dd>
<p>The default value for the column.</p>
</dd><dt>:index 
<dd>
<p>Create an index on this column. If given a hash, use the hash as the options for the index.</p>
</dd><dt>:null 
<dd>
<p>Mark the column as allowing NULL values (if true), or not allowing NULL values (if false).  If unspecified, will default to whatever the database default is (usually true).</p>
</dd><dt>:primary_key 
<dd>
<p>Mark this column as the primary key.  This is used instead of the primary key method if you want a non-autoincrementing primary key.</p>
</dd><dt>:primary_key_constraint_name 
<dd>
<p>The name to give the primary key constraint.</p>
</dd><dt>:type 
<dd>
<p>Overrides the type given as the method name or a separate argument. Not usually used by <code>column</code> itself, but often by other methods such as <code>primary_key</code> or <code>foreign_key</code>.</p>
</dd><dt>:unique 
<dd>
<p>Mark the column as unique, generally has the same effect as creating a unique index on the column.</p>
</dd><dt>:unique_constraint_name 
<dd>
<p>The name to give the unique constraint.</p>
</dd></dl>

<h3 id="label-Other+methods">Other methods<span><a href="#label-Other+methods">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>In addition to the <code>column</code> method and other methods that create columns, there are other methods that can be used:</p>

<h4 id="label-primary_key"><code>primary_key</code><span><a href="#label-primary_key">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>You&#39;ve seen this one used already.  It&#39;s used to create an autoincrementing integer primary key column.</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a0</span>){<span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>}
</pre>

<p>If you want an autoincrementing 64-bit integer:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a0</span>){<span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>, <span class="ruby-value">type:</span> <span class="ruby-value">:Bignum</span>}
</pre>

<p>If you want to create a primary key column that doesn&#39;t use an autoincrementing integer, you should not use this method.  Instead, you should use the :primary_key option to the <code>column</code> method or type method:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a1</span>){<span class="ruby-constant">Integer</span> <span class="ruby-value">:id</span>, <span class="ruby-value">primary_key:</span> <span class="ruby-keyword">true</span>} <span class="ruby-comment"># Non autoincrementing integer primary key</span>
<span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a2</span>){<span class="ruby-constant">String</span> <span class="ruby-value">:name</span>, <span class="ruby-value">primary_key:</span> <span class="ruby-keyword">true</span>} <span class="ruby-comment"># varchar(255) primary key</span>
</pre>

<p>If you want to create a composite primary key, you should call the <code>primary_key</code> method with an array of column symbols.  You can provide a specific name to use for the primary key constraint via the :name option:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:items</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:group_id</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:position</span>
  <span class="ruby-identifier">primary_key</span> [<span class="ruby-value">:group_id</span>, <span class="ruby-value">:position</span>], <span class="ruby-value">name:</span> <span class="ruby-value">:items_pk</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If provided with an array, <code>primary_key</code> does not create a column, it just sets up the primary key constraint.</p>

<h4 id="label-foreign_key"><code>foreign_key</code><span><a href="#label-foreign_key">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p><code>foreign_key</code> is used to create a foreign key column that references a column in another table (or the same table). It takes the column name as the first argument, the table it references as the second argument, and an options hash as its third argument.  A simple example is:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
  <span class="ruby-identifier">foreign_key</span> <span class="ruby-value">:artist_id</span>, <span class="ruby-value">:artists</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
<span class="ruby-keyword">end</span>
</pre>

<p><code>foreign_key</code> accepts the same options as <code>column</code>.  For example, to have a unique foreign key with varchar(16) type:</p>

<pre class="ruby"><span class="ruby-identifier">foreign_key</span> <span class="ruby-value">:column_name</span>, <span class="ruby-value">:table</span>, <span class="ruby-value">unique:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">type:</span> <span class="ruby-string">&#39;varchar(16)&#39;</span>
</pre>

<p><code>foreign_key</code> also accepts some specific options:</p>
<dl class="rdoc-list note-list"><dt>:deferrable 
<dd>
<p>Makes the foreign key constraint checks deferrable, so they aren&#39;t checked until the end of the transaction.</p>
</dd><dt>:foreign_key_constraint_name 
<dd>
<p>The name to give the foreign key constraint.</p>
</dd><dt>:key 
<dd>
<p>The column in the associated table that this column references.  Unnecessary if this column references the primary key of the associated table, at least on most databases.</p>
</dd><dt>:on_delete 
<dd>
<p>Specify the behavior of this foreign key column when the row with the primary key it references is deleted, can be :restrict, :cascade, :set_null, or :set_default. You can also use a string, which is used literally.</p>
</dd><dt>:on_update 
<dd>
<p>Specify the behavior of this foreign key column when the row with the primary key it references modifies the value of the primary key.  Takes the same options as :on_delete.</p>
</dd></dl>

<p>Like <code>primary_key</code>, if you provide <code>foreign_key</code> with an array of symbols, it will not create a column, but create a foreign key constraint:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:location</span>
  <span class="ruby-identifier">primary_key</span> [<span class="ruby-value">:name</span>, <span class="ruby-value">:location</span>]
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">create_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:artist_name</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:artist_location</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
  <span class="ruby-identifier">foreign_key</span> [<span class="ruby-value">:artist_name</span>, <span class="ruby-value">:artist_location</span>], <span class="ruby-value">:artists</span>
<span class="ruby-keyword">end</span>
</pre>

<p>When using an array of symbols, you can also provide a :name option to name the constraint:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:artist_name</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:artist_location</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
  <span class="ruby-identifier">foreign_key</span> [<span class="ruby-value">:artist_name</span>, <span class="ruby-value">:artist_location</span>], <span class="ruby-value">:artists</span>, <span class="ruby-value">name:</span> <span class="ruby-string">&#39;albums_artist_name_location_fkey&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you want to add a foreign key for a single column with a named constraint, you must use the array form with a single symbol:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:artist_id</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
  <span class="ruby-identifier">foreign_key</span> [<span class="ruby-value">:artist_id</span>], <span class="ruby-value">:artists</span>, <span class="ruby-value">name:</span> <span class="ruby-string">&#39;albums_artist_id_fkey&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<h4 id="label-index"><code>index</code><span><a href="#label-index">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p><code>index</code> creates indexes on the table.  For single columns, calling index is the same as using the <code>:index</code> option when creating the column:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a</span>){<span class="ruby-constant">Integer</span> <span class="ruby-value">:id</span>, <span class="ruby-value">index:</span> <span class="ruby-keyword">true</span>}
<span class="ruby-comment"># Same as:</span>
<span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:id</span>
  <span class="ruby-identifier">index</span> <span class="ruby-value">:id</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a</span>){<span class="ruby-constant">Integer</span> <span class="ruby-value">:id</span>, <span class="ruby-value">index:</span> {<span class="ruby-value">unique:</span> <span class="ruby-keyword">true</span>}}
<span class="ruby-comment"># Same as:</span>
<span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:id</span>
  <span class="ruby-identifier">index</span> <span class="ruby-value">:id</span>, <span class="ruby-value">unique:</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Similar to the <code>primary_key</code> and <code>foreign_key</code> methods, calling <code>index</code> with an array of symbols will create a multiple column index:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
  <span class="ruby-identifier">foreign_key</span> <span class="ruby-value">:artist_id</span>, <span class="ruby-value">:artists</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:position</span>
  <span class="ruby-identifier">index</span> [<span class="ruby-value">:artist_id</span>, <span class="ruby-value">:position</span>]
<span class="ruby-keyword">end</span>
</pre>

<p>The <code>index</code> method also accepts some options:</p>
<dl class="rdoc-list note-list"><dt>:name 
<dd>
<p>The name of the index (generated based on the table and column names if not provided).</p>
</dd><dt>:type 
<dd>
<p>The type of index to use (only supported by some databases)</p>
</dd><dt>:unique 
<dd>
<p>Make the index unique, so duplicate values are not allowed.</p>
</dd><dt>:where 
<dd>
<p>Create a partial index (only supported by some databases)</p>
</dd></dl>

<h4 id="label-unique"><code>unique</code><span><a href="#label-unique">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>unique</code> method creates a unique constraint on the table.  A unique constraint generally operates identically to a unique index, so the following three <code>create_table</code> blocks are pretty much identical:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a</span>){<span class="ruby-constant">Integer</span> <span class="ruby-value">:a</span>, <span class="ruby-value">unique:</span> <span class="ruby-keyword">true</span>}

<span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:a</span>
  <span class="ruby-identifier">index</span> <span class="ruby-value">:a</span>, <span class="ruby-value">unique:</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:a</span>
  <span class="ruby-identifier">unique</span> <span class="ruby-value">:a</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Just like <code>index</code>, <code>unique</code> can set up a multiple column unique constraint, where the combination of the columns must be unique:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:a</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:a</span>
  <span class="ruby-constant">Integer</span> <span class="ruby-value">:b</span>
  <span class="ruby-identifier">unique</span> [<span class="ruby-value">:a</span>, <span class="ruby-value">:b</span>]
<span class="ruby-keyword">end</span>
</pre>

<h4 id="label-full_text_index+and+spatial_index"><code>full_text_index</code> and <code>spatial_index</code><span><a href="#label-full_text_index+and+spatial_index">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Both of these create specialized index types supported by some databases.  They both take the same options as <code>index</code>.</p>

<h4 id="label-constraint"><code>constraint</code><span><a href="#label-constraint">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p><code>constraint</code> creates a named table constraint:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
  <span class="ruby-identifier">constraint</span>(<span class="ruby-value">:name_min_length</span>){<span class="ruby-identifier">char_length</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>}
<span class="ruby-keyword">end</span>
</pre>

<p>Instead of using a block, you can use arguments that will be handled similarly to <code>Dataset#where</code>:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
  <span class="ruby-identifier">constraint</span>(<span class="ruby-value">:name_length_range</span>, <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">function</span>(<span class="ruby-value">:char_length</span>, <span class="ruby-value">:name</span>)<span class="ruby-operator">=&gt;</span><span class="ruby-value">3</span><span class="ruby-operator">..</span><span class="ruby-value">50</span>)
<span class="ruby-keyword">end</span>
</pre>

<h4 id="label-check"><code>check</code><span><a href="#label-check">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p><code>check</code> operates just like <code>constraint</code>, except that it doesn&#39;t take a name and it creates an unnamed constraint:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
  <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>
  <span class="ruby-identifier">check</span>{<span class="ruby-identifier">char_length</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>}
<span class="ruby-keyword">end</span>
</pre>

<p>It&#39;s recommended that you use the <code>constraint</code> method and provide a name for the constraint, as that makes it easier to drop the constraint later if necessary.</p>

<h2 id="label-create_join_table"><code>create_join_table</code><span><a href="#label-create_join_table">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><code>create_join_table</code> is a shortcut that you can use to create simple many-to-many join tables:</p>

<pre class="ruby"><span class="ruby-identifier">create_join_table</span>(<span class="ruby-value">artist_id:</span> <span class="ruby-value">:artists</span>, <span class="ruby-value">album_id:</span> <span class="ruby-value">:albums</span>)
</pre>

<p>which expands to:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:albums_artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">foreign_key</span> <span class="ruby-value">:album_id</span>, <span class="ruby-value">:albums</span>
  <span class="ruby-identifier">foreign_key</span> <span class="ruby-value">:artist_id</span>, <span class="ruby-value">:artists</span>
  <span class="ruby-identifier">primary_key</span> [<span class="ruby-value">:album_id</span>, <span class="ruby-value">:artist_id</span>]
  <span class="ruby-identifier">index</span> [<span class="ruby-value">:artist_id</span>, <span class="ruby-value">:album_id</span>]
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-create_table+-3Aas"><code>create_table :as</code><span><a href="#label-create_table+-3Aas">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>To create a table from the result of a SELECT query, instead of passing a block to <code>create_table</code>, provide a dataset to the :as option:</p>

<pre class="ruby"><span class="ruby-identifier">create_table</span>(<span class="ruby-value">:older_items</span>, <span class="ruby-value">as:</span> <span class="ruby-constant">DB</span>[<span class="ruby-value">:items</span>].<span class="ruby-identifier">where</span>{<span class="ruby-identifier">updated_at</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">6</span>})
</pre>

<h2 id="label-alter_table"><code>alter_table</code><span><a href="#label-alter_table">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><code>alter_table</code> is used to alter existing tables, changing their columns, indexes, or constraints.  It it used just like <code>create_table</code>, accepting a block which is instance_evaled, and providing its own methods:</p>

<h3 id="label-add_column"><code>add_column</code><span><a href="#label-add_column">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>One of the most common methods, <code>add_column</code> is used to add a column to the table. Its API is similar to that of <code>create_table</code>&#39;s <code>column</code> method, where the first argument is the column name, the second is the type, and the third is an options hash:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_column</span> <span class="ruby-value">:copies_sold</span>, <span class="ruby-constant">Integer</span>, <span class="ruby-value">default:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-drop_column"><code>drop_column</code><span><a href="#label-drop_column">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>As you may expect, <code>drop_column</code> takes a column name and drops the column.  It&#39;s often used in the <code>down</code> block of a migration to drop a column added in an <code>up</code> block:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">drop_column</span> <span class="ruby-value">:copies_sold</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-rename_column"><code>rename_column</code><span><a href="#label-rename_column">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>rename_column</code> is used to rename a column.  It takes the old column name as the first argument, and the new column name as the second argument:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">rename_column</span> <span class="ruby-value">:copies_sold</span>, <span class="ruby-value">:total_sales</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-add_primary_key"><code>add_primary_key</code><span><a href="#label-add_primary_key">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>If you forgot to include a primary key on the table, and want to add one later, you can use <code>add_primary_key</code>.  A common use of this is to make many_to_many association join tables into real models:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums_artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_primary_key</span> <span class="ruby-value">:id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Just like <code>create_table</code>&#39;s <code>primary_key</code> method, if you provide an array of symbols, <a href="../Sequel.html"><code>Sequel</code></a> will not add a column, but will add a composite primary key constraint:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums_artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_primary_key</span> [<span class="ruby-value">:album_id</span>, <span class="ruby-value">:artist_id</span>]
<span class="ruby-keyword">end</span>
</pre>

<p>It is possible to specify a name for the primary key constraint: via the :name option:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums_artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_primary_key</span> [<span class="ruby-value">:album_id</span>, <span class="ruby-value">:artist_id</span>], <span class="ruby-value">:name</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:albums_artists_pkey</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you just want to take an existing single column and make it a primary key, call <code>add_primary_key</code> with an array with a single symbol:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_primary_key</span> [<span class="ruby-value">:id</span>]
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-add_foreign_key"><code>add_foreign_key</code><span><a href="#label-add_foreign_key">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>add_foreign_key</code> can be used to add a new foreign key column or constraint to a table. Like <code>add_primary_key</code>, if you provide it with a symbol as the first argument, it creates a new column:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_foreign_key</span> <span class="ruby-value">:artist_id</span>, <span class="ruby-value">:artists</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you want to add a new foreign key constraint to an existing column, you provide an array with a single element:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_foreign_key</span> [<span class="ruby-value">:artist_id</span>], <span class="ruby-value">:artists</span>
<span class="ruby-keyword">end</span>
</pre>

<p>It&#39;s encouraged to provide a name when adding the constraint, via the :foreign_key_constraint_name option if adding the column and the constraint:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_foreign_key</span> <span class="ruby-value">:artist_id</span>, <span class="ruby-value">:artists</span>, <span class="ruby-value">foreign_key_constraint_name:</span> <span class="ruby-value">:albums_artist_id_fkey</span>
<span class="ruby-keyword">end</span>
</pre>

<p>or via the :name option if just adding the constraint:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_foreign_key</span> [<span class="ruby-value">:artist_id</span>], <span class="ruby-value">:artists</span>, <span class="ruby-value">name:</span> <span class="ruby-value">:albums_artist_id_fkey</span>
<span class="ruby-keyword">end</span>
</pre>

<p>To set up a multiple column foreign key constraint, use an array with multiple column symbols:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_foreign_key</span> [<span class="ruby-value">:artist_name</span>, <span class="ruby-value">:artist_location</span>], <span class="ruby-value">:artists</span>, <span class="ruby-value">name:</span> <span class="ruby-value">:albums_artist_name_location_fkey</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-drop_foreign_key"><code>drop_foreign_key</code><span><a href="#label-drop_foreign_key">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>drop_foreign_key</code> is used to drop foreign keys from tables.  If you provide a symbol as the first argument, it drops both the foreign key constraint and the column:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">drop_foreign_key</span> <span class="ruby-value">:artist_id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you want to just drop the foreign key constraint without dropping the column, use an array.  It&#39;s encouraged to use the :name option to provide the constraint name to drop, though on some databases <a href="../Sequel.html"><code>Sequel</code></a> may be able to find the name through introspection:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">drop_foreign_key</span> [<span class="ruby-value">:artist_id</span>], <span class="ruby-value">name:</span> <span class="ruby-value">:albums_artist_id_fkey</span>
<span class="ruby-keyword">end</span>
</pre>

<p>An array is also used to drop a composite foreign key constraint:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">drop_foreign_key</span> [<span class="ruby-value">:artist_name</span>, <span class="ruby-value">:artist_location</span>], <span class="ruby-value">name:</span> <span class="ruby-value">:albums_artist_name_location_fkey</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you do not provide a :name option and <a href="../Sequel.html"><code>Sequel</code></a> is not able to determine the name to use, it will probably raise a <a href="../Sequel/Error.html"><code>Sequel::Error</code></a> exception.</p>

<h3 id="label-add_index"><code>add_index</code><span><a href="#label-add_index">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>add_index</code> works just like <code>create_table</code>&#39;s <code>index</code> method, creating a new index on the table:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_index</span> <span class="ruby-value">:artist_id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>It accepts the same options as <code>create_table</code>&#39;s <code>index</code> method, and you can set up a multiple column index using an array:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums_artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_index</span> [<span class="ruby-value">:album_id</span>, <span class="ruby-value">:artist_id</span>], <span class="ruby-value">unique:</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-drop_index"><code>drop_index</code><span><a href="#label-drop_index">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>As you may expect, <code>drop_index</code> drops an existing index:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">drop_index</span> <span class="ruby-value">:artist_id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Just like <code>drop_column</code>, it is often used in the <code>down</code> block of a migration.</p>

<p>To drop an index with a specific name, use the <code>:name</code> option:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">drop_index</span> <span class="ruby-value">:artist_id</span>, <span class="ruby-value">name:</span> <span class="ruby-value">:artists_id_index</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-add_full_text_index-2C+add_spatial_index"><code>add_full_text_index</code>, <code>add_spatial_index</code><span><a href="#label-add_full_text_index-2C+add_spatial_index">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Corresponding to <code>create_table</code>&#39;s <code>full_text_index</code> and <code>spatial_index</code> methods, these two methods create new indexes on the table.</p>

<h3 id="label-add_constraint"><code>add_constraint</code><span><a href="#label-add_constraint">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This adds a named constraint to the table, similar to <code>create_table</code>&#39;s <code>constraint</code> method:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_constraint</span>(<span class="ruby-value">:name_min_length</span>){<span class="ruby-identifier">char_length</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>}
<span class="ruby-keyword">end</span>
</pre>

<p>There is no method to add an unnamed constraint, but you can pass <code>nil</code> as the first argument of <code>add_constraint</code> to do so.  However, it&#39;s not recommended to do that as it is more difficult to drop such a constraint.</p>

<h3 id="label-add_unique_constraint"><code>add_unique_constraint</code><span><a href="#label-add_unique_constraint">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This adds a unique constraint to the table, similar to <code>create_table</code>&#39;s <code>unique</code> method.  This usually has the same effect as adding a unique index.</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_unique_constraint</span> [<span class="ruby-value">:artist_id</span>, <span class="ruby-value">:name</span>]
<span class="ruby-keyword">end</span>
</pre>

<p>You can also specify a name via the :name option when adding the constraint:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">add_unique_constraint</span> [<span class="ruby-value">:artist_id</span>, <span class="ruby-value">:name</span>], <span class="ruby-value">name:</span> <span class="ruby-value">:albums_artist_id_name_ukey</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-drop_constraint"><code>drop_constraint</code><span><a href="#label-drop_constraint">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This method drops an existing named constraint:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">drop_constraint</span>(<span class="ruby-value">:name_min_length</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>There is no database independent method to drop an unnamed constraint.  Generally, the database will give it a name automatically, and you will have to figure out what it is. For that reason, you should not add unnamed constraints that you ever might need to remove.</p>

<p>On some databases, you must specify the type of constraint via a <code>:type</code> option:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">drop_constraint</span>(<span class="ruby-value">:albums_pk</span>, <span class="ruby-value">type:</span> <span class="ruby-value">:primary_key</span>)
  <span class="ruby-identifier">drop_constraint</span>(<span class="ruby-value">:albums_fk</span>, <span class="ruby-value">type:</span> <span class="ruby-value">:foreign_key</span>)
  <span class="ruby-identifier">drop_constraint</span>(<span class="ruby-value">:albums_uk</span>, <span class="ruby-value">type:</span> <span class="ruby-value">:unique</span>)
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-set_column_default"><code>set_column_default</code><span><a href="#label-set_column_default">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This modifies the default value of a column:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">set_column_default</span> <span class="ruby-value">:copies_sold</span>, <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span>
</pre>

<p>To remove a default value for a column, use <code>nil</code> as the value:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">set_column_default</span> <span class="ruby-value">:copies_sold</span>, <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-set_column_type"><code>set_column_type</code><span><a href="#label-set_column_type">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This modifies a column&#39;s type.  Most databases will attempt to convert existing values in the columns to the new type:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">set_column_type</span> <span class="ruby-value">:copies_sold</span>, <span class="ruby-value">:Bignum</span>
<span class="ruby-keyword">end</span>
</pre>

<p>You can specify the type as a string or symbol, in which case it is used verbatim, or as a supported ruby class or the :Bignum symbol, in which case it gets converted to an appropriate database type.</p>

<h3 id="label-set_column_allow_null"><code>set_column_allow_null</code><span><a href="#label-set_column_allow_null">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This allows you to set the column as allowing NULL values:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">set_column_allow_null</span> <span class="ruby-value">:artist_id</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-set_column_not_null"><code>set_column_not_null</code><span><a href="#label-set_column_not_null">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This allows you to set the column as not allowing NULL values:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:albums</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">set_column_not_null</span> <span class="ruby-value">:artist_id</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Other+Database+schema+modification+methods">Other <code>Database</code> schema modification methods<span><a href="#label-Other+Database+schema+modification+methods">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><code>Sequel::Database</code> has many schema modification instance methods, most of which are shortcuts to the same methods in <code>alter_table</code>.  The following <code>Database</code> instance methods just call <code>alter_table</code> with a block that calls the method with the same name inside the <code>alter_table</code> block with all arguments after the first argument (which is used as the table name):</p>
<ul><li>
<p><code>add_column</code></p>
</li><li>
<p><code>drop_column</code></p>
</li><li>
<p><code>rename_column</code></p>
</li><li>
<p><code>add_index</code></p>
</li><li>
<p><code>drop_index</code></p>
</li><li>
<p><code>set_column_default</code></p>
</li><li>
<p><code>set_column_type</code></p>
</li></ul>

<p>For example, the following two method calls do the same thing:</p>

<pre class="ruby"><span class="ruby-identifier">alter_table</span>(<span class="ruby-value">:artists</span>){<span class="ruby-identifier">add_column</span> <span class="ruby-value">:copies_sold</span>, <span class="ruby-constant">Integer</span>}
<span class="ruby-identifier">add_column</span> <span class="ruby-value">:artists</span>, <span class="ruby-value">:copies_sold</span>, <span class="ruby-constant">Integer</span>
</pre>

<p>There are some other schema modification methods that have no <code>alter_table</code> counterpart:</p>

<h3 id="label-drop_table"><code>drop_table</code><span><a href="#label-drop_table">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>drop_table</code> takes multiple arguments and treats all arguments as a table name to drop:</p>

<pre class="ruby"><span class="ruby-identifier">drop_table</span>(<span class="ruby-value">:albums_artists</span>, <span class="ruby-value">:albums</span>, <span class="ruby-value">:artists</span>)
</pre>

<p>Note that when dropping tables, you may need to drop them in a specific order if you are using foreign keys and the database is enforcing referential integrity.  In general, you need to drop the tables containing the foreign keys before the tables containing the primary keys they reference.</p>

<h3 id="label-drop_table-3F"><code>drop_table?</code><span><a href="#label-drop_table-3F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>drop_table?</code> is similar to drop_table, except that it only drops the table if the table already exists.  On some databases, it uses <code>IF NOT EXISTS</code>, on others it does a separate query to check for existence.</p>

<h3 id="label-rename_table"><code>rename_table</code><span><a href="#label-rename_table">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>You can rename an existing table using <code>rename_table</code>.  Like <code>rename_column</code>, the first argument is the current name, and the second is the new name:</p>

<pre class="ruby"><span class="ruby-identifier">rename_table</span>(<span class="ruby-value">:artist</span>, <span class="ruby-value">:artists</span>)
</pre>

<h3 id="label-create_table-21"><code>create_table!</code><span><a href="#label-create_table-21">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>create_table!</code> drops the table if it exists before attempting to create it, so:</p>

<pre class="ruby"><span class="ruby-identifier">create_table!</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>is the same as:</p>

<pre class="ruby"><span class="ruby-identifier">drop_table?</span>(<span class="ruby-value">:artists</span>)
<span class="ruby-identifier">create_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-create_table-3F"><code>create_table?</code><span><a href="#label-create_table-3F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>create_table?</code> only creates the table if it does not already exist, so:</p>

<pre class="ruby"><span class="ruby-identifier">create_table?</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>is the same as:</p>

<pre class="ruby"><span class="ruby-keyword">unless</span> <span class="ruby-identifier">table_exists?</span>(<span class="ruby-value">:artists</span>)
  <span class="ruby-identifier">create_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-create_view+and+create_or_replace_view"><code>create_view</code> and <code>create_or_replace_view</code><span><a href="#label-create_view+and+create_or_replace_view">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>These can be used to create views.  The difference between them is that <code>create_or_replace_view</code> will unconditionally replace an existing view of the same name, while <code>create_view</code> will probably raise an error.  Both methods take the name as the first argument, and either an string or a dataset as the second argument:</p>

<pre class="ruby"><span class="ruby-identifier">create_view</span>(<span class="ruby-value">:gold_albums</span>, <span class="ruby-constant">DB</span>[<span class="ruby-value">:albums</span>].<span class="ruby-identifier">where</span>{<span class="ruby-identifier">copies_sold</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">500000</span>})
<span class="ruby-identifier">create_or_replace_view</span>(<span class="ruby-value">:gold_albums</span>, <span class="ruby-string">&quot;SELECT * FROM albums WHERE copies_sold &gt; 500000&quot;</span>)
</pre>

<h3 id="label-drop_view"><code>drop_view</code><span><a href="#label-drop_view">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>drop_view</code> drops existing views.  Just like <code>drop_table</code>, it can accept multiple arguments:</p>

<pre class="ruby"><span class="ruby-identifier">drop_view</span>(<span class="ruby-value">:gold_albums</span>, <span class="ruby-value">:platinum_albums</span>)
</pre>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

