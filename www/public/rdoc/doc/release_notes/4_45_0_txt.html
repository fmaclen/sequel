<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>4.45.0 - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Deprecated+Features">Deprecated Features</a>
    <li><a href="#label-New+Features">New Features</a>
    <li><a href="#label-Other+Improvements">Other Improvements</a>
    <li><a href="#label-Backwards+Compatibility">Backwards Compatibility</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../CHANGELOG.html">CHANGELOG</a>
  
    <li><a href="../../MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../README_rdoc.html">README</a>
  
    <li><a href="../../doc/CHANGELOG_old.html">CHANGELOG.old</a>
  
    <li><a href="../../doc/advanced_associations_rdoc.html">advanced_associations</a>
  
    <li><a href="../../doc/association_basics_rdoc.html">association_basics</a>
  
    <li><a href="../../doc/bin_sequel_rdoc.html">bin_sequel</a>
  
    <li><a href="../../doc/cheat_sheet_rdoc.html">cheat_sheet</a>
  
    <li><a href="../../doc/code_order_rdoc.html">code_order</a>
  
    <li><a href="../../doc/core_extensions_rdoc.html">core_extensions</a>
  
    <li><a href="../../doc/dataset_basics_rdoc.html">dataset_basics</a>
  
    <li><a href="../../doc/dataset_filtering_rdoc.html">dataset_filtering</a>
  
    <li><a href="../../doc/extensions_rdoc.html">extensions</a>
  
    <li><a href="../../doc/fork_safety_rdoc.html">fork_safety</a>
  
    <li><a href="../../doc/mass_assignment_rdoc.html">mass_assignment</a>
  
    <li><a href="../../doc/migration_rdoc.html">migration</a>
  
    <li><a href="../../doc/model_dataset_method_design_rdoc.html">model_dataset_method_design</a>
  
    <li><a href="../../doc/model_hooks_rdoc.html">model_hooks</a>
  
    <li><a href="../../doc/model_plugins_rdoc.html">model_plugins</a>
  
    <li><a href="../../doc/mssql_stored_procedures_rdoc.html">mssql_stored_procedures</a>
  
    <li><a href="../../doc/object_model_rdoc.html">object_model</a>
  
    <li><a href="../../doc/opening_databases_rdoc.html">opening_databases</a>
  
    <li><a href="../../doc/postgresql_rdoc.html">postgresql</a>
  
    <li><a href="../../doc/prepared_statements_rdoc.html">prepared_statements</a>
  
    <li><a href="../../doc/querying_rdoc.html">querying</a>
  
    <li><a href="../../doc/reflection_rdoc.html">reflection</a>
  
    <li><a href="../../doc/release_notes/1_0_txt.html">1.0</a>
  
    <li><a href="../../doc/release_notes/1_1_txt.html">1.1</a>
  
    <li><a href="../../doc/release_notes/1_3_txt.html">1.3</a>
  
    <li><a href="../../doc/release_notes/1_4_0_txt.html">1.4.0</a>
  
    <li><a href="../../doc/release_notes/1_5_0_txt.html">1.5.0</a>
  
    <li><a href="../../doc/release_notes/2_0_0_txt.html">2.0.0</a>
  
    <li><a href="../../doc/release_notes/2_1_0_txt.html">2.1.0</a>
  
    <li><a href="../../doc/release_notes/2_10_0_txt.html">2.10.0</a>
  
    <li><a href="../../doc/release_notes/2_11_0_txt.html">2.11.0</a>
  
    <li><a href="../../doc/release_notes/2_12_0_txt.html">2.12.0</a>
  
    <li><a href="../../doc/release_notes/2_2_0_txt.html">2.2.0</a>
  
    <li><a href="../../doc/release_notes/2_3_0_txt.html">2.3.0</a>
  
    <li><a href="../../doc/release_notes/2_4_0_txt.html">2.4.0</a>
  
    <li><a href="../../doc/release_notes/2_5_0_txt.html">2.5.0</a>
  
    <li><a href="../../doc/release_notes/2_6_0_txt.html">2.6.0</a>
  
    <li><a href="../../doc/release_notes/2_7_0_txt.html">2.7.0</a>
  
    <li><a href="../../doc/release_notes/2_8_0_txt.html">2.8.0</a>
  
    <li><a href="../../doc/release_notes/2_9_0_txt.html">2.9.0</a>
  
    <li><a href="../../doc/release_notes/3_0_0_txt.html">3.0.0</a>
  
    <li><a href="../../doc/release_notes/3_1_0_txt.html">3.1.0</a>
  
    <li><a href="../../doc/release_notes/3_10_0_txt.html">3.10.0</a>
  
    <li><a href="../../doc/release_notes/3_11_0_txt.html">3.11.0</a>
  
    <li><a href="../../doc/release_notes/3_12_0_txt.html">3.12.0</a>
  
    <li><a href="../../doc/release_notes/3_13_0_txt.html">3.13.0</a>
  
    <li><a href="../../doc/release_notes/3_14_0_txt.html">3.14.0</a>
  
    <li><a href="../../doc/release_notes/3_15_0_txt.html">3.15.0</a>
  
    <li><a href="../../doc/release_notes/3_16_0_txt.html">3.16.0</a>
  
    <li><a href="../../doc/release_notes/3_17_0_txt.html">3.17.0</a>
  
    <li><a href="../../doc/release_notes/3_18_0_txt.html">3.18.0</a>
  
    <li><a href="../../doc/release_notes/3_19_0_txt.html">3.19.0</a>
  
    <li><a href="../../doc/release_notes/3_2_0_txt.html">3.2.0</a>
  
    <li><a href="../../doc/release_notes/3_20_0_txt.html">3.20.0</a>
  
    <li><a href="../../doc/release_notes/3_21_0_txt.html">3.21.0</a>
  
    <li><a href="../../doc/release_notes/3_22_0_txt.html">3.22.0</a>
  
    <li><a href="../../doc/release_notes/3_23_0_txt.html">3.23.0</a>
  
    <li><a href="../../doc/release_notes/3_24_0_txt.html">3.24.0</a>
  
    <li><a href="../../doc/release_notes/3_25_0_txt.html">3.25.0</a>
  
    <li><a href="../../doc/release_notes/3_26_0_txt.html">3.26.0</a>
  
    <li><a href="../../doc/release_notes/3_27_0_txt.html">3.27.0</a>
  
    <li><a href="../../doc/release_notes/3_28_0_txt.html">3.28.0</a>
  
    <li><a href="../../doc/release_notes/3_29_0_txt.html">3.29.0</a>
  
    <li><a href="../../doc/release_notes/3_3_0_txt.html">3.3.0</a>
  
    <li><a href="../../doc/release_notes/3_30_0_txt.html">3.30.0</a>
  
    <li><a href="../../doc/release_notes/3_31_0_txt.html">3.31.0</a>
  
    <li><a href="../../doc/release_notes/3_32_0_txt.html">3.32.0</a>
  
    <li><a href="../../doc/release_notes/3_33_0_txt.html">3.33.0</a>
  
    <li><a href="../../doc/release_notes/3_34_0_txt.html">3.34.0</a>
  
    <li><a href="../../doc/release_notes/3_35_0_txt.html">3.35.0</a>
  
    <li><a href="../../doc/release_notes/3_36_0_txt.html">3.36.0</a>
  
    <li><a href="../../doc/release_notes/3_37_0_txt.html">3.37.0</a>
  
    <li><a href="../../doc/release_notes/3_38_0_txt.html">3.38.0</a>
  
    <li><a href="../../doc/release_notes/3_39_0_txt.html">3.39.0</a>
  
    <li><a href="../../doc/release_notes/3_4_0_txt.html">3.4.0</a>
  
    <li><a href="../../doc/release_notes/3_40_0_txt.html">3.40.0</a>
  
    <li><a href="../../doc/release_notes/3_41_0_txt.html">3.41.0</a>
  
    <li><a href="../../doc/release_notes/3_42_0_txt.html">3.42.0</a>
  
    <li><a href="../../doc/release_notes/3_43_0_txt.html">3.43.0</a>
  
    <li><a href="../../doc/release_notes/3_44_0_txt.html">3.44.0</a>
  
    <li><a href="../../doc/release_notes/3_45_0_txt.html">3.45.0</a>
  
    <li><a href="../../doc/release_notes/3_46_0_txt.html">3.46.0</a>
  
    <li><a href="../../doc/release_notes/3_47_0_txt.html">3.47.0</a>
  
    <li><a href="../../doc/release_notes/3_48_0_txt.html">3.48.0</a>
  
    <li><a href="../../doc/release_notes/3_5_0_txt.html">3.5.0</a>
  
    <li><a href="../../doc/release_notes/3_6_0_txt.html">3.6.0</a>
  
    <li><a href="../../doc/release_notes/3_7_0_txt.html">3.7.0</a>
  
    <li><a href="../../doc/release_notes/3_8_0_txt.html">3.8.0</a>
  
    <li><a href="../../doc/release_notes/3_9_0_txt.html">3.9.0</a>
  
    <li><a href="../../doc/release_notes/4_0_0_txt.html">4.0.0</a>
  
    <li><a href="../../doc/release_notes/4_1_0_txt.html">4.1.0</a>
  
    <li><a href="../../doc/release_notes/4_10_0_txt.html">4.10.0</a>
  
    <li><a href="../../doc/release_notes/4_11_0_txt.html">4.11.0</a>
  
    <li><a href="../../doc/release_notes/4_12_0_txt.html">4.12.0</a>
  
    <li><a href="../../doc/release_notes/4_13_0_txt.html">4.13.0</a>
  
    <li><a href="../../doc/release_notes/4_14_0_txt.html">4.14.0</a>
  
    <li><a href="../../doc/release_notes/4_15_0_txt.html">4.15.0</a>
  
    <li><a href="../../doc/release_notes/4_16_0_txt.html">4.16.0</a>
  
    <li><a href="../../doc/release_notes/4_17_0_txt.html">4.17.0</a>
  
    <li><a href="../../doc/release_notes/4_18_0_txt.html">4.18.0</a>
  
    <li><a href="../../doc/release_notes/4_19_0_txt.html">4.19.0</a>
  
    <li><a href="../../doc/release_notes/4_2_0_txt.html">4.2.0</a>
  
    <li><a href="../../doc/release_notes/4_20_0_txt.html">4.20.0</a>
  
    <li><a href="../../doc/release_notes/4_21_0_txt.html">4.21.0</a>
  
    <li><a href="../../doc/release_notes/4_22_0_txt.html">4.22.0</a>
  
    <li><a href="../../doc/release_notes/4_23_0_txt.html">4.23.0</a>
  
    <li><a href="../../doc/release_notes/4_24_0_txt.html">4.24.0</a>
  
    <li><a href="../../doc/release_notes/4_25_0_txt.html">4.25.0</a>
  
    <li><a href="../../doc/release_notes/4_26_0_txt.html">4.26.0</a>
  
    <li><a href="../../doc/release_notes/4_27_0_txt.html">4.27.0</a>
  
    <li><a href="../../doc/release_notes/4_28_0_txt.html">4.28.0</a>
  
    <li><a href="../../doc/release_notes/4_29_0_txt.html">4.29.0</a>
  
    <li><a href="../../doc/release_notes/4_3_0_txt.html">4.3.0</a>
  
    <li><a href="../../doc/release_notes/4_30_0_txt.html">4.30.0</a>
  
    <li><a href="../../doc/release_notes/4_31_0_txt.html">4.31.0</a>
  
    <li><a href="../../doc/release_notes/4_32_0_txt.html">4.32.0</a>
  
    <li><a href="../../doc/release_notes/4_33_0_txt.html">4.33.0</a>
  
    <li><a href="../../doc/release_notes/4_34_0_txt.html">4.34.0</a>
  
    <li><a href="../../doc/release_notes/4_35_0_txt.html">4.35.0</a>
  
    <li><a href="../../doc/release_notes/4_36_0_txt.html">4.36.0</a>
  
    <li><a href="../../doc/release_notes/4_37_0_txt.html">4.37.0</a>
  
    <li><a href="../../doc/release_notes/4_38_0_txt.html">4.38.0</a>
  
    <li><a href="../../doc/release_notes/4_39_0_txt.html">4.39.0</a>
  
    <li><a href="../../doc/release_notes/4_4_0_txt.html">4.4.0</a>
  
    <li><a href="../../doc/release_notes/4_40_0_txt.html">4.40.0</a>
  
    <li><a href="../../doc/release_notes/4_41_0_txt.html">4.41.0</a>
  
    <li><a href="../../doc/release_notes/4_42_0_txt.html">4.42.0</a>
  
    <li><a href="../../doc/release_notes/4_43_0_txt.html">4.43.0</a>
  
    <li><a href="../../doc/release_notes/4_44_0_txt.html">4.44.0</a>
  
    <li><a href="../../doc/release_notes/4_45_0_txt.html">4.45.0</a>
  
    <li><a href="../../doc/release_notes/4_46_0_txt.html">4.46.0</a>
  
    <li><a href="../../doc/release_notes/4_47_0_txt.html">4.47.0</a>
  
    <li><a href="../../doc/release_notes/4_48_0_txt.html">4.48.0</a>
  
    <li><a href="../../doc/release_notes/4_49_0_txt.html">4.49.0</a>
  
    <li><a href="../../doc/release_notes/4_5_0_txt.html">4.5.0</a>
  
    <li><a href="../../doc/release_notes/4_6_0_txt.html">4.6.0</a>
  
    <li><a href="../../doc/release_notes/4_7_0_txt.html">4.7.0</a>
  
    <li><a href="../../doc/release_notes/4_8_0_txt.html">4.8.0</a>
  
    <li><a href="../../doc/release_notes/4_9_0_txt.html">4.9.0</a>
  
    <li><a href="../../doc/release_notes/5_0_0_txt.html">5.0.0</a>
  
    <li><a href="../../doc/release_notes/5_1_0_txt.html">5.1.0</a>
  
    <li><a href="../../doc/release_notes/5_10_0_txt.html">5.10.0</a>
  
    <li><a href="../../doc/release_notes/5_11_0_txt.html">5.11.0</a>
  
    <li><a href="../../doc/release_notes/5_12_0_txt.html">5.12.0</a>
  
    <li><a href="../../doc/release_notes/5_13_0_txt.html">5.13.0</a>
  
    <li><a href="../../doc/release_notes/5_14_0_txt.html">5.14.0</a>
  
    <li><a href="../../doc/release_notes/5_15_0_txt.html">5.15.0</a>
  
    <li><a href="../../doc/release_notes/5_16_0_txt.html">5.16.0</a>
  
    <li><a href="../../doc/release_notes/5_17_0_txt.html">5.17.0</a>
  
    <li><a href="../../doc/release_notes/5_18_0_txt.html">5.18.0</a>
  
    <li><a href="../../doc/release_notes/5_19_0_txt.html">5.19.0</a>
  
    <li><a href="../../doc/release_notes/5_2_0_txt.html">5.2.0</a>
  
    <li><a href="../../doc/release_notes/5_20_0_txt.html">5.20.0</a>
  
    <li><a href="../../doc/release_notes/5_21_0_txt.html">5.21.0</a>
  
    <li><a href="../../doc/release_notes/5_22_0_txt.html">5.22.0</a>
  
    <li><a href="../../doc/release_notes/5_23_0_txt.html">5.23.0</a>
  
    <li><a href="../../doc/release_notes/5_24_0_txt.html">5.24.0</a>
  
    <li><a href="../../doc/release_notes/5_25_0_txt.html">5.25.0</a>
  
    <li><a href="../../doc/release_notes/5_26_0_txt.html">5.26.0</a>
  
    <li><a href="../../doc/release_notes/5_27_0_txt.html">5.27.0</a>
  
    <li><a href="../../doc/release_notes/5_28_0_txt.html">5.28.0</a>
  
    <li><a href="../../doc/release_notes/5_29_0_txt.html">5.29.0</a>
  
    <li><a href="../../doc/release_notes/5_3_0_txt.html">5.3.0</a>
  
    <li><a href="../../doc/release_notes/5_30_0_txt.html">5.30.0</a>
  
    <li><a href="../../doc/release_notes/5_31_0_txt.html">5.31.0</a>
  
    <li><a href="../../doc/release_notes/5_32_0_txt.html">5.32.0</a>
  
    <li><a href="../../doc/release_notes/5_33_0_txt.html">5.33.0</a>
  
    <li><a href="../../doc/release_notes/5_34_0_txt.html">5.34.0</a>
  
    <li><a href="../../doc/release_notes/5_35_0_txt.html">5.35.0</a>
  
    <li><a href="../../doc/release_notes/5_36_0_txt.html">5.36.0</a>
  
    <li><a href="../../doc/release_notes/5_37_0_txt.html">5.37.0</a>
  
    <li><a href="../../doc/release_notes/5_38_0_txt.html">5.38.0</a>
  
    <li><a href="../../doc/release_notes/5_39_0_txt.html">5.39.0</a>
  
    <li><a href="../../doc/release_notes/5_4_0_txt.html">5.4.0</a>
  
    <li><a href="../../doc/release_notes/5_40_0_txt.html">5.40.0</a>
  
    <li><a href="../../doc/release_notes/5_41_0_txt.html">5.41.0</a>
  
    <li><a href="../../doc/release_notes/5_42_0_txt.html">5.42.0</a>
  
    <li><a href="../../doc/release_notes/5_43_0_txt.html">5.43.0</a>
  
    <li><a href="../../doc/release_notes/5_44_0_txt.html">5.44.0</a>
  
    <li><a href="../../doc/release_notes/5_45_0_txt.html">5.45.0</a>
  
    <li><a href="../../doc/release_notes/5_46_0_txt.html">5.46.0</a>
  
    <li><a href="../../doc/release_notes/5_47_0_txt.html">5.47.0</a>
  
    <li><a href="../../doc/release_notes/5_48_0_txt.html">5.48.0</a>
  
    <li><a href="../../doc/release_notes/5_49_0_txt.html">5.49.0</a>
  
    <li><a href="../../doc/release_notes/5_5_0_txt.html">5.5.0</a>
  
    <li><a href="../../doc/release_notes/5_50_0_txt.html">5.50.0</a>
  
    <li><a href="../../doc/release_notes/5_51_0_txt.html">5.51.0</a>
  
    <li><a href="../../doc/release_notes/5_52_0_txt.html">5.52.0</a>
  
    <li><a href="../../doc/release_notes/5_53_0_txt.html">5.53.0</a>
  
    <li><a href="../../doc/release_notes/5_54_0_txt.html">5.54.0</a>
  
    <li><a href="../../doc/release_notes/5_55_0_txt.html">5.55.0</a>
  
    <li><a href="../../doc/release_notes/5_6_0_txt.html">5.6.0</a>
  
    <li><a href="../../doc/release_notes/5_7_0_txt.html">5.7.0</a>
  
    <li><a href="../../doc/release_notes/5_8_0_txt.html">5.8.0</a>
  
    <li><a href="../../doc/release_notes/5_9_0_txt.html">5.9.0</a>
  
    <li><a href="../../doc/schema_modification_rdoc.html">schema_modification</a>
  
    <li><a href="../../doc/security_rdoc.html">security</a>
  
    <li><a href="../../doc/sharding_rdoc.html">sharding</a>
  
    <li><a href="../../doc/sql_rdoc.html">sql</a>
  
    <li><a href="../../doc/testing_rdoc.html">testing</a>
  
    <li><a href="../../doc/thread_safety_rdoc.html">thread_safety</a>
  
    <li><a href="../../doc/transactions_rdoc.html">transactions</a>
  
    <li><a href="../../doc/validations_rdoc.html">validations</a>
  
    <li><a href="../../doc/virtual_rows_rdoc.html">virtual_rows</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page doc/release_notes/4.45.0.txt">

<h1 id="label-Deprecated+Features">Deprecated Features<span><a href="#label-Deprecated+Features">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>Dataset mutation is now deprecated.  Users should switch to using the non-mutating methods.</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where!</span>(<span class="ruby-value">:foo</span>)
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:foo</span>)
</pre>
</li><li>
<p>Support for the Cubrid, Firebird, Informix, and Progress databases has been deprecated.  Any users of this support should consider creating an external adapter with the current code and maintaining such support themselves.</p>
</li><li>
<p>The do (DataObjects), swift, and jdbc/as400 adapters have been deprecated.  Any users of these adapters should consider creating an external adapter with the current code and maintaining the adapter themselves.</p>
</li><li>
<p>Model transaction hooks (after_commit, after_rollback, after_destroy_commit, after_destroy_rollback) are now deprecated. Users should switch to calling the after_commit and after_rollback database transaction hooks directly.</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">after_commit</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">do_something</span>
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">after_save</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">db</span>.<span class="ruby-identifier">after_commit</span>{<span class="ruby-identifier">do_something</span>}
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>Passing a block to Database#from is now deprecated.  For backwards compatibility, this block affected the WHERE clause instead of the FROM clause.  In <a href="../../Sequel.html"><code>Sequel</code></a> 5, Database#from blocks will be treated like Dataset#from blocks, and will affect the FROM clause.  This behavior has been available for years by using the from_block extension.</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-constant">DB</span>.<span class="ruby-identifier">from</span>(<span class="ruby-value">:foo</span>){<span class="ruby-identifier">a</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">b</span>}
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-constant">DB</span>.<span class="ruby-identifier">from</span>(<span class="ruby-value">:foo</span>).<span class="ruby-identifier">where</span>{<span class="ruby-identifier">a</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">b</span>}
</pre>
</li><li>
<p>Passing non-hash arguments and multiple arguments to the model association methods is now deprecated.  Switch to using a hash as an argument.</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-identifier">model</span>.<span class="ruby-identifier">association</span>(<span class="ruby-keyword">true</span>)
<span class="ruby-identifier">model</span>.<span class="ruby-identifier">association</span>(<span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ds</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:foo</span>)})
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-identifier">model</span>.<span class="ruby-identifier">association</span>(<span class="ruby-value">:reload</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)
<span class="ruby-identifier">model</span>.<span class="ruby-identifier">association</span>(<span class="ruby-value">:callback</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ds</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:foo</span>)})
<span class="ruby-identifier">model</span>.<span class="ruby-identifier">association</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ds</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:foo</span>)}
</pre>
</li><li>
<p>Passing procs as filter arguments is now deprecated.  These should now be passed as blocks instead of arguments.</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">proc</span>{<span class="ruby-identifier">foo</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bar</span>})
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where</span>{<span class="ruby-identifier">foo</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bar</span>}
</pre>
</li><li>
<p>Passing multiple arguments or an array as filter arguments when the array/arguments does not represent a conditions specifier (array of two element arrays, treated like a hash) is now deprecated.  Switch to calling the filter method separately with each argument or using <a href="../../Sequel.html"><code>Sequel</code></a>.&amp; to combine the arguments:</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:foo</span>, <span class="ruby-value">:bar</span>)
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where</span>([<span class="ruby-value">:foo</span>, <span class="ruby-value">:bar</span>])
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:foo</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:bar</span>)
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where</span>(<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">&amp;</span>(<span class="ruby-value">:foo</span>, <span class="ruby-value">:bar</span>))
</pre>
</li><li>
<p>Returning false from model before hooks to cancel an action is now deprecated.  Switch to calling cancel_action instead.</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">before_save</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">something</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">before_save</span>
  <span class="ruby-identifier">cancel_action</span>(<span class="ruby-string">&#39;something bad&#39;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">something</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>Database#each_server has been deprecated.  Switch to using Database#servers and Database#with_server from server_block extension:</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-constant">DB</span>.<span class="ruby-identifier">each_server</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">db</span><span class="ruby-operator">|</span> <span class="ruby-identifier">db</span>.<span class="ruby-identifier">run</span>(<span class="ruby-string">&quot;foo&quot;</span>)}
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-constant">DB</span>.<span class="ruby-identifier">extension</span> <span class="ruby-value">:server_block</span>
<span class="ruby-constant">DB</span>.<span class="ruby-identifier">servers</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-constant">DB</span>.<span class="ruby-identifier">with_server</span>(<span class="ruby-identifier">s</span>){<span class="ruby-constant">DB</span>.<span class="ruby-identifier">run</span>(<span class="ruby-string">&quot;foo&quot;</span>)}}
</pre>
</li><li>
<p>Calling Database#add_servers and Database#remove_servers on a database that does not use the :servers option is now deprecated. Currently, the calls to add_servers and remove_servers are ignored for such databases, which can hide errors.</p>
</li><li>
<p>Sequel::Postgres::PG_NAMED_TYPES is now deprecated.  Switch to calling Database#add_named_conversion_proc instead.</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sequel/adapters/utils/pg_types&#39;</span>
<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Postgres</span><span class="ruby-operator">::</span><span class="ruby-constant">PG_NAMED_TYPES</span>[<span class="ruby-value">:foo</span>] = <span class="ruby-identifier">lambda</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>}
<span class="ruby-constant">DB</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-string">&#39;postgres://...&#39;</span>)
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-constant">DB</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-string">&#39;postgres://...&#39;</span>)
<span class="ruby-constant">DB</span>.<span class="ruby-identifier">add_named_conversion_proc</span>(<span class="ruby-value">:foo</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>}
</pre>
</li><li>
<p>Modifying the identifier mangling settings for a Database or Dataset is now deprecated unless the identifier_mangling extension is explicitly loaded into the Database instance.</p>
</li><li>
<p>The Sequel::Database.single_threaded accessor is now deprecated. Switch to using Sequel.single_threaded= and Sequel.single_threaded?.</p>
</li><li>
<p>Sequel::Database.identifier_input_method, Sequel::Database.identifier_output_method, and <a href="../../Sequel/Database.html#method-i-quote_identifier"><code>Sequel::Database.quote_identifier</code></a> accessors are now deprecated. Switch to modifying the setting for each Database instance.</p>
</li><li>
<p>Sequel.identifier_input_method=, Sequel.identifier_output_method=, and Sequel.quote_identifer= setter methods are now deprecated. Switch to modifying the setting for each Database instance.</p>
</li><li>
<p>Calling Dataset#delete/update/truncate on datasets with limits or offsets is now deprecated, unless the database will respect the limit or offset.  Currently, only MySQL and Microsoft SQL Server have limited support for such deletes and updates.  You should either call unlimited or skip_limit_check before calling delete/update/truncate.</p>
</li><li>
<p>Deprecate having duplicate column names in subclass tables when using the class_table_inheritance plugin.  The documentation has warned against this for a long time, but the code did not enforce it.</p>
</li><li>
<p>When using the association_pks plugin setter methods without the :delay_pks association option set, a warning is now issued. In <a href="../../Sequel.html"><code>Sequel</code></a> 5, the default will be to assume that the :delay_pks option is :always, and not to make modifications until the object is saved.  If you would like to keep the current behavior, set the :delay_pks=&gt;false association option.</p>

<p>The current :delay_pks=&gt;true behavior will be removed in <a href="../../Sequel.html"><code>Sequel</code></a> 5, with it being treated like :delay_pks=&gt;:always.  If you are relying on the current behavior of :delay_pks=&gt;true (delay for new objects, immediate for existing objects), you will need to update your code.</p>
</li><li>
<p>Database#dup/clone are now deprecated.  They have never been handled correctly, since the default implementation from Kernel has been used.</p>
</li><li>
<p>Model.dup/clone are now deprecated.  They have never been handled correctly, as the default implemenation from Kernel/Module has been used.</p>
</li><li>
<p>Database#use on MySQL is now deprecated.  Switch to creating a new Database instance instead of modifying the database for an existing instance.</p>
</li><li>
<p>Database#database_name on MySQL is now deprecated. Switch to asking the database server which database you are connected to:</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-constant">DB</span>.<span class="ruby-identifier">database_name</span>
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-constant">DB</span>.<span class="ruby-identifier">get</span>{<span class="ruby-constant">DATABASE</span>{}}
</pre>
</li><li>
<p>In the lazy_attributes, nested_attributes, composition, and serialization plugins, the *_module accessors are now deprecated. These were implementation details that should not have been exposed.</p>
</li><li>
<p>The schema plugin is now deprecated.  Switch to defining the schema before creating the model class using the Database schema methods.</p>
</li><li>
<p>The scissors plugin is deprecated.  It existed for compatibility with <a href="../../Sequel.html"><code>Sequel</code></a> 3, but it is dangerous as it makes it easier to modify all rows when the intent was to modify a single row.</p>
</li><li>
<p>The prepared_statements_associations and prepared_statements_with_pk plugins are now deprecated.  These plugins generally make things slower.</p>
</li><li>
<p>Dataset#unbind, Sequel::Unbinder, and Sequel::UnbindDuplicate are now deprecated.  This mostly existed to support the prepared_statements_associations and prepared_statements_with_pk plugins.</p>
</li><li>
<p>Sequel::Error::* exception class aliases are now deprecated. Switch to using the exception classes in the <a href="../../Sequel.html"><code>Sequel</code></a> namespace.</p>
</li><li>
<p>Sequel::BeforeHookFailed is now deprecated.  Switch to using <a href="../../Sequel/HookFailed.html"><code>Sequel::HookFailed</code></a>.</p>
</li><li>
<p>Calling <a href="../../Sequel/Qualifier.html#method-c-new"><code>Sequel::Qualifier.new</code></a> with 2 arguments is now deprecated. Users should switch to calling it with a single argument (the table used for qualifying unqualified identifiers).</p>
</li><li>
<p>Treating unrecognized prepared statement types as :select is now deprecated.  Switch to using :select as the prepared statement type.</p>
</li><li>
<p>The @was_new instance variable available in model after_save hooks is now deprecated.  There is no deprecation warning associated with this change.</p>

<pre class="ruby"><span class="ruby-comment"># Instead of:</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">after_save</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@was_new</span>
    <span class="ruby-identifier">do_something</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">do_something_else</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># Switch to:</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">after_create</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">do_something</span>
<span class="ruby-keyword">end</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">after_update</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">do_something_else</span>
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>The @columns_updated instance variable available in model after_save and after_update hooks is deprecated.  Switch to using the new columns_updated plugin and calling the columns_updated method.</p>
</li><li>
<p>The Sequel.cache_anonymous_models accessor has been deprecated. Switch to using Sequel::Model.cache_anonymous_models.</p>
</li><li>
<p>Sequel::Model::ANONYMOUS_MODEL_CLASSES and Sequel::Model::ANONYMOUS_MODEL_CLASSES_MUTEX have been deprecated.</p>
</li><li>
<p>Sequel::Database::ResetIdentifierMangling has been deprecated.</p>
</li></ul>

<h1 id="label-New+Features">New Features<span><a href="#label-New+Features">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>A validation_contexts plugin has been added, which adds support for a :validation_context option to Model#save and Model#valid?. The value for this option will be available via the validation_context method inside the validation hooks and validate method.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Album</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>
  <span class="ruby-identifier">plugin</span> <span class="ruby-value">:validation_contexts</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">validate</span>
    <span class="ruby-keyword">super</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">validation_context</span> <span class="ruby-operator">==</span> <span class="ruby-value">:approve</span>
      <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value">:status_id</span>, <span class="ruby-string">&#39;not 42&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">status_id</span> <span class="ruby-operator">==</span> <span class="ruby-value">42</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">album</span> = <span class="ruby-constant">Album</span>.<span class="ruby-identifier">first</span>
<span class="ruby-identifier">album</span>.<span class="ruby-identifier">status_id</span> = <span class="ruby-value">41</span>
<span class="ruby-identifier">album</span>.<span class="ruby-identifier">valid?</span>(<span class="ruby-value">:validation_context</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:approve</span>) <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-identifier">album</span>.<span class="ruby-identifier">status_id</span> = <span class="ruby-value">42</span>
<span class="ruby-identifier">album</span>.<span class="ruby-identifier">valid?</span>(<span class="ruby-value">:validation_context</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:approve</span>) <span class="ruby-comment"># =&gt; true</span>
</pre>
</li><li>
<p>A columns_updated plugin has been added, allowing you to get access to the hash used for updating a model instance via the columns_updated method:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Album</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>
  <span class="ruby-identifier">plugin</span> <span class="ruby-value">:columns_updated</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">after_update</span>
    <span class="ruby-keyword">super</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">columns_updated</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:foo</span>)
      <span class="ruby-identifier">do_something</span>(<span class="ruby-identifier">columns_updated</span>[<span class="ruby-value">:foo</span>])
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>Dataset#delete on Microsoft SQL Server now respects limits.  Note that Microsoft SQL Server does not respect orders for deletes, only limits, which makes this support not very useful.  Currently a deprecation warning will be issued when using a delete with an order and a limit, and in <a href="../../Sequel.html"><code>Sequel</code></a> 5 an exception will be raised.</p>
</li><li>
<p>An odbc/oracle subadapter has been added.</p>
</li><li>
<p>A Model.dataset_module_class accessor has been added, allowing plugins to add support for custom behavior in dataset_module blocks.</p>
</li><li>
<p>Support for deprecating constants on Ruby 2.3+ has been added. Note that you will only get warnings for deprecated constant use if you are running on Ruby 2.3+.  If you are running on a previous version of Ruby, you should scan your code manually for deprecated constant use.</p>
</li></ul>

<h1 id="label-Other+Improvements">Other Improvements<span><a href="#label-Other+Improvements">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>Using Model#cancel_action inside validation hooks now works correctly when Model#valid? is called.</p>
</li><li>
<p>Model#[] now handles columns with false values correctly when using the split_values plugin.</p>
</li><li>
<p>When calling Dataset#union/intersect/except on a dataset with an offset but no limit, the dataset is wrapped in a subquery, just like a dataset with a limit.</p>
</li><li>
<p>The dumping of 64-bit autoincrementing primary key columns by the schema_dumper extension is now handled correctly when using the :same_db option.</p>
</li><li>
<p>The schema_dumper extension now supports the :schema option when dumping schema.</p>
</li><li>
<p>On Microsoft SQL Server and SQLAnywhere, ORDER BY clauses now come after UNION/INTERSECT/EXCEPT instead of before, fixing issues when the :from_self=&gt;false option is used with union/intersect/except and an order is applied afterward.</p>
</li><li>
<p>On Microsoft SQL Server, if calling Dataset#union/intersect/except on a dataset with an order and without a limit or offset, the order is removed.  When using UNION/INTERSECT/EXCEPT, Microsoft SQL Server does not guarantee any ordering unless you specify an order for the compound dataset.  As a general rule, you should always apply orders after compounds instead of before.</p>
</li><li>
<p>On Microsoft SQL Server &lt;2012, when using a dataset with an offset without a limit in a UNION/INTERSECT/EXCEPT query, <a href="../../Sequel.html"><code>Sequel</code></a> now uses TOP (100) PERCENT to work around the limitation that using orders in subqueries is not supported unless there is a limit (offsets are emulated by a ROW_NUMBER window function with an order in this case).</p>
</li><li>
<p>Database#indexes on MySQL now handles qualified identifiers.</p>
</li><li>
<p><a href="../../Sequel.html"><code>Sequel</code></a> now literalizes <a href="../../Sequel/SQLTime.html"><code>Sequel::SQLTime</code></a> instances with 3 fractional digits in the jdbc/postgresql adapter, fixing issues on JRuby 9.1.8.0+ (the first JRuby version to support greater than millisecond precision).</p>
</li></ul>

<h1 id="label-Backwards+Compatibility">Backwards Compatibility<span><a href="#label-Backwards+Compatibility">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>When using the association_proxies plugin and passing a block when loading the plugin, the :proxy_argument option in hash passed to the block is now an empty hash instead of nil if no argument was given to the association method.</p>
</li><li>
<p>The private Model#_valid? method now takes a single options hash argument, instead of 2 arguments.</p>
</li><li>
<p>The pg_hstore extension no longer modifies PG_NAMED_TYPES.  This should not affect behavior if the pg_hstore extension is loaded into the Database instance.</p>
</li><li>
<p>Support for pg &lt;0.8.0 has been dropped.  pg 0.8.0 was released in January 2008.</p>
</li></ul>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

