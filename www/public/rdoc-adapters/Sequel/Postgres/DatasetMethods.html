<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Sequel::Postgres::DatasetMethods - Sequel: The Database Toolkit for Ruby</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="../UnmodifiedIdentifiers/DatasetMethods.html">Sequel::UnmodifiedIdentifiers::DatasetMethods</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-i-_import">#_import</a>
    
    <li ><a href="#method-i-analyze">#analyze</a>
    
    <li class="calls-super" ><a href="#method-i-complex_expression_sql_append">#complex_expression_sql_append</a>
    
    <li ><a href="#method-i-disable_insert_returning">#disable_insert_returning</a>
    
    <li ><a href="#method-i-explain">#explain</a>
    
    <li ><a href="#method-i-for_share">#for_share</a>
    
    <li ><a href="#method-i-full_text_search">#full_text_search</a>
    
    <li class="calls-super" ><a href="#method-i-insert">#insert</a>
    
    <li ><a href="#method-i-insert_conflict">#insert_conflict</a>
    
    <li ><a href="#method-i-insert_ignore">#insert_ignore</a>
    
    <li ><a href="#method-i-insert_select">#insert_select</a>
    
    <li ><a href="#method-i-insert_select_sql">#insert_select_sql</a>
    
    <li class="calls-super" ><a href="#method-i-join_table">#join_table</a>
    
    <li ><a href="#method-i-lock">#lock</a>
    
    <li ><a href="#method-i-overriding_system_value">#overriding_system_value</a>
    
    <li ><a href="#method-i-overriding_user_value">#overriding_user_value</a>
    
    <li ><a href="#method-i-supports_cte-3F">#supports_cte?</a>
    
    <li ><a href="#method-i-supports_cte_in_subqueries-3F">#supports_cte_in_subqueries?</a>
    
    <li ><a href="#method-i-supports_distinct_on-3F">#supports_distinct_on?</a>
    
    <li ><a href="#method-i-supports_group_cube-3F">#supports_group_cube?</a>
    
    <li ><a href="#method-i-supports_group_rollup-3F">#supports_group_rollup?</a>
    
    <li ><a href="#method-i-supports_grouping_sets-3F">#supports_grouping_sets?</a>
    
    <li ><a href="#method-i-supports_insert_conflict-3F">#supports_insert_conflict?</a>
    
    <li ><a href="#method-i-supports_insert_select-3F">#supports_insert_select?</a>
    
    <li ><a href="#method-i-supports_lateral_subqueries-3F">#supports_lateral_subqueries?</a>
    
    <li ><a href="#method-i-supports_modifying_joins-3F">#supports_modifying_joins?</a>
    
    <li ><a href="#method-i-supports_nowait-3F">#supports_nowait?</a>
    
    <li ><a href="#method-i-supports_regexp-3F">#supports_regexp?</a>
    
    <li ><a href="#method-i-supports_returning-3F">#supports_returning?</a>
    
    <li ><a href="#method-i-supports_skip_locked-3F">#supports_skip_locked?</a>
    
    <li ><a href="#method-i-supports_timestamp_timezones-3F">#supports_timestamp_timezones?</a>
    
    <li ><a href="#method-i-supports_window_clause-3F">#supports_window_clause?</a>
    
    <li ><a href="#method-i-supports_window_function_frame_option-3F">#supports_window_function_frame_option?</a>
    
    <li ><a href="#method-i-supports_window_functions-3F">#supports_window_functions?</a>
    
    <li class="calls-super" ><a href="#method-i-to_prepared_statement">#to_prepared_statement</a>
    
    <li class="calls-super" ><a href="#method-i-truncate">#truncate</a>
    
    <li ><a href="#method-i-with_ties">#with_ties</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-Sequel::Postgres::DatasetMethods">
  <h1 id="module-Sequel::Postgres::DatasetMethods" class="module">
    module Sequel::Postgres::DatasetMethods
  </h1>

  <section class="description">
    
  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="LOCK_MODES">LOCK_MODES
        
        <dd>
        
      
        <dt id="NULL">NULL
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-analyze" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">analyze</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the results of an EXPLAIN ANALYZE query as a string</p>
          
          

          
          <div class="method-source-code" id="analyze-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1533</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">analyze</span>
<span class="line-num">1534</span>   <span class="ruby-identifier">explain</span>(<span class="ruby-value">:analyze</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)
<span class="line-num">1535</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-complex_expression_sql_append" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">complex_expression_sql_append</span><span
            class="method-args">(sql, op, args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Handle converting the ruby xor operator (^) into the PostgreSQL xor operator (#), and use the ILIKE and NOT ILIKE operators.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="complex_expression_sql_append-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1540</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">complex_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">op</span>, <span class="ruby-identifier">args</span>)
<span class="line-num">1541</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">op</span>
<span class="line-num">1542</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:^</span>
<span class="line-num">1543</span>     <span class="ruby-identifier">j</span> = <span class="ruby-string">&#39; # &#39;</span>
<span class="line-num">1544</span>     <span class="ruby-identifier">c</span> = <span class="ruby-keyword">false</span>
<span class="line-num">1545</span>     <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span>
<span class="line-num">1546</span>       <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">j</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span>
<span class="line-num">1547</span>       <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">a</span>)
<span class="line-num">1548</span>       <span class="ruby-identifier">c</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">true</span>
<span class="line-num">1549</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1550</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:ILIKE</span>, <span class="ruby-value">:&#39;NOT ILIKE&#39;</span>
<span class="line-num">1551</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;(&#39;</span>
<span class="line-num">1552</span>     <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>])
<span class="line-num">1553</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; &#39;</span>
<span class="line-num">1554</span>     <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>[<span class="ruby-value">1</span>])
<span class="line-num">1555</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot; ESCAPE &quot;</span>
<span class="line-num">1556</span>     <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-string">&quot;\\&quot;</span>)
<span class="line-num">1557</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;)&#39;</span>
<span class="line-num">1558</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1559</span>     <span class="ruby-keyword">super</span>
<span class="line-num">1560</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1561</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-disable_insert_returning" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">disable_insert_returning</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Disables automatic use of INSERT … RETURNING.  You can still use returning manually to force the use of RETURNING when inserting.</p>

<p>This is designed for cases where INSERT RETURNING cannot be used, such as when you are using partitioning with trigger functions or conditional rules, or when you are using a PostgreSQL version less than 8.2, or a PostgreSQL derivative that does not support returning.</p>

<p>Note that when this method is used, insert will not return the primary key of the inserted row, you will have to get the primary key of the inserted row before inserting via nextval, or after inserting via currval or lastval (making sure to use the same database connection for currval or lastval).</p>
          
          

          
          <div class="method-source-code" id="disable_insert_returning-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1577</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">disable_insert_returning</span>
<span class="line-num">1578</span>   <span class="ruby-identifier">clone</span>(<span class="ruby-value">:disable_insert_returning</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)
<span class="line-num">1579</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-explain" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">explain</span><span
            class="method-args">(opts=OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the results of an EXPLAIN query as a string</p>
          
          

          
          <div class="method-source-code" id="explain-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1582</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">explain</span>(<span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)
<span class="line-num">1583</span>   <span class="ruby-identifier">with_sql</span>((<span class="ruby-identifier">opts</span>[<span class="ruby-value">:analyze</span>] <span class="ruby-operator">?</span> <span class="ruby-string">&#39;EXPLAIN ANALYZE &#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;EXPLAIN &#39;</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">select_sql</span>).<span class="ruby-identifier">map</span>(<span class="ruby-value">:&#39;QUERY PLAN&#39;</span>).<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\r\n&quot;</span>)
<span class="line-num">1584</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-for_share" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">for_share</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a cloned dataset which will use FOR SHARE to lock returned rows.</p>
          
          

          
          <div class="method-source-code" id="for_share-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1587</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">for_share</span>
<span class="line-num">1588</span>   <span class="ruby-identifier">lock_style</span>(<span class="ruby-value">:share</span>)
<span class="line-num">1589</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-full_text_search" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">full_text_search</span><span
            class="method-args">(cols, terms, opts = OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Run a full text search on PostgreSQL.  By default, searching for the inclusion of any of the terms in any of the cols.</p>

<p>Options:</p>
<dl class="rdoc-list note-list"><dt>:headline 
<dd>
<p>Append a expression to the selected columns aliased to headline that contains an extract of the matched text.</p>
</dd><dt>:language 
<dd>
<p>The language to use for the search (default: &#39;simple&#39;)</p>
</dd><dt>:plain 
<dd>
<p>Whether a plain search should be used (default: false).  In this case, terms should be a single string, and it will do a search where cols contains all of the words in terms.  This ignores search operators in terms.</p>
</dd><dt>:phrase 
<dd>
<p>Similar to :plain, but also adding an ILIKE filter to ensure that returned rows also include the exact phrase used.</p>
</dd><dt>:rank 
<dd>
<p>Set to true to order by the rank, so that closer matches are returned first.</p>
</dd><dt>:to_tsquery 
<dd>
<p>Can be set to :plain or :phrase to specify the function to use to convert the terms to a ts_query.</p>
</dd><dt>:tsquery 
<dd>
<p>Specifies the terms argument is already a valid SQL expression returning a tsquery, and can be used directly in the query.</p>
</dd><dt>:tsvector 
<dd>
<p>Specifies the cols argument is already a valid SQL expression returning a tsvector, and can be used directly in the query.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="full_text_search-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1610</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">full_text_search</span>(<span class="ruby-identifier">cols</span>, <span class="ruby-identifier">terms</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)
<span class="line-num">1611</span>   <span class="ruby-identifier">lang</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">cast</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:language</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;simple&#39;</span>, <span class="ruby-value">:regconfig</span>)
<span class="line-num">1612</span> 
<span class="line-num">1613</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:tsvector</span>]
<span class="line-num">1614</span>     <span class="ruby-identifier">phrase_cols</span> = <span class="ruby-identifier">full_text_string_join</span>(<span class="ruby-identifier">cols</span>)
<span class="line-num">1615</span>     <span class="ruby-identifier">cols</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">function</span>(<span class="ruby-value">:to_tsvector</span>, <span class="ruby-identifier">lang</span>, <span class="ruby-identifier">phrase_cols</span>)
<span class="line-num">1616</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1617</span> 
<span class="line-num">1618</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:tsquery</span>]
<span class="line-num">1619</span>     <span class="ruby-identifier">phrase_terms</span> = <span class="ruby-identifier">terms</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">terms</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; | &#39;</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">terms</span>
<span class="line-num">1620</span> 
<span class="line-num">1621</span>     <span class="ruby-identifier">query_func</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">to_tsquery</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:to_tsquery</span>]
<span class="line-num">1622</span>     <span class="ruby-keyword">when</span> <span class="ruby-value">:phrase</span>, <span class="ruby-value">:plain</span>
<span class="line-num">1623</span>       <span class="ruby-value">:&quot;#{to_tsquery}to_tsquery&quot;</span>
<span class="line-num">1624</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1625</span>       (<span class="ruby-identifier">opts</span>[<span class="ruby-value">:phrase</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:plain</span>]) <span class="ruby-operator">?</span> <span class="ruby-value">:plainto_tsquery</span> <span class="ruby-operator">:</span> <span class="ruby-value">:to_tsquery</span>
<span class="line-num">1626</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1627</span> 
<span class="line-num">1628</span>     <span class="ruby-identifier">terms</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">function</span>(<span class="ruby-identifier">query_func</span>, <span class="ruby-identifier">lang</span>, <span class="ruby-identifier">phrase_terms</span>)
<span class="line-num">1629</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1630</span> 
<span class="line-num">1631</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">where</span>(<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">lit</span>([<span class="ruby-string">&quot;&quot;</span>, <span class="ruby-string">&quot; @@ &quot;</span>, <span class="ruby-string">&quot;&quot;</span>], <span class="ruby-identifier">cols</span>, <span class="ruby-identifier">terms</span>))
<span class="line-num">1632</span> 
<span class="line-num">1633</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:phrase</span>]
<span class="line-num">1634</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;can&#39;t use :phrase with either :tsvector or :tsquery arguments to full_text_search together&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:tsvector</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:tsquery</span>]
<span class="line-num">1635</span>     <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">grep</span>(<span class="ruby-identifier">phrase_cols</span>, <span class="ruby-node">&quot;%#{escape_like(phrase_terms)}%&quot;</span>, <span class="ruby-value">:case_insensitive</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)
<span class="line-num">1636</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1637</span> 
<span class="line-num">1638</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rank</span>]
<span class="line-num">1639</span>     <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">reverse</span>{<span class="ruby-identifier">ts_rank_cd</span>(<span class="ruby-identifier">cols</span>, <span class="ruby-identifier">terms</span>)}
<span class="line-num">1640</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1641</span> 
<span class="line-num">1642</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:headline</span>]
<span class="line-num">1643</span>     <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">select_append</span>{<span class="ruby-identifier">ts_headline</span>(<span class="ruby-identifier">lang</span>, <span class="ruby-identifier">phrase_cols</span>, <span class="ruby-identifier">terms</span>).<span class="ruby-identifier">as</span>(<span class="ruby-value">:headline</span>)}
<span class="line-num">1644</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1645</span> 
<span class="line-num">1646</span>   <span class="ruby-identifier">ds</span>
<span class="line-num">1647</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-insert" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">insert</span><span
            class="method-args">(*values)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Insert given values into the database.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="insert-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1650</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">insert</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
<span class="line-num">1651</span>   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:returning</span>]
<span class="line-num">1652</span>     <span class="ruby-comment"># Already know which columns to return, let the standard code handle it</span>
<span class="line-num">1653</span>     <span class="ruby-keyword">super</span>
<span class="line-num">1654</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:sql</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:disable_insert_returning</span>]
<span class="line-num">1655</span>     <span class="ruby-comment"># Raw SQL used or RETURNING disabled, just use the default behavior</span>
<span class="line-num">1656</span>     <span class="ruby-comment"># and return nil since sequence is not known.</span>
<span class="line-num">1657</span>     <span class="ruby-keyword">super</span>
<span class="line-num">1658</span>     <span class="ruby-keyword">nil</span>
<span class="line-num">1659</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1660</span>     <span class="ruby-comment"># Force the use of RETURNING with the primary key value,</span>
<span class="line-num">1661</span>     <span class="ruby-comment"># unless it has been disabled.</span>
<span class="line-num">1662</span>     <span class="ruby-identifier">returning</span>(<span class="ruby-identifier">insert_pk</span>).<span class="ruby-identifier">insert</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-keyword">return</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>}
<span class="line-num">1663</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1664</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-insert_conflict" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">insert_conflict</span><span
            class="method-args">(opts=OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Handle uniqueness violations when inserting, by updating the conflicting row, using ON CONFLICT. With no options, uses ON CONFLICT DO NOTHING.  Options:</p>
<dl class="rdoc-list note-list"><dt>:conflict_where 
<dd>
<p>The index filter, when using a partial index to determine uniqueness.</p>
</dd><dt>:constraint 
<dd>
<p>An explicit constraint name, has precendence over :target.</p>
</dd><dt>:target 
<dd>
<p>The column name or expression to handle uniqueness violations on.</p>
</dd><dt>:update 
<dd>
<p>A hash of columns and values to set.  Uses ON CONFLICT DO UPDATE.</p>
</dd><dt>:update_where 
<dd>
<p>A WHERE condition to use for the update.</p>
</dd></dl>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">insert_conflict</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-value">a:</span> <span class="ruby-value">1</span>, <span class="ruby-value">b:</span> <span class="ruby-value">2</span>)
<span class="ruby-comment"># INSERT INTO TABLE (a, b) VALUES (1, 2)</span>
<span class="ruby-comment"># ON CONFLICT DO NOTHING</span>

<span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">insert_conflict</span>(<span class="ruby-value">constraint:</span> <span class="ruby-value">:table_a_uidx</span>).<span class="ruby-identifier">insert</span>(<span class="ruby-value">a:</span> <span class="ruby-value">1</span>, <span class="ruby-value">b:</span> <span class="ruby-value">2</span>)
<span class="ruby-comment"># INSERT INTO TABLE (a, b) VALUES (1, 2)</span>
<span class="ruby-comment"># ON CONFLICT ON CONSTRAINT table_a_uidx DO NOTHING</span>

<span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">insert_conflict</span>(<span class="ruby-value">target:</span> <span class="ruby-value">:a</span>).<span class="ruby-identifier">insert</span>(<span class="ruby-value">a:</span> <span class="ruby-value">1</span>, <span class="ruby-value">b:</span> <span class="ruby-value">2</span>)
<span class="ruby-comment"># INSERT INTO TABLE (a, b) VALUES (1, 2)</span>
<span class="ruby-comment"># ON CONFLICT (a) DO NOTHING</span>

<span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">insert_conflict</span>(<span class="ruby-value">target:</span> <span class="ruby-value">:a</span>, <span class="ruby-value">conflict_where:</span> {<span class="ruby-value">c:</span> <span class="ruby-keyword">true</span>}).<span class="ruby-identifier">insert</span>(<span class="ruby-value">a:</span> <span class="ruby-value">1</span>, <span class="ruby-value">b:</span> <span class="ruby-value">2</span>)
<span class="ruby-comment"># INSERT INTO TABLE (a, b) VALUES (1, 2)</span>
<span class="ruby-comment"># ON CONFLICT (a) WHERE (c IS TRUE) DO NOTHING</span>

<span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">insert_conflict</span>(<span class="ruby-value">target:</span> <span class="ruby-value">:a</span>, <span class="ruby-value">update:</span> {<span class="ruby-value">b:</span> <span class="ruby-constant">Sequel</span>[<span class="ruby-value">:excluded</span>][<span class="ruby-value">:b</span>]}).<span class="ruby-identifier">insert</span>(<span class="ruby-value">a:</span> <span class="ruby-value">1</span>, <span class="ruby-value">b:</span> <span class="ruby-value">2</span>)
<span class="ruby-comment"># INSERT INTO TABLE (a, b) VALUES (1, 2)</span>
<span class="ruby-comment"># ON CONFLICT (a) DO UPDATE SET b = excluded.b</span>

<span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">insert_conflict</span>(<span class="ruby-value">constraint:</span> <span class="ruby-value">:table_a_uidx</span>,
  <span class="ruby-value">update:</span> {<span class="ruby-value">b:</span> <span class="ruby-constant">Sequel</span>[<span class="ruby-value">:excluded</span>][<span class="ruby-value">:b</span>]}, <span class="ruby-value">update_where:</span> {<span class="ruby-constant">Sequel</span>[<span class="ruby-value">:table</span>][<span class="ruby-value">:status_id</span>] <span class="ruby-operator">=&gt;</span> <span class="ruby-value">1</span>}).<span class="ruby-identifier">insert</span>(<span class="ruby-value">a:</span> <span class="ruby-value">1</span>, <span class="ruby-value">b:</span> <span class="ruby-value">2</span>)
<span class="ruby-comment"># INSERT INTO TABLE (a, b) VALUES (1, 2)</span>
<span class="ruby-comment"># ON CONFLICT ON CONSTRAINT table_a_uidx</span>
<span class="ruby-comment"># DO UPDATE SET b = excluded.b WHERE (table.status_id = 1)</span>
</pre>
          
          

          
          <div class="method-source-code" id="insert_conflict-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1701</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">insert_conflict</span>(<span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)
<span class="line-num">1702</span>   <span class="ruby-identifier">clone</span>(<span class="ruby-value">:insert_conflict</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">opts</span>)
<span class="line-num">1703</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-insert_ignore" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">insert_ignore</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Ignore uniqueness/exclusion violations when inserting, using ON CONFLICT DO NOTHING. Exists mostly for compatibility to MySQL&#39;s insert_ignore. Example:</p>

<pre class="ruby"><span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">insert_ignore</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-value">a:</span> <span class="ruby-value">1</span>, <span class="ruby-value">b:</span> <span class="ruby-value">2</span>)
<span class="ruby-comment"># INSERT INTO TABLE (a, b) VALUES (1, 2)</span>
<span class="ruby-comment"># ON CONFLICT DO NOTHING</span>
</pre>
          
          

          
          <div class="method-source-code" id="insert_ignore-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1711</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">insert_ignore</span>
<span class="line-num">1712</span>   <span class="ruby-identifier">insert_conflict</span>
<span class="line-num">1713</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-insert_select" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">insert_select</span><span
            class="method-args">(*values)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Insert a record, returning the record inserted, using RETURNING.  Always returns nil without running an INSERT statement if <a href="DatasetMethods.html#method-i-disable_insert_returning"><code>disable_insert_returning</code></a> is used.  If the query runs but returns no values, returns false.</p>
          
          

          
          <div class="method-source-code" id="insert_select-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1718</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">insert_select</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
<span class="line-num">1719</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_insert_select?</span>
<span class="line-num">1720</span>   <span class="ruby-comment"># Handle case where query does not return a row</span>
<span class="line-num">1721</span>   <span class="ruby-identifier">server?</span>(<span class="ruby-value">:default</span>).<span class="ruby-identifier">with_sql_first</span>(<span class="ruby-identifier">insert_select_sql</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)) <span class="ruby-operator">||</span> <span class="ruby-keyword">false</span>
<span class="line-num">1722</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-insert_select_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">insert_select_sql</span><span
            class="method-args">(*values)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The SQL to use for an <a href="DatasetMethods.html#method-i-insert_select"><code>insert_select</code></a>, adds a RETURNING clause to the insert unless the RETURNING clause is already present.</p>
          
          

          
          <div class="method-source-code" id="insert_select_sql-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1726</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">insert_select_sql</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
<span class="line-num">1727</span>   <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:returning</span>] <span class="ruby-operator">?</span> <span class="ruby-keyword">self</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">returning</span>
<span class="line-num">1728</span>   <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">insert_sql</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
<span class="line-num">1729</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-join_table" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">join_table</span><span
            class="method-args">(type, table, expr=nil, options=OPTS, &amp;block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Support SQL::AliasedExpression as expr to setup a USING join with a table alias for the USING columns.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="join_table-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1733</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">join_table</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">expr</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>=<span class="ruby-constant">OPTS</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">1734</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">expression</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">expr</span>.<span class="ruby-identifier">expression</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">expression</span>.<span class="ruby-identifier">all?</span>
<span class="line-num">1735</span>     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:join_using</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)
<span class="line-num">1736</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1737</span>   <span class="ruby-keyword">super</span>
<span class="line-num">1738</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-lock" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">lock</span><span
            class="method-args">(mode, opts=OPTS) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Locks all tables in the dataset&#39;s FROM clause (but not in JOINs) with the specified mode (e.g. &#39;EXCLUSIVE&#39;).  If a block is given, starts a new transaction, locks the table, and yields.  If a block is not given, just locks the tables.  Note that PostgreSQL will probably raise an error if you lock the table outside of an existing transaction.  Returns nil.</p>
          
          

          
          <div class="method-source-code" id="lock-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1745</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">lock</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)
<span class="line-num">1746</span>   <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-keyword">yield</span>) <span class="ruby-comment"># perform locking inside a transaction and yield to block</span>
<span class="line-num">1747</span>     <span class="ruby-ivar">@db</span>.<span class="ruby-identifier">transaction</span>(<span class="ruby-identifier">opts</span>){<span class="ruby-identifier">lock</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">opts</span>); <span class="ruby-keyword">yield</span>}
<span class="line-num">1748</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1749</span>     <span class="ruby-identifier">sql</span> = <span class="ruby-string">&#39;LOCK TABLE &#39;</span>.<span class="ruby-identifier">dup</span>
<span class="line-num">1750</span>     <span class="ruby-identifier">source_list_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:from</span>])
<span class="line-num">1751</span>     <span class="ruby-identifier">mode</span> = <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">upcase</span>.<span class="ruby-identifier">strip</span>
<span class="line-num">1752</span>     <span class="ruby-keyword">unless</span> <span class="ruby-constant">LOCK_MODES</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">mode</span>)
<span class="line-num">1753</span>       <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Unsupported lock mode: #{mode}&quot;</span>
<span class="line-num">1754</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1755</span>     <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; IN #{mode} MODE&quot;</span>
<span class="line-num">1756</span>     <span class="ruby-ivar">@db</span>.<span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">opts</span>)
<span class="line-num">1757</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1758</span>   <span class="ruby-keyword">nil</span>
<span class="line-num">1759</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-overriding_system_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">overriding_system_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Use OVERRIDING USER VALUE for INSERT statements, so that identity columns always use the user supplied value, and an error is not raised for identity columns that are GENERATED ALWAYS.</p>
          
          

          
          <div class="method-source-code" id="overriding_system_value-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1764</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">overriding_system_value</span>
<span class="line-num">1765</span>   <span class="ruby-identifier">clone</span>(<span class="ruby-value">:override</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:system</span>)
<span class="line-num">1766</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-overriding_user_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">overriding_user_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Use OVERRIDING USER VALUE for INSERT statements, so that identity columns always use the sequence value instead of the user supplied value.</p>
          
          

          
          <div class="method-source-code" id="overriding_user_value-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1770</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">overriding_user_value</span>
<span class="line-num">1771</span>   <span class="ruby-identifier">clone</span>(<span class="ruby-value">:override</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:user</span>)
<span class="line-num">1772</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_cte-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_cte?</span><span
            class="method-args">(type=:select)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_cte-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1774</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_cte?</span>(<span class="ruby-identifier">type</span>=<span class="ruby-value">:select</span>)
<span class="line-num">1775</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:select</span>
<span class="line-num">1776</span>     <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">80400</span>
<span class="line-num">1777</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1778</span>     <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">90100</span>
<span class="line-num">1779</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1780</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_cte_in_subqueries-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_cte_in_subqueries?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL supports using the WITH clause in subqueries if it supports using WITH at all (i.e. on PostgreSQL 8.4+).</p>
          
          

          
          <div class="method-source-code" id="supports_cte_in_subqueries-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1784</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_cte_in_subqueries?</span>
<span class="line-num">1785</span>   <span class="ruby-identifier">supports_cte?</span>
<span class="line-num">1786</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_distinct_on-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_distinct_on?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>DISTINCT ON is a PostgreSQL extension</p>
          
          

          
          <div class="method-source-code" id="supports_distinct_on-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1789</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_distinct_on?</span>
<span class="line-num">1790</span>   <span class="ruby-keyword">true</span>
<span class="line-num">1791</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_group_cube-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_group_cube?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL 9.5+ supports GROUP CUBE</p>
          
          

          
          <div class="method-source-code" id="supports_group_cube-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1794</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_group_cube?</span>
<span class="line-num">1795</span>   <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">90500</span>
<span class="line-num">1796</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_group_rollup-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_group_rollup?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL 9.5+ supports GROUP ROLLUP</p>
          
          

          
          <div class="method-source-code" id="supports_group_rollup-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1799</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_group_rollup?</span>
<span class="line-num">1800</span>   <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">90500</span>
<span class="line-num">1801</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_grouping_sets-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_grouping_sets?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL 9.5+ supports GROUPING SETS</p>
          
          

          
          <div class="method-source-code" id="supports_grouping_sets-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1804</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_grouping_sets?</span>
<span class="line-num">1805</span>   <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">90500</span>
<span class="line-num">1806</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_insert_conflict-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_insert_conflict?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL 9.5+ supports the ON CONFLICT clause to INSERT.</p>
          
          

          
          <div class="method-source-code" id="supports_insert_conflict-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1814</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_insert_conflict?</span>
<span class="line-num">1815</span>   <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">90500</span>
<span class="line-num">1816</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_insert_select-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_insert_select?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>True unless insert returning has been disabled for this dataset.</p>
          
          

          
          <div class="method-source-code" id="supports_insert_select-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1809</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_insert_select?</span>
<span class="line-num">1810</span>   <span class="ruby-operator">!</span><span class="ruby-ivar">@opts</span>[<span class="ruby-value">:disable_insert_returning</span>]
<span class="line-num">1811</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_lateral_subqueries-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_lateral_subqueries?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL 9.3+ supports lateral subqueries</p>
          
          

          
          <div class="method-source-code" id="supports_lateral_subqueries-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1819</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_lateral_subqueries?</span>
<span class="line-num">1820</span>   <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">90300</span>
<span class="line-num">1821</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_modifying_joins-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_modifying_joins?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL supports modifying joined datasets</p>
          
          

          
          <div class="method-source-code" id="supports_modifying_joins-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1824</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_modifying_joins?</span>
<span class="line-num">1825</span>   <span class="ruby-keyword">true</span>
<span class="line-num">1826</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_nowait-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_nowait?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL supports NOWAIT.</p>
          
          

          
          <div class="method-source-code" id="supports_nowait-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1829</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_nowait?</span>
<span class="line-num">1830</span>   <span class="ruby-keyword">true</span>
<span class="line-num">1831</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_regexp-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_regexp?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL supports pattern matching via regular expressions</p>
          
          

          
          <div class="method-source-code" id="supports_regexp-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1839</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_regexp?</span>
<span class="line-num">1840</span>   <span class="ruby-keyword">true</span>
<span class="line-num">1841</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_returning-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_returning?</span><span
            class="method-args">(type)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returning is always supported.</p>
          
          

          
          <div class="method-source-code" id="supports_returning-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1834</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_returning?</span>(<span class="ruby-identifier">type</span>)
<span class="line-num">1835</span>   <span class="ruby-keyword">true</span>
<span class="line-num">1836</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_skip_locked-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_skip_locked?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL 9.5+ supports SKIP LOCKED.</p>
          
          

          
          <div class="method-source-code" id="supports_skip_locked-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1844</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_skip_locked?</span>
<span class="line-num">1845</span>   <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">90500</span>
<span class="line-num">1846</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_timestamp_timezones-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_timestamp_timezones?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL supports timezones in literal timestamps</p>
          
          

          
          <div class="method-source-code" id="supports_timestamp_timezones-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1849</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_timestamp_timezones?</span>
<span class="line-num">1850</span>   <span class="ruby-keyword">true</span>
<span class="line-num">1851</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_window_clause-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_window_clause?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL 8.4+ supports WINDOW clause.</p>
          
          

          
          <div class="method-source-code" id="supports_window_clause-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1854</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_window_clause?</span>
<span class="line-num">1855</span>   <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">80400</span>
<span class="line-num">1856</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_window_function_frame_option-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_window_function_frame_option?</span><span
            class="method-args">(option)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Base support added in 8.4, offset supported added in 9.0, GROUPS and EXCLUDE support added in 11.0.</p>
          
          

          
          <div class="method-source-code" id="supports_window_function_frame_option-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1865</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_window_function_frame_option?</span>(<span class="ruby-identifier">option</span>)
<span class="line-num">1866</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">option</span>
<span class="line-num">1867</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:rows</span>, <span class="ruby-value">:range</span>
<span class="line-num">1868</span>     <span class="ruby-keyword">true</span>
<span class="line-num">1869</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:offset</span>
<span class="line-num">1870</span>     <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">90000</span>
<span class="line-num">1871</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">:groups</span>, <span class="ruby-value">:exclude</span>
<span class="line-num">1872</span>     <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">110000</span>
<span class="line-num">1873</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1874</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_window_functions-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_window_functions?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>PostgreSQL 8.4+ supports window functions</p>
          
          

          
          <div class="method-source-code" id="supports_window_functions-3F-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1859</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_window_functions?</span>
<span class="line-num">1860</span>   <span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">80400</span>
<span class="line-num">1861</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-truncate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">truncate</span><span
            class="method-args">(opts = OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Truncates the dataset.  Returns nil.</p>

<p>Options:</p>
<dl class="rdoc-list note-list"><dt>:cascade 
<dd>
<p>whether to use the CASCADE option, useful when truncating tables with foreign keys.</p>
</dd><dt>:only 
<dd>
<p>truncate using ONLY, so child tables are unaffected</p>
</dd><dt>:restart 
<dd>
<p>use RESTART IDENTITY to restart any related sequences</p>
</dd></dl>

<p>:only and :restart only work correctly on PostgreSQL 8.4+.</p>

<p>Usage:</p>

<pre class="ruby"><span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">truncate</span>
<span class="ruby-comment"># TRUNCATE TABLE &quot;table&quot;</span>

<span class="ruby-constant">DB</span>[<span class="ruby-value">:table</span>].<span class="ruby-identifier">truncate</span>(<span class="ruby-value">cascade:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">only:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">restart:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-comment"># TRUNCATE TABLE ONLY &quot;table&quot; RESTART IDENTITY CASCADE</span>
</pre>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="truncate-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1892</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">truncate</span>(<span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)
<span class="line-num">1893</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">empty?</span>
<span class="line-num">1894</span>     <span class="ruby-keyword">super</span>()
<span class="line-num">1895</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1896</span>     <span class="ruby-identifier">clone</span>(<span class="ruby-value">:truncate_opts</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">opts</span>).<span class="ruby-identifier">truncate</span>
<span class="line-num">1897</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1898</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-with_ties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">with_ties</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Use WITH TIES when limiting the result set to also include additional rules that have the same results for the order column as the final row. Requires PostgreSQL 13.</p>
          
          

          
          <div class="method-source-code" id="with_ties-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1903</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">with_ties</span>
<span class="line-num">1904</span>   <span class="ruby-identifier">clone</span>(<span class="ruby-value">:limit_with_ties</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)
<span class="line-num">1905</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-_import" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_import</span><span
            class="method-args">(columns, values, opts=OPTS)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If returned primary keys are requested, use RETURNING unless already set on the dataset.  If RETURNING is already set, use existing returning values.  If RETURNING is only set to return a single columns, return an array of just that column. Otherwise, return an array of hashes.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="_import-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1913</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">_import</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)
<span class="line-num">1914</span>   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:returning</span>]
<span class="line-num">1915</span>     <span class="ruby-identifier">statements</span> = <span class="ruby-identifier">multi_insert_sql</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>)
<span class="line-num">1916</span>     <span class="ruby-identifier">trans_opts</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">opts</span>]
<span class="line-num">1917</span>     <span class="ruby-identifier">trans_opts</span>[<span class="ruby-value">:server</span>] = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:server</span>]
<span class="line-num">1918</span>     <span class="ruby-ivar">@db</span>.<span class="ruby-identifier">transaction</span>(<span class="ruby-identifier">trans_opts</span>) <span class="ruby-keyword">do</span>
<span class="line-num">1919</span>       <span class="ruby-identifier">statements</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">st</span><span class="ruby-operator">|</span> <span class="ruby-identifier">returning_fetch_rows</span>(<span class="ruby-identifier">st</span>)}
<span class="line-num">1920</span>     <span class="ruby-keyword">end</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">v</span>}
<span class="line-num">1921</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:return</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:primary_key</span>
<span class="line-num">1922</span>     <span class="ruby-identifier">returning</span>(<span class="ruby-identifier">insert_pk</span>).<span class="ruby-identifier">_import</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>, <span class="ruby-identifier">opts</span>)
<span class="line-num">1923</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1924</span>     <span class="ruby-keyword">super</span>
<span class="line-num">1925</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1926</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_prepared_statement" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_prepared_statement</span><span
            class="method-args">(type, *a)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="to_prepared_statement-source">
            <pre>     <span class="ruby-comment"># File lib/sequel/adapters/shared/postgres.rb</span>
<span class="line-num">1928</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_prepared_statement</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">a</span>)
<span class="line-num">1929</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:insert</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:returning</span>)
<span class="line-num">1930</span>     <span class="ruby-identifier">returning</span>(<span class="ruby-identifier">insert_pk</span>).<span class="ruby-identifier">send</span>(<span class="ruby-value">:to_prepared_statement</span>, <span class="ruby-value">:insert_pk</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">a</span>)
<span class="line-num">1931</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1932</span>     <span class="ruby-keyword">super</span>
<span class="line-num">1933</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1934</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

